%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: io-tutorial6.dvi
%%Pages: 19
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSCommandLine: dvips -o
%+ /user/staff/kh/etc/tamdhu/public_html/papers/io-tutorial.ps
%+ io-tutorial6.dvi
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1996.01.18:2206
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300 (io-tutorial6.dvi)
@start /Fa 3 104 df<EA03C0EA0FF0EA1FF8EA3FFCEA7FFEA2B5FCA4EA7FFEA2EA3FFC
EA1FF8EA0FF0EA03C010107E9115>15 D<133C13E0EA01C013801203AD13005A121C12F0
121C12077E1380AD120113C0EA00E0133C0E297D9E15>102 D<12F0121C12077E1380AD
120113C0EA00E0133C13E0EA01C013801203AD13005A121C12F00E297D9E15>I
E /Fb 46 123 df<90383FE3F83901F03F1C3903C03E3E0007137CEA0F80151C1500A5B6
12C0A2390F807C00AE397FE1FF80A21F1D809C1C>11 D<EAFFF8A40D04808A10>45
D<127812FCA4127806067D850D>I<EB01801303A2EB0700A3130EA25BA35BA35BA25BA3
485AA3485AA348C7FCA2120EA35AA35AA25AA35AA25A11297D9E18>I<127812FCA41278
1200A6127812FCA4127806127D910D>58 D<EB0380A2497EA3497EA2497E131BEB3BF813
31A2EB60FCA2EBE0FEEBC07EA248487E90B5FC481480EB001F4814C00006130FA248EB07
E0A239FF803FFEA21F1C7E9B24>65 D<B512F814FF390FC01F80EC0FC0140715E0A515C0
EC0F80EC3F00EBFFFE9038C00F80EC07C0EC03E0A215F0A5EC07E0A2EC1FC0B6120014FC
1C1C7E9B22>I<90381FE0209038FFF8E03803F80F3807C003380F800148C7FC123E1560
127E127C00FC1400A8007C1460127E123E15C07E390F8001803907C003003803F80E3800
FFFCEB1FE01B1C7D9B22>I<B512F814FF390FC01FC0EC07E0EC01F015F8140015FC157C
A2157EA8157CA315F8A2EC01F0EC07E0EC1FC0B6120014F81F1C7E9B25>I<B6FCA2380F
C01F1407801580A214C1A39038C1C00013C313FFA213C313C113C01560A2EC00E015C0A2
1401A21403EC0F80B6FCA21B1C7E9B1F>I<B6FCA2380FC01F1407801580A2140114C1A2
ECC00013C113C313FFA213C313C113C0A391C7FCA6EAFFFEA2191C7E9B1E>I<39FFFC3F
FFA2390FC003F0AA90B5FCA2EBC003AC39FFFC3FFFA2201C7E9B25>72
D<EAFFFCA2EA0FC0B3A6EAFFFCA20E1C7E9B12>I<EAFFFEA2EA0FC0AF1403A31407A214
06140E141E147EB512FEA2181C7E9B1D>76 D<D8FFC0EB03FF6D5B000F15F0D80DF0130D
A3D80CF81319A2017C1331A26D1361A26D13C1A390380F8181A2903807C301A2EB03E6A2
EB01FCA3EB00F8A23AFFC0701FFFA2281C7E9B2D>I<EB3FE03801F07C3803C01E390F80
0F80391F0007C0001E1303003E14E0007E14F0007C1301A200FC14F8A8007C14F0007E13
03A2003E14E0003F13076C14C0390F800F803903C01E003801F07C38003FE01D1C7D9B24
>79 D<B512F814FE390FC03F80140FEC07C015E0A515C0A2EC0F80EC3F00EBFFFC01C0C7
FCABEAFFFCA21B1C7E9B21>I<B512F014FE380FC03FEC0F806E7E81A55D4A5A023EC7FC
EBFFF0EBC07C80143F6E7EA6ED8180A2EC0FC13AFFFC07C300EC01FE211C7E9B24>82
D<3807F820381FFEE0EA3C07EA7801EA700012F01460A26C130012FEEAFFE0EA7FFE6C7E
1480000F13C06C13E0EA007FEB03F01301130012C0A214E07E38F001C0EAFC0338EFFF00
EA83FC141C7D9B1B>I<007FB512E0A238781F81007013800060146000E0147000C01430
A400001400B03807FFFEA21C1C7E9B21>I<39FFFC03FFA2390FC00030B3120715606C6C
13E03901F001C03900FC078090387FFE00EB0FF8201C7E9B25>I<3AFFFC01FF80A23A0F
C00018006D1338000714306D1370000314607F00015CA26C6C485AA2EBFE03017E90C7FC
EB7F07EB3F061486EB1F8CA2EB0FD8A214F86D5AA26D5AA26D5AA2211C7F9B24>I<3BFF
F87FFE0FFCA23B0FC007E000C081D9E003130100071680EC07F801F014030003D90FFC13
00140CD801F81406EC1CFE9039FC187E0E0000150CEC303F01FE141CD97E701398EC601F
013F14B002E013F0ECC00F011F5CEC8007A2010F5CEC00036D5CA22E1C7F9B31>I<EA0F
F8EA1C1E383E0F80130714C0121C1200137FEA07E7EA1F07123C127C12F8A3EA780B383E
13F8EA0FE115127F9117>97 D<B4FCA2121FA9EB3F80EBE1E0EB8070EB0078143CA2143E
A6143CA21478EB8070381EC1E0381C3F00171D7F9C1B>I<EA03FCEA0E0EEA1C1F123C12
78130E00F8C7FCA61278EB0180123C381C0300EA0E0EEA03F811127E9115>I<EB0FF0A2
1301A9EA01F9EA0F07EA1C03EA3C011278A212F8A61278A2123CEA1C03380F0FFEEA03F9
171D7E9C1B>I<EA03FCEA0F07381C0380383C01C0127814E012F8A2B5FC00F8C7FCA312
7814607E6C13C0380F03803801FC0013127F9116>I<3803F0F0380E1F38EA3C0F383807
3000781380A400381300EA3C0FEA1E1CEA33F00030C7FCA3EA3FFF14C06C13E014F03878
01F838F00078A300701370007813F0381E03C03807FF00151B7F9118>103
D<B4FCA2121FA9EB0FC0EB31E0EB40F0EB80F8A21300AB38FFE7FFA2181D7F9C1B>I<12
1E123FA4121EC7FCA6127FA2121FAEEAFFC0A20A1E7F9D0E>I<B4FCA2121FA9EB03FCA2
EB01C0EB0300130E5B5B137813FC13BE131F7F1480EB07C0EB03E0130138FFE7FEA2171D
7F9C19>107 D<B4FCA2121FB3A7EAFFE0A20B1D7F9C0E>I<39FF0FC07E903831E18F3A1F
40F20780D980FC13C0A2EB00F8AB3AFFE7FF3FF8A225127F9128>I<38FF0FC0EB31E038
1F40F0EB80F8A21300AB38FFE7FFA218127F911B>I<EA01FC380F0780381C01C0003C13
E0387800F0A200F813F8A6007813F0A2383C01E0381E03C0380F07803801FC0015127F91
18>I<38FF3F80EBE1E0381F80F0EB0078147C143C143EA6143C147C1478EB80F0EBC1E0
EB3F0090C7FCA6EAFFE0A2171A7F911B>I<EAFE3E1347381E8F80A3381F070090C7FCAA
EAFFE0A211127F9114>114 D<EA1FD8EA3078EA601812E0A2EAF000EAFF80EA7FE013F0
EA1FF8EA07FCEA007CEAC01CA212E01318EAF830EACFC00E127E9113>I<1203A45AA25A
A2EA3FFC12FFEA1F00A9130CA4EA0F08EA0798EA03F00E1A7F9913>I<38FF07F8A2EA1F
00AC1301120F380786FFEA01F818127F911B>I<38FFC1FCA2381F00601380000F13C0A2
3807C180A23803E300A213F7EA01F613FE6C5AA21378A2133016127F9119>I<39FF8FF8
FEA2391F03E030A3390F87F06013869038C6F8E03907CC78C0A23903FC7D80EBF83D143F
3901F01F00A20000131EEBE00EA21F127F9122>I<38FFC7FCA2381F81C0380F83803807
C700EA03EEEA01FC5B1200137C13FEEA01DF38039F80EA070F380607C0380C03E038FF07
FCA216127F9119>I<38FFC1FCA2381F00601380000F13C0A23807C180A23803E300A213
F7EA01F613FE6C5AA21378A21330A25B1270EAF8E05BEAF9800073C7FC123E161A7F9119
>I<387FFF8038781F00EA703FEA603E5B13FC5BEA01F01203485AEBC180EA0F81121F13
03003E1300EA7E07EA7C0FB5FC11127F9115>I E /Fc 45 122 df<90380FF83F90397F
FDFFC03A01F81FE3E03903E03F87EA07C0D80F801307ED03C06EC7FCA6B612FCA2260F80
1FC7FCB2397FF0FFF0A223237FA221>11 D<EAFFFCA40E047F8C13>45
D<1238127C12FEA3127C123807077C8610>I<14181438A21470A214E0A3EB01C0A2EB03
80A3EB0700A3130EA25BA35BA25BA35BA2485AA3485AA248C7FCA3120EA35AA25AA35AA2
5AA25A15317DA41C>I<13181378EA01F812FFA21201B3A7387FFFE0A213207C9F1C>49
D<EA03FCEA0FFF383C1FC0387007E0007C13F0EAFE0314F8A21301127CEA3803120014F0
A2EB07E014C0EB0F80EB1F00133E13385BEBE018EA01C0EA0380EA0700000E1338380FFF
F05A5A5AB5FCA215207D9F1C>I<13FE3807FFC0380F07E0381E03F0123FEB81F8A3EA1F
0314F0120014E0EB07C0EB1F803801FE007F380007C0EB01F014F8EB00FCA2003C13FE12
7EB4FCA314FCEA7E01007813F8381E07F0380FFFC03801FE0017207E9F1C>I<14E01301
1303A21307130F131FA21337137713E7EA01C71387EA03071207120E120C121812381270
12E0B6FCA2380007E0A790B5FCA218207E9F1C>I<00301320383E01E0383FFFC0148014
005B13F8EA33C00030C7FCA4EA31FCEA37FF383E0FC0383807E0EA3003000013F0A214F8
A21238127C12FEA200FC13F0A2387007E0003013C0383C1F80380FFF00EA03F815207D9F
1C>I<EB1F80EBFFE03803E0703807C0F0380F01F8121F123EA2387E00F0007C1300A2EA
FC08EB7FC0EBFFE038FD80F038FF00F848137CA248137EA4127CA3003C137C123E001E13
F86C13F0380783E03803FFC0C6130017207E9F1C>I<12601278387FFFFEA214FC14F8A2
14F038E0006014C038C00180EB0300A2EA00065B131C131813381378A25BA31201A31203
A76C5A17227DA11C>I<B67E15F03907F001F86E7E157EA2157FA5157E15FE5DEC03F890
B55AA29038F001FCEC007E811680151F16C0A6ED3F80A2ED7F00EC01FEB612F815C02222
7EA128>66 D<D903FE138090381FFF819038FF01E33901F8003FD803E0131F4848130F48
481307121F48C71203A2481401127EA200FE91C7FCA8127EED0180127F7E15036C6C1400
120F6C6C1306D803F05B6C6C13386CB413F090381FFFC0D903FEC7FC21227DA128>I<B6
7E15F03907F003FCEC007E81ED1F80ED0FC0ED07E0A216F01503A316F8A916F0A3ED07E0
A2ED0FC0ED1F80ED3F00157EEC03FCB612F0158025227EA12B>I<B612FCA23807F00015
3C151C150C150EA21506140CA31500141C143CEBFFFCA2EBF03C141C140CA21503A21400
1506A3150EA2151E153EEC01FCB6FCA220227EA125>I<B612F8A23807F001EC00781538
1518151CA2150CA21418A21500A214381478EBFFF8A2EBF07814381418A491C7FCA8B512
C0A21E227EA123>I<B53883FFFEA23A07F0001FC0AD90B6FCA29038F0001FAFB53883FF
FEA227227EA12C>72 D<B51280A23807F000B3ACB51280A211227EA115>I<B512C0A2D8
07F0C7FCB31518A41538A21570A215F014011407B6FCA21D227EA122>76
D<EB07FC90383FFF809038FC07E03903F001F848486C7E4848137E48487FA248C7EA1F80
A24815C0007E140FA200FE15E0A9007E15C0007F141FA26C15806D133F001F15006C6C13
7E6C6C5B6C6C485A3900FC07E090383FFF80D907FCC7FC23227DA12A>79
D<B6FC15E03907F007F0EC01FC1400157EA2157FA5157EA215FC1401EC07F090B512E015
0001F0C7FCADB57EA220227EA126>I<B512FEECFFC03907F007F0EC01F86E7E157E157F
A6157E5D4A5AEC07F090B512C05D9038F00FE06E7E6E7E6E7EA81606EC00FEEDFF0CB538
803FF8ED0FF027227EA12A>82 D<3801FE023807FF86381F01FE383C007E007C131E0078
130EA200F81306A27E1400B4FC13E06CB4FC14C06C13F06C13F86C13FC000313FEEA003F
1303EB007F143FA200C0131FA36C131EA26C133C12FCB413F838C7FFE00080138018227D
A11F>I<007FB61280A2397E03F80F00781407007014030060140100E015C0A200C01400
A400001500B3A248B512F0A222227EA127>I<B538803FFCA23A07F0000180B3A60003EC
03007F000114066C6C130E017E5B90383F80F890380FFFE0010190C7FC26227EA12B>I<
3A7FFFC1FFF8A23A03FC000C006C6C5B15386C6C13306D6C5A15E090383FC1C090381FE1
8002E3C7FCEB0FF7EB07FE6D5AA26D7E13008081497F14BF9038031FE0496C7E130E9038
0C07F8496C7E1338496C7E90386000FF5B0001EC7F8049EB3FC03AFFFC03FFFEA227227F
A12A>88 D<EA0FFC383FFF80387E07C0EB03E0130114F0123C1200A2133FEA03FDEA1FC1
EA3F01127E12FCA4EA7E02EB0CF8381FF87F3807E03F18167E951B>97
D<B4FCA2121FABEB0FE0EB3FF8EBE07CEB803E497EEC0F80A215C0A81580141F01801300
EBC03E381EE07C381C3FF838180FC01A237EA21F>I<EBFF80000713E0380F83F0EA1F03
123E127E387C01E090C7FC12FCA6127C127EA2003E13186C1330380FC0603807FFC0C613
0015167E9519>I<EB01FEA2EB003EABEA01FC3807FFBE380F81FE381F007E003E133E12
7E127C12FCA8127CA26C137E6C13FE380F83BE3907FF3FC0EA01FC1A237EA21F>I<13FE
3807FF80380F87C0381E01E0003E13F0EA7C0014F812FCA2B5FCA200FCC7FCA3127CA212
7E003E13186C1330380FC0703803FFC0C6130015167E951A>I<3801FE0F3907FFBF8038
0F87C7381F03E7391E01E000003E7FA5001E5BEA1F03380F87C0EBFF80D809FEC7FC0018
C8FCA2121C381FFFE06C13F86C13FE001F7F383C003F48EB0F80481307A40078EB0F006C
131E001F137C6CB45A000113C019217F951C>103 D<B4FCA2121FABEB07E0EB1FF8EB30
7CEB403CEB803EA21300AE39FFE1FFC0A21A237EA21F>I<121C123E127FA3123E121CC7
FCA7B4FCA2121FB2EAFFE0A20B247EA310>I<B4FCA2121FB3ADEAFFE0A20B237EA210>
108 D<3AFF07F007F090391FFC1FFC3A1F303E303E01401340496C487EA201001300AE3B
FFE0FFE0FFE0A22B167E9530>I<38FF07E0EB1FF8381F307CEB403CEB803EA21300AE39
FFE1FFC0A21A167E951F>I<13FE3807FFC0380F83E0381E00F0003E13F848137CA300FC
137EA7007C137CA26C13F8381F01F0380F83E03807FFC03800FE0017167E951C>I<38FF
0FE0EB3FF8381FE07CEB803E497E1580A2EC0FC0A8EC1F80A29038803F00EBC03EEBE0FC
EB3FF8EB0FC090C8FCA8EAFFE0A21A207E951F>I<EAFE1FEB3FC0381E67E013C71387A2
381F83C090C7FCADEAFFF0A213167E9517>114 D<EA0FF3EA3FFFEA781FEA6007EAE003
A212F000FCC7FCEA7FE013F8EA3FFEEA0FFF120138000F80EAC007130312E0A238F00700
EAFC0EEAEFFCEAC7F011167E9516>I<487EA41203A21207A2120F123FB5FCA2EA0F80AB
EB8180A5EB8300EA07C3EA03FEEA00F811207F9F16>I<38FF01FEA2381F003EAF147E14
FE380F81BE3907FF3FC0EA01FC1A167E951F>I<39FFE07FC0A2390F801C006C6C5A6C6C
5AEBF0606C6C5A3800F980137F6DC7FC7F80497E1337EB63E0EBC1F03801C0F848487E38
07007E000E133E39FF80FFE0A21B167F951E>120 D<39FFE01FE0A2391F800700000F13
06EBC00E0007130C13E000035BA26C6C5AA26C6C5AA2EB7CC0A2137F6D5AA26DC7FCA213
0EA2130CA25B1278EAFC3813305BEA69C0EA7F80001FC8FC1B207F951E>I
E /Fd 80 127 df<EAE038EAF078A7EAE038A2EA60300D0B7C9816>34
D<12301278127C123C121CA41238127812F012E01240060D789816>39
D<13E01201EA0380EA0700120E5AA25AA25AA35AA91270A37EA27EA27E7EEA0380EA01E0
12000B217A9C16>I<12C07E12707E7E7EA27EA2EA0380A3EA01C0A9EA0380A3EA0700A2
120EA25A5A5A5A5A0A217B9C16>I<13E0A8B512E0A33800E000A813137F9516>43
D<1238127C127EA2123E120E121E121C127812F01260070B798416>I<B51280A311037E
8D16>I<127012F8A312700505788416>I<EA03E0EA0FF8487EEA1E3CEA380EEA780FEA70
07A238E00380A8EAF00700701300A2EA780FEA3C1E6C5AEA1FFC6C5AEA03E011197E9816
>48 D<12035AA25A5AB4FCA212E71207AEEAFFF8A30D197B9816>I<EA07E0EA1FF8487E
EA783EEAE00700F01380130312601200A2EB0700A2130E5B5B5B5B485A485A000FC7FC38
1E03801238EA7FFFB5FC7E11197E9816>I<EA07E0EA1FF8487EEA781E130712301200A2
130E133EEA07FC13F013FCEA001E13077F1480A2126012F038E00700EA781EEA3FFC6C5A
EA07E011197E9816>I<137C13FC13DC1201EA039CA2EA071C120F120E121E123C123812
7812F0B512E0A338001C00A53801FFC0A313197F9816>I<EA3FFE127FA20070C7FCA7EA
77F0EA7FFC7FEA780FEA300738000380A2126012F0A238E00700EA781EEA3FFC6C5AEA07
E011197E9816>I<13F8EA03FC487EEA0F07EA1C0F1238EA78060070C7FCA2EAE3F8EAEF
FCB47EEAF80F487EEB038012E0A21270A2130700381300EA3C1EEA1FFC6C5AEA03E01119
7E9816>I<12E0B51280A338E00F00131EEA001C5B137813705BA2485AA3485AA448C7FC
A7111A7E9916>I<EA07F0EA1FFC487EEA7C1F38F00780EAE003A338700700EA7C1FEA1F
FCEA07F0EA1FFCEA3C1EEA700700F01380EAE003A3EAF00700701300EA7C1FEA3FFE6C5A
EA07F011197E9816>I<127012F8A312701200A8127012F8A312700512789116>58
D<1238127CA312381200A812381278127CA2123C121CA21238127012F012400618799116
>I<EB01801307131FEB3E0013F8485AEA07C0485A003EC7FC12FC12F012FC123EEA0F80
6C7EEA01F06C7E133EEB1F801307130111157E9616>I<B512E0A27EC8FCA5387FFFE0B5
FCA2130B7F9116>I<12C012F012FC123EEA0F806C7EEA01F06C7E133EEB1F801307131F
EB3E0013F8485AEA07C0485A003EC7FC12FC12F012C011157E9616>I<13E0487EA213B0
A2EA03B8A31318EA071CA5EA0E0EA2EA0FFEA2487EEA1C07A3387E0FC038FF1FE0387E0F
C013197F9816>65 D<EA7FF8EAFFFE6C7EEA1C0714801303A4EB0700EA1FFF5BA2EA1C1F
EB038014C01301A41303EB0780EA7FFFB51200EA7FFC12197F9816>I<3801F180EA07FB
EA0FFFEA1F0FEA3C07EA38031270A200F0C7FC5AA77E38700380A21238383C0700EA1F0F
EA0FFE6C5AEA01F011197E9816>I<EA7FF8EAFFFE6C7EEA1C0FEB0780EB03C01301A214
E01300A8EB01C0A21303EB0780130F387FFF00485AEA7FF81319809816>I<387FFFC0B5
FC7EEA1C01A490C7FCA2131CA2EA1FFCA3EA1C1CA290C7FC14E0A5EA7FFFB5FC7E13197F
9816>I<387FFFE0B5FC7EEA1C00A41400A2131CA2EA1FFCA3EA1C1CA290C7FCA6EA7F80
487E6C5A13197F9816>I<3801F180EA07FBEA0FFFEA1F0FEA3C07EA38031270A200F0C7
FC5AA4EB1FC014E014C038F00380127013071238123CEA1E0FEA0FFFEA07FBEA01F31319
7F9816>I<387F07F038FF8FF8387F07F0381C01C0A7EA1FFFA3EA1C01A9387F07F038FF
8FF8387F07F01519809816>I<EA7FFCEAFFFEEA7FFCEA0380B3EA7FFCEAFFFEEA7FFC0F
197D9816>I<48B4FC4813806C1300EA001CB0126012F05BEA7FF85BEA1FC011197E9816>
I<B47E7F5B001CC7FCAE144014E0A4B5FCA313197F9816>76 D<38FC07E0EAFE0FA2383A
0B80EA3B1BA513BBEA39B3A413F3EA38E3A21303A538FE0FE0A313197F9816>I<387E07
F038FF0FF8387F07F0381D81C0A313C1121C13E1A213611371A313311339A21319131D13
0DA3EA7F07EAFF87EA7F031519809816>I<EA1FFC487E487EEA780F38F00780EAE003AE
EAF007A238780F00EA7FFF6C5A6C5A11197E9816>I<EA7FF8EAFFFE6C7E381C0F801303
14C01301A313031480130F381FFF005B13F8001CC7FCA7127F487E6CC7FC12197F9816>
I<EA7FF0EAFFFC6C7EEA1C0FEB07801303A41307EB0F00EA1FFE5B7FEA1C0E7FA4141014
38A2387F03F0EAFF83387F01E01519809816>82 D<EA07E3EA1FFF5AEA781FEAF00712E0
A290C7FC7E1278EA3F80EA1FF0EA07FCC67E130F7FEB0380A2126012E0EB0700EAF80FEA
FFFE5BEAC7F011197E9816>I<387FFFE0B5FCA2EAE0E0A400001300AFEA07FC487E6C5A
13197F9816>I<387F07F038FF8FF8387F07F0381C01C0B0380E0380A23807070013FF6C
5AEA00F81519809816>I<38FE0FE0A338380380EA3C07001C1300A3EA1E0FEA0E0EA46C
5AA4EA031813B8A3EA01B013F0A26C5A13197F9816>I<387E03F038FF07F8387E03F038
3800E0A4381C01C0A3137113F9A213D9A2000C1380A3EA0DDD138DA338078F00A2130715
19809816>I<387F1F80EB3FC0EB1F80380E1E00131C12075BEA03B813F012015B120012
017F120313B81207131C120FEA0E0EA2487E387E0FC038FF1FE0387E0FC013197F9816>
I<38FE0FE0EAFF1FEAFE0F381C0700A2EA0E0EA26C5AA3EA03B8A2EA01F0A26C5AA8EA03
F8487E6C5A13197F9816>I<EAFFF0A3EAE000B3A8EAFFF0A30C20789C16>91
D<12C07EA21270A27EA27EA27EA27EA26C7EA26C7EA26C7EA21370A27FA27FA27FA27FA2
EB0380A2130111207E9C16>I<EAFFF0A3EA0070B3A8EAFFF0A30C207F9C16>I<1203EA0F
80EA3FE0EAFDF8EAF078EA40100D067C9816>I<B51280A311037E7E16>I<1208121C123C
1278127012E0A412F012F812781230060D789B16>I<EA1FE0487E487EEA783CEA300E12
00A2EA03FE121FEA3E0E127012E0A3EA783E387FFFE0EA3FE7EA0F8313127E9116>I<12
FCA3121CA4137CEA1DFEEA1FFFEB0780381E03C0EA1C01EB00E0A6EB01C0EA1E03381F07
80EBFF00EA1DFEEA0C7813197F9816>I<EA03F8EA0FFCEA1FFEEA3C1EEA780CEA70005A
A57EEA70071278EA3E0EEA1FFCEA0FF8EA03F010127D9116>I<133FA31307A4EA03C7EA
0FF748B4FCEA3C1F487EEA700712E0A6EA700F12786C5A381FFFE0EA0FF7EA07C713197F
9816>I<EA03F0EA0FFC487EEA3C0F487E3870038012E0B5FCA300E0C7FCA23870038012
78EA3E07381FFF00EA07FEEA01F811127E9116>I<131E137F3801FF8013C73803830013
80A2EA7FFFB5FCA2EA0380ACEA7FFC487E6C5A11197F9816>I<3803E3C03807F7E0EA0F
FF381C1CC038380E00A56C5AEA0FF8485AEA1BE00038C7FC1218EA1FFC13FF4813803870
03C038E000E0A4387001C0EA7C07383FFF80380FFE00EA03F8131C7F9116>I<12FCA312
1CA41378EA1DFCEA1FFE130FEA1E07121CAA38FF8FE0139F138F13197F9816>I<1203EA
0780A2EA0300C7FCA4EAFF80A31203ACEAFFFC13FE13FC0F1A7C9916>I<127E12FE127E
120EA4EB7FE0A3EB0F00131E5B5B5B120F7F13BC131EEA0E0E7F1480387F87F0EAFFCFEA
7F871419809816>107 D<EA7FC012FF127F1201B3EA7FFFB512806C130011197E9816>I<
38F9C38038FFEFC0EBFFE0EA3C78A2EA3870AA38FE7CF8A31512809116>I<EAFC78EAFD
FCB47EEA1F0FEA1E07121CAA38FF8FE0139F138F13127F9116>I<EA03E0EA0FF8487EEA
3C1E487EEA700738E00380A5EAF00700701300EA780FEA3C1EEA1FFC6C5AEA03E011127E
9116>I<EAFC7CEAFDFEB5FC381F0780381E03C0EA1C01EB00E0A6EB01C0EA1E03381F07
80EBFF00EA1DFEEA1C7890C7FCA6B47EA3131B7F9116>I<3803E380EA0FF3EA1FFBEA3E
0FEA78071270EAE003A6EA70071278EA3C1FEA1FFBEA0FF3EA03E3EA0003A6EB1FF0EB3F
F8EB1FF0151B7F9116>I<387F0FC038FF3FE0EA7F7F3807F040EBC0005BA290C7FCA8EA
7FFC12FF127F13127F9116>I<EA0FECEA3FFC127FEAF03CEAE01CA2EA7000EA7F80EA1F
F0EA07F8EA003CEA600E12E012F0EAF81EEAFFFC13F8EAC7E00F127D9116>I<12035AA4
EA7FFFB5FCA20007C7FCA75BEB0380A3EB8700EA03FE6C5A6C5A11177F9616>I<EAFC3F
A3EA1C07AB131F381FFFE0EA0FF7EA07C713127F9116>I<387F1FC038FF9FE0387F1FC0
381C0700A2EA0E0EA36C5AA4EA03B8A3EA01F0A26C5A13127F9116>I<38FF1FE0A33838
0380A4EA39F3A20019130013B3A3EA1DB71317EA1F1FEA0F1EEA0E0E13127F9116>I<38
7F1FC0133F131F380F1E006C5AEA03B813F012016C5A12017FEA03B8EA073C131CEA0E0E
387F1FC038FF3FE0387F1FC013127F9116>I<387F1FC038FF9FE0387F1FC0381C070012
0E130EA212075BA2EA039CA21398EA01B8A2EA00F0A35BA3485A1279127BEA7F8090C7FC
123C131B7F9116>I<383FFFC05AA238700780EB0F00131EC65A5B485A485AEA078048C7
FC381E01C0123C1278B5FCA312127F9116>I<EB1F80137F13FF3801E0005BA91203EA7F
8048C7FCA26C7EEA03C01201A97F3800FF80137F131F11207E9C16>I<12E0B3AE032077
9C16>I<127CB4FC7FEA03C01201A97F6CB4FCEB7F80A2EBFF00EA01E05BA91203B45A90
C7FC127C11207E9C16>I<EA1C30EA3F78EAFFF8EAF7E0EA61C00D057C9816>I
E /Fe 67 127 df<EAC060EAE0E0A4EAC060A5EA40400B0B7C9614>34
D<126012F012F812781218A31230A2126012C01280050C789614>39
D<EA01801203EA06005A121C121812385AA35AA91270A37E1218121C120C7EEA03801201
091D799914>I<128012C01260123012381218121C120EA31207A9120EA3121C12181238
1230126012C01280081D7C9914>I<EA01C0A7B51280A33801C000A711117F9314>43
D<127012F812FCA2127C120C1218123012E012C0060A798414>I<EAFFFEA30F037E8C14>
I<127012F8A312700505798414>I<EA07C0EA0FE0EA1C70EA3838EA3018EA701CA2EAE0
0EA9EA701CA2EA3838A2EA1C70EA0FE0EA07C00F177E9614>48 D<1203A25A5A123F12F7
12471207AEEA7FF0A20C177C9614>I<EA0FC0EA1FF0EA3838EA701CEAE00EA312401200
131CA213381330137013E0EA01C0EA030012065AEA180E1230EA7FFEA20F177E9614>I<
127012F8A312701200A6127012F8A312700510798F14>58 D<1306131E133E13F8EA01F0
EA03C0EA0F80EA1F00123C12F85A7E123C121FEA0F80EA03C0EA01F0EA00F8133E131E13
060F157E9514>60 D<B51280A27EC8FCA3387FFF80B5FCA211097F8F14>I<12C012F07E
123E7EEA0780EA03E0EA01F0EA0078133E131E133E1378EA01F0EA03E0EA0780EA1F0012
3E12F85A12C00F157E9514>I<EA01C0487EA21360A2EA0770A4EA0630EA0E38A4487EEA
1FFCA2EA1C1CA2487EA238FE3F80A211177F9614>65 D<EAFFF013FCEA381E130E1307A4
130E131EEA3FFCA2EA381E130E1307A5130E131EEAFFFC13F810177F9614>I<3801F180
EA07FFEA0E1FEA1C071238EA7003A348C7FCA738700380A338380700121CEA0E0EEA07FC
EA01F011177F9614>I<EAFFE013F8EA383C7F130E7FA3EB0380A8EB0700A2130E131E5B
EAFFF813E011177F9614>I<B5FCA2EA3807A490C7FCA21338A2EA3FF8A2EA3838A290C7
FCA3EB0380A4B5FCA211177F9614>I<B51280A2EA3803A490C7FCA21338A2EA3FF8A2EA
3838A290C7FCA7B4FCA211177F9614>I<EA03C6EA0FFEEA1C3EEA181E1238EA700EA212
60EAE000A4137FA2130E12601270A2EA381E1218EA1C3EEA0FFEEA03CE10177F9614>I<
38FE3F80A238380E00A8EA3FFEA2EA380EA938FE3F80A211177F9614>I<EAFFF8A2EA07
00B3EAFFF8A20D177D9614>I<EA07FCA2EA0070B012E0A2EAF0E0EA7FC0EA1F000E177D
9614>I<B4FCA21238AF1307A4B5FCA210177E9614>76 D<38FC1F80A2007C1300EA7637
A4EA7777A2EA7367A313E7EA71C7A2EA7007A638F80F80A211177F9614>I<38FE3F80A2
383E0E00123BA4138E1239A213CEA31238A213EE136EA4133E12FEA211177F9614>I<EA
1FF0EA7FFCEA783CEA701CEAE00EAFEA701CEA783CEA7FFCEA1FF00F177E9614>I<EAFF
F013FCEA381E130E1307A5130E131EEA3FFC13F0EA3800A812FEA210177F9614>I<EAFF
E013F8EA383C131C7FA45B133CEA3FF85BEA38387FA51480EB1DC0A238FE0F80EB070012
177F9614>82 D<EA0FCCEA1FFCEA307CEA603CEAE01CA313001270127EEA3FE0EA0FF0EA
01F8EA001C131E130E126012E0A2EAF01CEAF838EAFFF0EAC7E00F177E9614>I<387FFF
80B5FCEAE1C3A43801C000AFEA0FF8A211177F9614>I<38FE0FE0A238380380B0381C07
00A2EA0E0EEA07FCEA01F01317809614>I<38FC1F80A238700700A7EA31C6EA33E6EA3B
EE136EA5EA1B6CA2EA1A2CEA1E3CA311177F9614>87 D<EAFFE0A2EAE000B3A7EAFFE0A2
0B1D799914>91 D<12C07EA21270A27EA27EA27EA27EA2EA0380A3EA01C0A2EA00E0A213
70A21338A2131CA2130EA213060F1D7E9914>I<EAFFE0A21200B3A712FFA20B1D7F9914>
I<EAFFFEA30F037E7E14>95 D<1208121812301260A212C0A312F012F812781230050C79
9914>I<EA1FC0EA7FF0EA7078EA2018EA001CA2EA07FC121FEA3C1C127012E0A3EA707C
383FFF80EA0F8F11107E8F14>I<12FCA2121CA513F8EA1DFEEA1F07EA1E03001C1380EB
01C0A6EB0380001E1300EA1F0EEA1DFCEA0CF81217809614>I<EA03F8EA0FFEEA1C0EEA
3804EA7000126012E0A412601270EA380EEA1C1EEA0FFCEA03F00F107E8F14>I<137EA2
130EA5EA07CEEA0FFEEA1C3EEA301EEA700E12E0A61270EA301EEA383E381FEFC0EA07CF
12177F9614>I<EA07E0EA0FF0EA1C38EA301CEA700CEAE00EA2EAFFFEA2EAE000126012
70EA380EEA1C1EEA0FFCEA03F00F107E8F14>I<13FCEA01FEEA038EEA07041300A3EA7F
FE12FFEA0700ACEAFFF8A20F177F9614>I<EA07CF381FFF80EA383B38301800EA701CA3
EA3018EA3838EA3FF0EA37C00070C7FCA2EA3FF86C7E487EEA700F38E00380A438700700
EA3C1EEA1FFCEA07F011197F8F14>I<12FCA2121CA51378EA1DFEEA1F86EA1E07121CAA
38FF8FE0A21317809614>I<1206120FA21206C7FCA4B4FCA21207ACEAFFF8A20D187C97
14>I<12FCA2121CA5EBFF80A2EB1C005B5B5BEA1DC0EA1FE0A2EA1E70EA1C38133C131C
7F38FF1F80A21117809614>107 D<EAFF80A21203B3EAFFFEA20F177E9614>I<EAFB8EEA
FFDF383CF380A2EA38E3AA38FEFBE013791310808F14>I<EAFC78EAFDFEEA1F86EA1E07
121CAA38FF8FE0A21310808F14>I<EA07C0EA1FF0EA3C78EA701CA2EAE00EA6EA701CEA
783CEA3C78EA1FF0EA07C00F107E8F14>I<EAFCF8EAFDFEEA1F07EA1E03001C1380EB01
C0A6EB0380001E1300EA1F0EEA1DFCEA1CF890C7FCA6B47EA21218808F14>I<EA03E7EA
0FF7EA1C1FEA300F1270487EA6EA700F1230EA1C3FEA0FF7EA07C7EA0007A6EB3FE0A213
187F8F14>I<EAFE1FEB7F80EA0EE3380F810090C7FCA2120EA8EAFFF0A211107F8F14>I<
EA0FD8EA3FF8EA603812C0A2EAF000EA7F80EA3FF0EA07F8EA001CEA600612E012F0EAF8
1CEAFFF8EACFE00F107E8F14>I<1206120EA4EA7FFC12FFEA0E00A8130EA3131CEA07F8
EA01F00F157F9414>I<EAFC3FA2EA1C07AB131F380FFFE0EA03E71310808F14>I<38FE3F
80A2383C1E00EA1C1CA36C5AA3EA0630EA0770A36C5AA311107F8F14>I<38FE3F80A238
700700EA380EA3EA39CEA3EA1B6C121AA3EA1E7CA2EA0E3811107F8F14>I<EA7E3FA2EA
1E3CEA0E78EA07705B12036C5A12037FEA0770EA0E781338487E38FE3F80A211107F8F14
>I<38FE3F80A2381C0E005BA2120E5BA212071330A2EA0370A25B1201A25BA3485A1273
0077C7FC127E123C11187F8F14>I<EA3FFF5AEA700E131C1338EA007013E0EA01C0EA03
80EA0700120EEA1C0712381270B5FCA210107F8F14>I<12E0B3AB031D789914>124
D<EA1C10EA3F38EAE7E0EA41C00D047D9614>126 D E /Ff 39 122
df<126012F0A212701210A21220A21240A2040A7D830A>44 D<126012F0A2126004047D
830A>46 D<1206120E12FE120EB1EAFFE00B157D9412>49 D<EA0F80EA30E0EA4070EA80
30EAC03812E0124012001370A2136013C0EA0180EA03001206EA0C081208EA1018EA3FF0
127F12FF0D157E9412>I<EA0FE0EA3030EA6018EA701CA21200131813381360EA07E0EA
00301318130C130EA212E0A2EAC00CEA4018EA3030EA0FE00F157F9412>I<1240EA7FFE
13FC13F8EAC008EA80101320EA00401380A2EA01005AA212021206A2120EA512040F167E
9512>55 D<EA07E0EA1830EA2018EA600CA21270EA7818EA3E10EA1F60EA07C0EA0FF0EA
18F8EA607C131EEAC00E1306A21304EA600CEA3830EA0FE00F157F9412>I<EAFFFE381C
0380EB00E014601470A414E0EB01C0381FFF8014C0381C00E0147014301438A4147014E0
EB01C0B5120015177F9619>66 D<EBFC1038038330380E00B04813704813301230007013
10126012E01400A51410126012700030132012386C13406C138038038300EA00FC14177E
9619>I<B5FC381C01C0EB00E0143014381418141C140C140EA7140C141CA21438143014
60EB01C0B5120017177F961B>I<EB7E0838038198380600584813384813185A00701308
A25A1400A4EB03FEEB00381270A212307E7E7E380380D838007F0817177E961C>71
D<38FF80FE381C0078146014401480EB0100130613085B13381378139CEA1D0E121EEA1C
07EB0380EB01C0A2EB00E014701478147C38FF80FF18177F961B>75
D<EAFFC0001CC7FCAD1420A31460A2144014C01303B5FC13177F9616>I<00FEEB03F800
1E14C000171305A338138009A23811C011A33810E021A2EB7041A3EB3881A2EB1D01A213
0EA2123839FE040FF81D177F9620>I<00FC13FE001E1338001F13101217EA1380EA11C0
A2EA10E013701338A2131C130E130F1307EB0390EB01D0A2EB00F014701430123800FE13
1017177F961A>I<13FCEA0303380E01C0381C00E04813700030133000701338A248131C
A700601318007013380030133038387870381C84E0380E85C0380383003800FE04130213
03148CEB01F8A2EB00F0161D7E961B>81 D<EA0FC4EA302CEA601CEA400CEAC004A3EAE0
001270127FEA3FE0EA0FF8EA01FCEA001C130E13061280A3EAC004EAE008EAD810EA87E0
0F177E9614>83 D<38FF80FE381C00381410B06C132012066C13403801818038007E0017
177F961A>85 D<EA3FC0EA70601330EA20381200EA03F8EA1E3812301270EAE039A21379
EA70FFEA1F1E100E7F8D12>97 D<12F81238A8EA39F0EA3E0CEA380613077F1480A41400
5B1306EA361CEA21F011177F9614>I<EA07F0EA18381230EA7010EA600012E0A41260EA
70081230EA1830EA07C00D0E7F8D10>I<133E130EA8EA07CEEA1C3EEA300E1270126012
E0A412601270EA301EEA182E3807CF8011177F9614>I<EA0FC0EA1860EA3030EA7038EA
E018EAFFF8EAE000A31260EA7008EA3010EA1830EA07C00D0E7F8D10>I<EA03E0EA0670
120EEA1C201300A5EAFF80EA1C00ACEA7F800C1780960B>I<EA0F9EEA18E3EA3060EA70
70A3EA3060EA18C0EA2F80EA20001260EA3FE013F813FCEA600EEAC006A3EA600CEA3838
EA0FE010157F8D12>I<12301278A212301200A512F81238AC12FE07177F960A>105
D<12F81238A8133E13381330134013801239EA3FC0EA39E0123813F01378133CA2EAFE7F
10177F9613>107 D<12F81238B3A312FE07177F960A>I<38F8F83E383B1CC7393C0F0380
EA380EAA39FE3F8FE01B0E7F8D1E>I<EAF8F8EA3B1CEA3C0E1238AA38FE3F80110E7F8D
14>I<EA07C0EA1830EA3018EA600CA2EAE00EA5EA701CEA3018EA1830EA07C00F0E7F8D
12>I<EAF9F0EA3E1CEA380613077F1480A414005B130EEA3E1CEA39F00038C7FCA512FE
11147F8D14>I<EAF9E0EA3A70123CEA38201300A9B4FC0C0E7F8D0E>114
D<EA1F40EA60C0EAC040A2EAE000B4FCEA7F80EA1FC0EA01E0EA8060A212C0EAE0C0EA9F
000B0E7F8D0E>I<1208A31218A21238EAFFC0EA3800A71340A4EA1C80EA0F000A147F93
0E>I<EAF83EEA380EAA131EEA1C2E3807CF80110E7F8D14>I<EAFE1FEA380EEA3C0CEA1C
08A2EA0E10A2EA0720A213E0EA03C0A2EA0180A2100E7F8D13>I<38FEFE7C3838383814
10133C001C1320134C381E4E60380ECE401387000713801303A200031300EA0201160E7F
8D19>I<EAFE1FEA380EEA3C0CEA1C08A2EA0E10A2EA0720A213E0EA03C0A2EA0180A213
00A212E2A212A4127810147F8D13>121 D E /Fg 2 122 df<120CA2EACCC012EDEA7F80
EA0C00EA7F80EAEDC012CCEA0C00A20A0B7D8B10>3 D<1218A512FFA21218AF08167D90
0E>121 D E /Fh 56 122 df<903801F03C9038071C47010C13C7EC19C690381C018014
0313181338A2EC0700A20003B512F03900700700A3140EA213E0A35CA2EA01C0A35CA2EA
0380A21430EB0070A248136038C630E038E638C038CC3180D8781EC7FC2025819C19>11
D<14FE90380301801306EB0C03EB1C0191C7FC13181338A43803FFFE3800700EA35CA213
E0A25CA3EA01C01472A438038034141891C7FC90C8FCA25A12C612E65A12781925819C17
>I<1218123CA31204A21208A21210122012401280060C779C0D>39
D<12181238127812381208A21210A212201240A21280050C7D830D>44
D<EAFFC0A30A037D890F>I<14021406A2140CA214181430A21460A214C0A2EB0180A2EB
03001306A25BA25BA25BA25B5BA2485AA248C7FCA212065AA25AA25AA25AA25A5A17297F
9E15>47 D<133EEBE180380181C0EA03005A1206000E13E0120C001C13C0A2EA18011238
A338700380A43860070012E01306130EA2130C5BEA60385BEA30C0001FC7FC131D7C9B15
>I<1304130C131813381378EA07B8EA0070A413E0A4EA01C0A4EA0380A4EA0700A45AEA
FFF00E1C7B9B15>I<133EEB4180EB80C0EA0100000213E0EA0440A21208A3381081C0A2
38110380000E1300EA00065B5B136013800003C7FC12044813404813805AEB0100EA7F07
EA43FEEA81FCEA8078131D7D9B15>I<131FEB60C013803801006012021340000413E0A3
EB81C0EA030138000380EB070013FC131C1306A21307A41270EAE00E12805BEA40185BEA
20E0EA1F80131D7D9B15>I<EB018014C0EB0380A314005BA21306130E130C131C1318A2
5BA25B134013C6EA018E130E1202EA061C120C1218123FEA40F838803F8038003800A25B
A45B136012247E9B15>I<133E13E138018180380300C01206120E120C121CA213011238
A31303001813801307EA080B380C3300EA03C7EA0007130E130C131C1318EAE0305BEA80
C0EAC180003EC7FC121D7C9B15>57 D<1206120FA212061200AA1230127812F012600812
7C910D>I<1418A21438A21478A214B8EB0138A2EB023C141C1304130C13081310A21320
A2EB7FFCEBC01C1380EA0100141E0002130EA25A120C001C131EB4EBFFC01A1D7E9C1F>
65 D<903803F02090381E0C6090383002E09038E003C03801C001EA038048C7FC000E14
80121E121C123C15005AA35AA41404A35C12705C6C5B00185B6C485AD80706C7FCEA01F8
1B1E7A9C1E>67 D<48B5FC39003C03C090383800E0A21570A24913781538A215785BA448
4813F0A315E03803800115C0140315803907000700140E5C5C000E13E0B512801D1C7E9B
1F>I<48B512F038003C00013813301520A35BA214081500495AA21430EBFFF03801C020
A439038040801400A2EC0100EA07005C14021406000E133CB512FC1C1C7E9B1C>I<48B5
12F038003C00013813301520A35BA214081500495AA21430EBFFF03801C020A448485A91
C7FCA348C8FCA45AEAFFF01C1C7E9B1B>I<903803F02090381E0C6090383002E09038E0
03C03801C001EA038048C7FC000E1480121E121C123C15005AA35AA2903801FF80903800
1E00141CA400705BA27E001813786C139038070710D801F8C7FC1B1E7A9C20>I<EA03FF
EA00781370A413E0A4EA01C0A4EA0380A4EA0700A4120EA4121EEAFFC0101C7D9B10>73
D<EB3FF8EB03C01480A4EB0700A4130EA45BA45BA4EA607012E0EAC060EA80E0EA81C0EA
4380003EC7FC151D7C9B16>I<3801FFC038003C001338A45BA45BA4485AA438038002A3
1404EA0700140C14181438000E13F0B5FC171C7E9B1A>76 D<D801FEEB01FED8003E14E0
012EEB03C01505A21509014EEB0B801513152313470187EB4700A21587EC0107D8010713
0E14021404A20002495AEB0388149014A000045C14C0A2000C1380001CEB007839FF8307
FF271C7E9B25>I<D801FCEBFF80D8001CEB1C00012E13181510A2132701475B13431480
A2903881C040A3EB80E0D801005B1470A300020139C7FCA3141D48131E140EA2120C001C
1304EAFF80211C7E9B1F>I<EB07F0EB1C1CEB700E497E3901C00380EA0380EA0700000E
14C0121E121C123CA25AA348EB0780A3EC0F00A2140E141E5C007013385C00785B383801
C06C485AD80E0EC7FCEA03F81A1E7A9C20>I<3801FFFE39003C038090383801C0EC00E0
A3EB7001A315C0EBE0031580EC0700141C3801FFF001C0C7FCA3485AA448C8FCA45AEAFF
E01B1C7E9B1C>I<3801FFFE39003C078090383801C015E01400A2EB7001A3EC03C001E0
1380EC0700141CEBFFE03801C03080141CA2EA0380A43807003C1520A348144039FFE01E
80C7EA0F001B1D7E9B1E>82 D<EB0F84EB304CEB403CEB8018EA01005AA200061310A214
001207A2EA03E013FC6CB4FC38007F80EB07C01301A21300A21220A238600180A2EB0300
1302EAF004EACC18EA83E0161E7D9C17>I<001FB512C0381C070138300E000020148012
6012405B1280A2000014005BA45BA45BA4485AA41203EA7FFE1A1C799B1E>I<3AFF83FF
07F03A3C007001C00038158002F01300A290380170025D13025D13045D13085D13100130
5B1320D81C405BA2D98071C7FCA2381D0072A2001E1374A2001C1338A200181330142012
10241D779B29>87 D<3901FF81FE39003E0078011C136015C0011E138090380E0100EB0F
026D5A5C1490EB03A014E06D5AA28013021304497EEB10701320EB603813C0EB803C3801
001C12020006131E121EB4EB7FC01F1C7E9B1F>I<39FFC00FE0391E000380000EEB0200
5C000F130C6C13086D5A00035B5CEBC0C000015B01C1C7FC13E2EA00E413EC13F81370A2
5BA4485AA4485AEA3FF81B1C789B1F>I<EA01E3EA0717EA0C0F1218EA380E12301270A2
EAE01CA41339A3EA6079EA319AEA1E0C10127C9115>97 D<123F1207A2120EA45AA4EA39
E0EA3A18EA3C0C12381270130EA3EAE01CA31318133813301360EA60C0EA3180EA1E000F
1D7C9C13>I<13F8EA0304120EEA1C0EEA181CEA30001270A25AA51304EA60081310EA30
60EA0F800F127C9113>I<EB07E01300A2EB01C0A4EB0380A43801E700EA0717EA0C0F12
18EA380E12301270A2485AA41339A3EA6079EA319AEA1E0C131D7C9C15>I<13F8EA0704
120CEA1802EA38041230EA7008EA7FF0EAE000A5EA60041308EA30101360EA0F800F127C
9113>I<EB03C0EB0670130CEB1C601400A25BA53803FF8038007000A55BA5485AA5485A
A390C7FCA25A12C612E65A12781425819C0D>I<EB78C0EA01C5EA03031206000E138012
0C121CA238380700A4130EA3EA181EEA0C7CEA079CEA001CA25BA2EAC030EAE070EAC1C0
007FC7FC121A7E9113>I<EA0FC01201A2485AA448C7FCA4EA0E3E13C3380F0380120E12
1E121CA338380700A3130E00701340A2131C1480EAE00C38600700121D7E9C15>I<EA01
801203EA0100C7FCA7121C12261247A2128EA2120E5AA35AA21271A31272A2123C091C7C
9B0D>I<1303130713031300A71378138CEA010C1202131C12041200A21338A41370A413
E0A4EA01C0A2EAC180EAE30012C612781024819B0D>I<EA0FC01201A2485AA448C7FCA4
380E07801308EB11C01321381C4180EB8000001DC7FC121EEA3FC0EA38E01370A2EA7071
A31372EAE032EA601C121D7E9C13>I<EA1F801203A2EA0700A4120EA45AA45AA45AA412
E2A312E412641238091D7D9C0B>I<391C1E078039266318C0394683A0E0384703C0008E
1380A2120EA2391C0701C0A3EC0380D8380E1388A2EC0708151039701C032039300C01C0
1D127C9122>I<EA383EEA4CC3384D0380124E129E129C121CA238380700A3130E007013
40A2131C1480EAE00C3860070012127C9117>I<13F8EA030CEA0E06487E121812300070
1380A238E00700A3130EA25BEA60185BEA30E0EA0F8011127C9115>I<380387803804C8
60EBD03013E0EA09C014381201A238038070A31460380700E014C0EB0180EB8300EA0E86
137890C7FCA25AA45AB4FC151A809115>I<EA01E1EA0713EA0C0F1218EA380E12301270
A2EAE01CA41338A3EA6078EA31F0EA1E701200A213E0A4EA01C0EA0FF8101A7C9113>I<
EA1C3CEA2642EA4687EA4707EA8E061300120EA25AA45AA45A123010127C9112>I<EA01
F0EA0608120C131CEA1818EA1C00121F13C0EA0FF01207EA00781338EA603012E012C0EA
8060EA60C0EA1F000E127D9111>I<12035AA3120EA4EAFFE0EA1C00A35AA45AA4EAE080
A2EAE100A2126612380B1A7C990E>I<381C0180EA2E03124EA2388E0700A2121CA2EA38
0EA438301C80A3EA383C38184D00EA0F8611127C9116>I<EA1C06EA2E0EEA4E06A2EA8E
02A2121CA2EA3804A313081230A21310EA3820EA1840EA0F800F127C9113>I<38038780
380CC840380870E012103820E0C014001200A2485AA4EA03811263EAE38212C5EA8584EA
787813127E9113>120 D<381C0180EA2E03124EA2388E0700A2121CA2EA380EA4EA301C
A3EA383CEA1878EA0FB8EA003813301370EAE0605BEA81800043C7FC123C111A7C9114>
I E /Fi 83 125 df<EB7E1F3901C1B180390303E3C0000713C3000EEBC180903801C000
A6B512FC380E01C0B0387F87FC1A1D809C18>11 D<137E3801C180EA0301380703C0120E
EB018090C7FCA5B512C0EA0E01B0387F87F8151D809C17>I<EB7FC0EA01C1EA03031207
EA0E01A7B5FCEA0E01B0387FCFF8151D809C17>I<90383F07E03901C09C18380380F0D8
0701133C000E13E00100131892C7FCA5B612FC390E00E01CB03A7FC7FCFF80211D809C23
>I<12E0A212F01238121C120E120207077C9C15>18 D<126012F0A71260AD1200A51260
12F0A21260041E7C9D0C>33 D<EA6060EAF0F0EAF8F8EA6868EA0808A3EA1010A2EA2020
EA4040EA80800D0C7F9C15>I<126012F012F812681208A31210A2122012401280050C7C
9C0C>39 D<1380EA0100120212065AA25AA25AA35AA412E0AC1260A47EA37EA27EA27E12
027EEA0080092A7C9E10>I<7E12407E12307EA27EA27EA37EA41380AC1300A41206A35A
A25AA25A12205A5A092A7E9E10>I<1306ADB612E0A2D80006C7FCAD1B1C7E9720>43
D<126012F0A212701210A41220A212401280040C7C830C>I<EAFFE0A20B0280890E>I<12
6012F0A2126004047C830C>I<130113031306A3130CA31318A31330A31360A213C0A3EA
0180A3EA0300A31206A25AA35AA35AA35AA35AA210297E9E15>I<EA03C0EA0C30EA1818
EA300CA2EA700EEA6006A2EAE007ADEA6006A2EA700EEA300CA2EA1818EA0C30EA07E010
1D7E9B15>I<5A1207123F12C71207B3A5EAFFF80D1C7C9B15>I<EA07C0EA1830EA201CEA
400C130EEAF00F12F81307A21270EA000F130EA2131CA213381370136013C0EA0180EA03
00EA0601120C1218EA1002EA3FFE127F12FF101C7E9B15>I<EA07E0EA1830EA201CA2EA
781E130E131E1238EA001CA2131813301360EA07C0EA0030131CA2130E130FA2127012F8
A3EAF00EEA401C1220EA1830EA07C0101D7E9B15>I<130CA2131C133CA2135C13DC139C
EA011C120312021204120C1208121012301220124012C0B512C038001C00A73801FFC012
1C7F9B15>I<EA300CEA3FF813F013C0EA2000A6EA23E0EA2C30EA3018131CEA200E1200
130FA3126012F0A3EA800EEA401E131CEA2038EA1870EA07C0101D7E9B15>I<13F0EA03
0CEA0404EA0C0EEA181E1230130CEA7000A21260EAE3E0EAE430EAE818EAF00C130EEAE0
061307A51260A2EA7006EA300E130CEA1818EA0C30EA03E0101D7E9B15>I<1240387FFF
801400A2EA4002485AA25B485AA25B1360134013C0A212015BA21203A41207A66CC7FC11
1D7E9B15>I<EA03E0EA0C30EA1008EA200C13061260A21270A2EA7C0CEA3E18EA3FB0EA
1FE0EA07F013F8EA18FCEA307EEA601E130FEAC0071303A4EA60021304EA300CEA1C10EA
07E0101D7E9B15>I<EA03C0EA0C30EA1818EA300C1270EA600EEAE006A21307A51260EA
700F1230EA1817EA0C27EA07C7EA0006A2130EEA300C127813181270EA2030EA10C0EA0F
80101D7E9B15>I<126012F0A212601200AA126012F0A2126004127C910C>I<126012F0A2
12601200AA126012F0A212701210A41220A212401280041A7C910C>I<1306A3130FA3EB
1780A2EB37C01323A2EB43E01341A2EB80F0A338010078A2EBFFF83802003CA3487FA200
0C131F80001E5BB4EBFFF01C1D7F9C1F>65 D<B512C0380F00788080140E140FA4140E14
1E5C14F8EBFFF0EB003C8080801580A5EC0F00A2141E1478B512E0191C7F9B1D>I<9038
1F8080EBE0613801801938070007000E13035A14015A00781300A2127000F01400A80070
14801278A212386CEB0100A26C13026C5B380180083800E030EB1FC0191E7E9C1E>I<B5
12C0380F00F0143C140E80A2EC038015C01401A215E0A815C0A21403158014071500140E
5C1470B512C01B1C7E9B20>I<B512FC380F003C140C1404A214061402A213011400A35B
13FF13037FA3140113001402A31406A2140C143CB512FC181C7E9B1C>I<B512F8380F00
7814181408A2140C1404A213011400A35B13FF13037FA490C7FCA8EAFFF8161C7E9B1B>
I<90381F8080EBE0613801801938070007000E13035A14015A00781300A2127000F01400
A6ECFFF0EC0F80007013071278A212387EA27E6C130B380180113800E06090381F80001C
1E7E9C21>I<39FFF0FFF0390F000F00AC90B5FCEB000FAD39FFF0FFF01C1C7F9B1F>I<EA
FFF0EA0F00B3A8EAFFF00C1C7F9B0F>I<3807FF8038007C00133CB3127012F8A21338EA
7078EA4070EA30E0EA0F80111D7F9B15>I<39FFF01FE0390F000780EC060014045C5C5C
5C5C49C7FC13021306130FEB17801327EB43C0EB81E013016D7E1478A280143E141E8015
8015C039FFF03FF01C1C7F9B20>I<EAFFF8EA0F8090C7FCB01408A31418A21410143014
70EB01F0B5FC151C7E9B1A>I<B46CEBFF80000FECF800A2390BC00178A33809E002A238
08F004A3EB7808A3EB3C10A3EB1E20A3EB0F40A2EB0780A3EB0300121C3AFF8307FF8021
1C7E9B26>I<B4EB1FF0390F8003809038C00100120BEA09E0EA08F0A21378133C133E13
1E130F14811307EB03C1EB01E114F113001479147D143D141FA2808080121CB46C7E1C1C
7F9B1F>I<EB3F80EBE0E03803803848487E000E7F487F003C148000381303007814C0A2
0070130100F014E0A8007014C000781303A200381480003C1307001C14006C130E6C5B6C
6C5A3800E0E0EB3F801B1E7E9C20>I<B51280380F00E01478143C141C141EA5141C143C
147814E0EBFF8090C7FCACEAFFF0171C7E9B1C>I<B5FC380F01E0EB007880141C141EA4
141C143C5CEB01E001FFC7FCEB01E0EB0070147880A61510A2141CA239FFF00E20C7EA03
C01C1D7E9B1F>82 D<3807E080EA1C19EA30051303EA600112E01300A36C13007E127CEA
7FC0EA3FF8EA1FFEEA07FFC61380130FEB07C0130313011280A300C01380A238E00300EA
D002EACC0CEA83F8121E7E9C17>I<007FB512C038700F010060130000401440A200C014
201280A300001400B1497E3803FFFC1B1C7F9B1E>I<39FFF01FF0390F000380EC0100B3
A26C1302138000035BEA01C03800E018EB7060EB0F801C1D7F9B1F>I<39FFE00FF0391F
0003C0EC01806C1400A238078002A213C000035BA2EBE00C00011308A26C6C5AA213F8EB
7820A26D5AA36D5AA2131F6DC7FCA21306A31C1D7F9B1F>I<3AFFE1FFC0FF3A1F003E00
3C001E013C13186C6D1310A32607801F1320A33A03C0278040A33A01E043C080A33A00F0
81E100A39038F900F3017913F2A2017E137E013E137CA2013C133C011C1338A201181318
01081310281D7F9B2B>I<39FFF07FC0390FC01E003807800CEBC00800035B6C6C5A13F0
00005BEB7880137C013DC7FC133E7F7F80A2EB13C0EB23E01321EB40F0497E1478380100
7C00027F141E0006131F001F148039FF807FF01C1C7F9B1F>I<39FFF003FC390F8001E0
0007EB00C06D13800003EB01006D5A000113026C6C5A13F8EB7808EB7C18EB3C10EB3E20
131F6D5A14C06D5AABEB7FF81E1C809B1F>I<12FEA212C0B3B312FEA207297C9E0C>91
D<EA0808EA1010EA2020EA4040A2EA8080A3EAB0B0EAF8F8EA7878EA30300D0C7A9C15>
I<12FEA21206B3B312FEA20729809E0C>I<1208121012201240A21280A312B012F81278
1230050C7D9C0C>96 D<EA1FC0EA3070EA78387F12301200A2EA01FCEA0F1C1238127012
6000E01340A3EA603C38304E80381F870012127E9115>I<12FC121CAA137CEA1D87381E
0180381C00C014E014601470A6146014E014C0381E018038190700EA10FC141D7F9C17>
I<EA03F8EA0C0CEA181E1230EA700CEA600012E0A61260EA70021230EA1804EA0C18EA03
E00F127F9112>I<EB1F801303AAEA03F3EA0E0BEA1807EA30031270126012E0A6126012
701230EA1807EA0E1B3803E3F0141D7F9C17>I<EA07E0EA0C30EA1818EA300CEA700EEA
600612E0EAFFFEEAE000A41260EA70021230EA1804EA0C18EA03E00F127F9112>I<13F8
EA018CEA071E1206EA0E0C1300A6EAFFE0EA0E00B0EA7FE00F1D809C0D>I<EB03803807
C4C0EA1C783838388038301800EA701CA4EA3018EA38386C5AEA27C00020C7FCA21230EA
3FF86CB4FC1480EA2003386001C0EAC000A33860018038300300EA1C0EEA07F8121C7F92
15>I<12FC121CAA137C1387EA1D03001E1380121CAD38FF9FF0141D7F9C17>I<1218123C
A21218C7FCA712FC121CB0EAFF80091D7F9C0C>I<13C0EA01E0A2EA00C01300A7EA07E0
1200B3A21260EAF0C012F1EA6180EA3E000B25839C0D>I<12FC121CAAEB0FE0EB0780EB
06005B13105B5B13E0121DEA1E70EA1C781338133C131C7F130F148038FF9FE0131D7F9C
16>I<12FC121CB3A9EAFF80091D7F9C0C>I<39FC7E07E0391C838838391D019018001EEB
E01C001C13C0AD3AFF8FF8FF8021127F9124>I<EAFC7CEA1C87EA1D03001E1380121CAD
38FF9FF014127F9117>I<EA03F0EA0E1CEA1806487E00701380EA600100E013C0A60060
1380EA700300301300EA1806EA0E1CEA03F012127F9115>I<EAFC7CEA1D87381E018000
1C13C0EB00E0A21470A614E0A2EB01C0001E1380381D0700EA1CFC90C7FCA7B47E141A7F
9117>I<3803E080EA0E19EA1805EA3807EA7003A212E0A61270A2EA38071218EA0E1BEA
03E3EA0003A7EB1FF0141A7F9116>I<EAFCE0EA1D38EA1E78A2EA1C301300ACEAFFC00D
127F9110>I<EA1F90EA2070EA4030EAC010A212E0EAF800EA7F80EA3FE0EA0FF0EA00F8
EA8038131812C0A2EAE010EAD060EA8FC00D127F9110>I<1204A4120CA2121C123CEAFF
E0EA1C00A91310A5120CEA0E20EA03C00C1A7F9910>I<38FC1F80EA1C03AD1307120CEA
0E1B3803E3F014127F9117>I<38FF07E0383C0380381C0100A2EA0E02A2EA0F06EA0704
A2EA0388A213C8EA01D0A2EA00E0A3134013127F9116>I<39FF3FC7E0393C0703C0001C
EB01801500130B000E1382A21311000713C4A213203803A0E8A2EBC06800011370A2EB80
30000013201B127F911E>I<38FF0FE0381E0700EA1C06EA0E046C5AEA039013B0EA01E0
12007F12011338EA021C1204EA0C0E487E003C138038FE1FF014127F9116>I<38FF07E0
383C0380381C0100A2EA0E02A2EA0F06EA0704A2EA0388A213C8EA01D0A2EA00E0A31340
A25BA212F000F1C7FC12F312661238131A7F9116>I<EA7FFCEA70381260EA407013F013
E0EA41C012031380EA0700EA0F04120E121CEA3C0CEA380812701338EAFFF80E127F9112
>I<B512F01401808B15>I<B812802901808B2A>I E /Fj 45 122
df<1403EC0780A2140F1500A25C141E143E143CA2147C1478A214F85C13015CA213035C
A213075C130F91C7FCA25B131E133E133CA2137C1378A213F85B12015BA212035BA21207
5B120F90C8FCA25A121EA2123E123C127C1278A212F85AA21260193C7CAC22>47
D<130E131E137EEA07FE12FFA212F81200B3ABB512FEA317277BA622>49
D<EBFF80000713F04813FC381E03FE393800FF80007C133F00FE14C06C131F15E0140FA2
127E003C131FC7FC15C0A2EC3F801500147E5C5C495A495AEB078049C7FC131E4913E013
705B3901C001C0EA0380EA0600000FB5FC5A5A5AB61280A31B277DA622>I<EB7F803803
FFF04813FC380F81FE381F007FEA3F80EC3F80A3121F1300C7EA7F00A2147E5C495AEB07
F0EBFFC0A2EB01F8EB007E801580EC1FC0A215E0A2123C127EB4FCA215C0143F48148000
7CEB7F00383F01FE6CB45A000713F0C613801B277DA622>I<140FA25C5C5C5C5BA2EB03
BFEB073F130E131C133C1338137013E0EA01C0EA038012071300120E5A5A5A12F0B612F8
A3C7EA7F00A890381FFFF8A31D277EA622>I<00181303381F801FEBFFFE5C5C5C14C091
C7FC001CC8FCA7EB7FC0381DFFF8381F80FC381E003F1208C7EA1F8015C0A215E0A21218
127C12FEA315C05A0078EB3F80A26CEB7F00381F01FE6CB45A000313F0C613801B277DA6
22>I<EB07F8EB3FFE90B5FC3901FC07803903F00FC03807C01FEA0F80121F130048EB0F
8091C7FC127EA3EAFE02EB1FF0EB3FFCEB603EEB801F00FF14809038000FC0A24814E0A4
127EA4123E003F14C07EEC1F80D80F8013003807E07E6CB45A6C5B38003FC01B277DA622
>I<1238123E003FB512F0A34814E015C0158015003870000EA25C485B5C5CC6485AA249
5A130791C7FC5B5B131E133EA2137E137CA213FCA41201A76C5A13701C297CA822>I<12
1C127FA2EAFF80A3EA7F00A2121CC7FCA9121C127FA2EAFF80A3EA7F00A2121C091B7B9A
13>58 D<EC0780A24A7EA34A7EA24A7EA3EC77F8A2ECF7FC14E3A2903801C1FEA201037F
1480A249486C7EA24980010E133FA2496D7EA2013FB57EA39039700007F8A201F0804913
03000181491301A2000381D8FFFE013F13FCA32E297EA833>65 D<B612F815FF16C03A03
F8001FE0ED0FF0ED07F8150316FCA21501A3150316F8A2ED07F0150FED1FC0EDFF8090B5
EAFE00EDFFC09039F8000FF0ED03F8ED01FC16FE1500A216FFA616FE1501ED03FC1507ED
1FF8B712E016C0EDFE0028297DA830>I<91387FE003903907FFFC07011FEBFF0F90397F
F00F9F9039FF0001FFD801FC7F4848147F4848143F4848141F485A160F485A1607127FA2
90C9FC5AA97E7F1607123FA26C7E160E6C7E6C6C141C6C6C143C6C6C14786CB4EB01F090
397FF007C0011FB512800107EBFE009038007FF028297CA831>I<B712E0A33903FC001F
ED07F01501A215001670A3913801C0781638A302031300A2140F90B5FCA3EBFC0F1403A2
0201130EA3161C91C7FCA3163C1638167816F815011503151FB712F0A327297EA82C>69
D<B5D8F00FB5FCA3D803FCC7EA3FC0AF90B7FCA301FCC7123FB1B5D8F00FB5FCA330297E
A835>72 D<B512F0A33803FC00B3B1B512F0A314297EA819>I<B512FCA3D803FCC8FCB3
A3ED01C0A415031680A21507A2150FA2151F157F913801FF00B7FCA322297EA828>76
D<D8FFFE92383FFF80A26D5D0003EFE000A2D9BF8014EFA2D99FC0EB01CFA2D98FE0EB03
8FA3D987F0EB070FA2D983F8130EA2D981FC131CA3D980FE1338A2027F1370A291383F80
E0A391381FC1C0A291380FE380A2913807F700A3EC03FEA26E5AA26E5AD8FFFE0203B512
80A2157039297DA840>I<ECFFC0010F13FC90383F807F9039FE001FC0D801F8EB07E048
486D7E48486D7E000F8148486D7EA24848147FA2007F168090C8123FA34816C0AA6C1680
6D147FA2003F1600A26C6C14FEA26C6C495A6C6C495A6C6C495A6C6C495A6C6C495A9026
3FC0FFC7FC90380FFFFC010013C02A297CA833>79 D<B612F815FF16C03A03FC003FE0ED
07F0ED03F816FC150116FEA716FC150316F8ED07F0ED3FE090B61280EDFE0001FCC8FCB0
B512F0A327297EA82E>I<B612E015FE6F7E3A03FC003FE0ED0FF06F7E6F7E150182A65E
4B5A1507ED0FE0ED3FC090B500FEC7FCA29039FC00FF80ED3FC06F7E6F7E6F7EA9170EA2
1503923801FC1CB538F000FEEE7FF8EE0FE02F297EA832>82 D<9038FF80600003EBF0E0
000F13F8381F80FD383F001F003E1307481303A200FC1301A214007EA26C140013C0EA7F
FCEBFFE06C13F86C13FE80000714806C14C0C6FC010F13E0EB007FEC1FF0140F140700E0
1303A46C14E0A26C13076C14C0B4EB0F80EBE03F39E3FFFE0000E15B38C01FF01C297CA8
25>I<007FB71280A39039807F807FD87C00140F00781507A20070150300F016C0A24815
01A5C791C7FCB3A490B612C0A32A287EA72F>I<B53CE07FFFE01FFFC0A32803FC0003FC
C7EA7000A26D6D7E000160A26D6E13016C604B138002801503017F5F4B13C0D93FC0013F
49C7FCA2913AE00E1FE00F011F160E17F09126F01C0F131E010F161C033C13F8902707F8
38075BA2037813FC902703FC70035BA2913AFEE001FEF001015E02FF14FF4B7E6D5EA26E
486D5AA36EC76CC8FCA2023E80021E141EA242297FA845>87 D<3803FF80000F13F0381F
01FC383F80FE147F801580EA1F00C7FCA4EB3FFF3801FC3FEA0FE0EA1F80EA3F00127E5A
A4145F007E13DF393F839FFC381FFE0F3803FC031E1B7E9A21>97
D<EAFFE0A3120FACEBE1FE9038EFFF809038FE07E09038F803F09038F001F89038E000FC
A2157EA2157FA8157EA315FCA29038F001F89038F803F090389C0FE090380FFF80390E01
FC00202A7EA925>I<EB3FF03801FFFC3803F03E380FC07FEA1F80EA3F00A248133E007E
90C7FCA212FEA7127EA2127F6CEB03801380001FEB0700380FE00E3803F83C3801FFF838
003FC0191B7E9A1E>I<EC7FF0A31407ACEB3F873801FFF73807F03F380FC00F381F8007
EA3F00A2127EA312FEA8127EA27EA2381F800F380FC01F3907E07FFF3801FFE738007F87
202A7EA925>I<EB3FC03801FFF03803E07C380F803E001F7F130048EB0F80127E15C0A2
00FE1307A2B6FCA248C8FCA3127EA2127F6CEB01C07E390F8003803907C007003803F01E
3800FFFCEB3FE01A1B7E9A1F>I<EB07F8EB3FFCEB7E3E3801FC7FEA03F813F01207143E
1400A7B512C0A33807F000B3A3387FFF80A3182A7EA915>I<9038FF80F00003EBE3F839
0FC1FE1C391F007C7C48137E003EEB3E10007EEB3F00A6003E133E003F137E6C137C380F
C1F8380BFFE00018138090C8FC1238A2123C383FFFF814FF6C14C06C14E06C14F0121F38
3C0007007CEB01F8481300A4007CEB01F0A2003FEB07E0390FC01F806CB5120038007FF0
1E287E9A22>I<EAFFE0A3120FAC147E9038E1FF809038E30FC001E413E0EBE80701F813
F013F0A213E0B039FFFE3FFFA3202A7DA925>I<1207EA0F80EA1FC0EA3FE0A3EA1FC0EA
0F80EA0700C7FCA7EAFFE0A3120FB3A3EAFFFEA30F2B7EAA12>I<EAFFE0A3120FACEC1F
FCA3EC0780EC0F00141E5C5C14E0EBE3C013E7EBEFE0EBFFF08013F3EBE1FCEBC0FE147F
A2EC3F80EC1FC0EC0FE0A2EC07F039FFFC1FFFA3202A7FA923>107
D<EAFFE0A3120FB3B2EAFFFEA30F2A7EA912>I<26FFC07FEB1FC0903AC1FFC07FF0903A
C307E0C1F8D80FC49038F101FC9039C803F20001D801FE7F01D05BA201E05BB03CFFFE3F
FF8FFFE0A3331B7D9A38>I<38FFC07E9038C1FF809038C30FC0D80FC413E0EBC80701D8
13F013D0A213E0B039FFFE3FFFA3201B7D9A25>I<EB3FE03801FFFC3803F07E390FC01F
80391F800FC0393F0007E0A2007EEB03F0A300FE14F8A8007E14F0A26CEB07E0A2391F80
0FC0390FC01F803907F07F003801FFFC38003FE01D1B7E9A22>I<38FFE1FE9038EFFF80
9038FE0FE0390FF803F09038F001F801E013FC140015FEA2157FA8157E15FEA215FC1401
01F013F89038F807F09038FC0FE09038EFFF809038E1FC0001E0C7FCA9EAFFFEA320277E
9A25>I<38FFC1F0EBC7FCEBC63E380FCC7F13D813D0A2EBF03EEBE000B0B5FCA3181B7F
9A1B>114 D<3803FE30380FFFF0EA3E03EA7800127000F01370A27E00FE1300EAFFE06C
B4FC14C06C13E06C13F0000713F8C6FCEB07FC130000E0137C143C7E14387E6C137038FF
01E038E7FFC000C11300161B7E9A1B>I<13E0A41201A31203A21207120F381FFFE0B5FC
A2380FE000AD1470A73807F0E0000313C03801FF8038007F0014267FA51A>I<39FFE07F
F0A3000F1307B2140FA2000713173903F067FF3801FFC738007F87201B7D9A25>I<3BFF
FC7FFC1FFCA33B0FE00FE001C02607F007EB0380A201F8EBF00700031600EC0FF801FC5C
0001150EEC1FFC2600FE1C5B15FE9039FF387E3C017F1438EC787F6D486C5A16F0ECE01F
011F5CA26D486C5AA2EC800701075CA22E1B7F9A31>119 D<39FFFC1FFEA33907F00380
3803F8079038FC0F003801FE1E00005BEB7F3814F86D5A6D5A130F806D7E130F497EEB3C
FEEB38FFEB787F9038F03F803901E01FC0D803C013E0EB800F39FFF03FFFA3201B7F9A23
>I<39FFFC03FFA3390FF000F0000714E07F0003EB01C0A2EBFC0300011480EBFE070000
140013FFEB7F0EA2149EEB3F9C14FC6D5AA26D5AA36D5AA26D5AA25CA21307003890C7FC
EA7C0FEAFE0E131E131C5BEA74F0EA3FE0EA0F8020277F9A23>I
E /Fk 2 122 df<1202A3EAC218EAF278EA3AE0EA0F80A2EA3AE0EAF278EAC218EA0200
A30D0E7E8E12>3 D<1206A8EAFFF0A2EA0600B30C1D7E9611>121
D E /Fl 22 120 df<127012F812FCA212741204A41208A21210A212201240060F7C840E
>44 D<127012F8A3127005057C840E>46 D<13801203120F12F31203B3A9EA07C0EAFFFE
0F217CA018>49 D<00101380381E0700EA1FFF5B13F8EA17E00010C7FCA6EA11F8EA120C
EA1C07381803801210380001C0A214E0A4127012F0A200E013C01280EA40031480382007
00EA1006EA0C1CEA03F013227EA018>53 D<EA01F0EA060C487EEA1807383803801270A2
38F001C0A314E0A5127013031238EA1805120CEA0619EA03E1380001C0A3EB0380A21230
387807001306EA700CEA20186C5AEA0FC013227EA018>57 D<497EA3497EA3EB05E0A2EB
09F01308A2EB1078A3497EA3497EA2EBC01F497EA248B51280EB0007A20002EB03C0A348
EB01E0A348EB00F0121C003EEB01F839FF800FFF20237EA225>65
D<B512F0380F801E00071307EC0380EC01C0EC00E015F01578A2157C153CA3153EA9153C
A2157C1578A215F015E01401EC03C0EC0700000F131EB512F01F227EA125>68
D<903807F00890383C0C18EBE0023901C001B839038000F848C71278481438121E15185A
A2007C14081278A200F81400A7EC1FFF0078EB00F81578127C123CA27EA27E7E6C6C13B8
6C7E3900E0031890383C0C08903807F00020247DA226>71 D<39FFFC3FFF390FC003F039
078001E0AE90B5FCEB8001AF390FC003F039FFFC3FFF20227EA125>I<3803FFE038001F
007FB3A6127012F8A2130EEAF01EEA401C6C5AEA1870EA07C013237EA119>74
D<D8FFFCEBFF80D80FC0EB7C006C48133015205D5D4AC7FC14025C5C5C5C5C5CEB81C0EB
83E01385EB88F01390EBA078EBC03C13808080A26E7E8114036E7EA26E7E81486C7F3AFF
FC07FF8021227EA126>I<EA1FE0EA3038EA780C130EEA30071200A313FFEA07C7EA1E07
123C1278127000F01308A3130FEA7817383C2390380FC1E015157E9418>97
D<14E0130F13011300ABEA01F8EA0704EA0C02EA1C01EA38001278127012F0A712701278
1238EA1801EA0C0238070CF03801F0FE17237EA21B>100 D<EA01FCEA0707380C038038
1C01C01238007813E0EA700012F0B5FC00F0C7FCA512700078132012386C13406C138038
070300EA00FC13157F9416>I<121C123EA3121CC7FCA8120E127E121E120EB1EAFFC00A
227FA10E>105 D<390E1FC07F3AFE60E183803A1E807201C03A0F003C00E0A2000E1338
AF3AFFE3FF8FFE27157F942A>109 D<380E1F8038FE60C0381E80E0380F0070A2120EAF
38FFE7FF18157F941B>I<EA01FCEA0707380C0180381800C0003813E0481370A200F013
78A700701370007813F0003813E0381C01C0380E038038070700EA01FC15157F9418>I<
EA0E3CEAFE46EA1E8FEA0F0F13061300120EAD120FEAFFF010157F9413>114
D<000E137038FE07F0EA1E00000E1370AD14F0A238060170380382783800FC7F18157F94
1B>117 D<38FF80FE381E00781430000E1320A26C1340A2EB80C000031380A23801C100
A2EA00E2A31374A21338A3131017157F941A>I<39FF8FF87F393E01E03C001CEBC01814
E0000E1410EB0260147000071420EB04301438D803841340EB8818141CD801C81380EBD0
0C140E3900F00F00497EA2EB6006EB400220157F9423>I E /Fm
18 116 df<127812FCA4127806067A8512>46 D<EC01801403A2EC0700A3140EA35CA35C
A45CA35CA3495AA3495AA349C7FCA3130EA35BA45BA35BA35BA3485AA3485AA348C8FCA3
120EA45AA35AA35AA35AA25A19487CB521>I<130813381378EA01F8123FEAFE7812C012
00B3B313FC387FFFF8A2152F7AAE21>49 D<EB3F803801FFE03803C0F83806003C00087F
48131F80003C1480123EA3121EC7FC1500A25C141E5C14385C5CEB038013FFEB00F01438
141E80EC0780A215C0140315E0A21230127812FCA34814C000401307A2006014806CEB0F
006C131E000E5B380780F83801FFF038003F801B307DAE21>51 D<B539807FFFC0A23B07
F00003F8006C486D5AB3A290B6FCA29038E00001B3A3486C497EB539807FFFC0A22A317C
B032>72 D<B51280A23807F0006C5AB3B3A7487EB51280A211317DB017>I<D8FFF0ED7F
F8A200071700D802F815BEA3017CEC013EA26D1402A36D1404A36D6C1308A36D6C1310A3
6D6C1320A26D6C1340A36D6C1380A391387C0100A3EC3E02A36E5AA2EC0F88A3EC07D0A3
EC03E0A300076D5AD80F80157FD8FFF891380FFFF8EC008035317CB03D>77
D<EC3FC0903801C038903807000E011CEB0380496D7E01F0EB00F0484814784848804914
1C0007151E48C87EA2001EED0780A248ED03C0A2007C16E0A200781501A200F816F0AB00
7CED03E0A4003C16C0003E1507001E1680A26CED0F00A26C6C141E6C6C5CA26C6C5C6C6C
5C0138EB01C06D495A0107010EC7FC903801E0789038003FC02C337CB134>79
D<13FE380303C0380C00E00010137080003C133C003E131C141EA21208C7FCA3EB0FFEEB
FC1EEA03E0EA0F80EA1F00123E123C127C481404A3143EA21278007C135E6CEB8F08390F
0307F03903FC03E01E1F7D9E21>97 D<EB1FC0EBF0303801C00C38078002EA0F00000E13
0F001E5B5AA2007C1304007890C7FC12F8A91278127C123C15807E000EEB0100120F3807
80023801C00C3800F030EB1FC0191F7E9E1D>99 D<15F0141FA214011400AFEB0FC0EB70
303801C00C3803800238070001120E001E13005AA2127C1278A212F8A71278A2127C123C
A27E000E13016C1302380380046C6C487E3A00F030FF80EB1FC021327EB125>I<EB3F80
EBE0E0380380383807003C000E7F121E001C7F123C127C00781480140712F8A2B6FC00F8
C8FCA61278127C123C15807E000EEB0100000F13027E3801C00C3800F030EB1FC0191F7E
9E1D>I<120FEA1F80A4EA0F00C7FCABEA0780127FA2120F1207B3A6EA0FC0EAFFF8A20D
307EAF12>105 D<EA078012FFA2120F1207AFEC0FFEA2EC03F015801500140614085C5C
5C5C13811383EB8FC01393EBA1E0EBC1F013801478147C143C143E80801580EC07C01403
15E0390FC007F839FFFC0FFFA220327EB123>107 D<EA078012FFA2120F1207B3B3A7EA
0FC0EAFFFCA20E327EB112>I<380780FE39FF83078090388C03C0390F9001E0EA07A06E
7E13C0A25BB3A2486C487E3AFFFC1FFF80A2211F7E9E25>110 D<EB1FC0EBF0783801C0
1C38070007481480001EEB03C0001C1301003C14E0A248EB00F0A300F814F8A8007814F0
007C1301003C14E0A26CEB03C0A26CEB07803907800F003801C01C3800F078EB1FC01D1F
7E9E21>I<3801FC10380E0330381800F048137048133012E01410A37E6C1300127EEA3F
F06CB4FC6C13C0000313E038003FF0EB01F813006C133CA2141C7EA27E14186C13381430
00CC136038C301C03880FE00161F7E9E1A>115 D E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: a4
%%BeginPaperSize: a4
/setpagedevice where {
pop 1 dict dup /PageSize [ 595 842 ] put setpagedevice
} {
statusdict /a4tray known {
statusdict begin a4tray end
/a4 where { pop a4 } if
} {
/a4 where {
pop a4
} {
statusdict /setpage known {
statusdict begin
595 842 0 setpage
end
} if
} ifelse
} ifelse
} ifelse
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 563 159 a Fm(Monadic)21 b(I/O)h(in)f(Hask)n(ell)g(1.3)490
304 y Fl(Andrew)16 b(D.)g(Gordon)916 286 y Fk(\003)949
304 y Fl(and)g(Kevin)g(Hammond)1423 286 y Fk(y)822 401
y Fl(June)g(5,)g(1995)75 556 y Fj(Abstract)75 647 y Fi(W)m(e)25
b(describ)q(e)h(the)g(design)f(and)g(use)h(of)e(monadic)75
697 y(I/O)e(in)f(Hask)o(ell)g(1.3,)h(the)g(latest)g(revision)g(of)f
(the)75 747 y(lazy)15 b(functional)g(programming)d(language)j(Hask)o
(ell.)75 797 y(Hask)o(ell)c(1.3)g(standardises)i(the)f(monadic)e(I/O)h
(mec)o(h-)75 846 y(anisms)j(no)o(w)h(a)o(v)n(ailable)e(in)i(man)o(y)f
(Hask)o(ell)h(systems.)75 896 y(The)29 b(new)h(facilities)e(allo)o(w)f
(fairly)h(sophisticated)75 946 y(text-based)20 b(application)d
(programs)g(to)h(b)q(e)h(written)75 996 y(p)q(ortably)14
b(in)f(Hask)o(ell.)18 b(The)c(standard)g(pro)o(vides)h(im-)75
1046 y(plemen)o(tors)23 b(with)g(a)g(\015exible)g(framew)o(ork)e(for)i
(ex-)75 1096 y(tending)h(Hask)o(ell)f(to)h(incorp)q(orate)h(new)f
(language)75 1145 y(features.)38 b(Apart)20 b(from)e(the)j(use)g(of)e
(monads,)h(the)75 1195 y(main)15 b(adv)n(ances)i(o)o(v)o(er)f(the)h
(previous)g(standard)h(are:)75 1245 y(c)o(haracter)i(I/O)f(based)g(on)g
(handles)g(\(analogous)f(to)75 1295 y(ANSI)13 b(C)f(\014le)h(p)q(oin)o
(ters\),)g(an)f(error)h(handling)f(mec)o(ha-)75 1345
y(nism,)f(terminal)f(in)o(terrupt)j(handling)f(and)g(a)g(POSIX)75
1394 y(in)o(terface.)28 b(Apart)18 b(from)d(a)i(tutorial)f(description)
i(of)75 1444 y(the)c(new)h(facilities)e(w)o(e)h(include)g(a)f(w)o(ork)o
(ed)h(example:)75 1494 y(a)g(deriv)o(ed)g(monad)e(for)i(com)o(binator)e
(parsing.)75 1631 y Fj(1)67 b(In)n(tro)r(duction)75 1722
y Fi(Hask)o(ell)24 b(1.3)f(impro)o(v)o(es)f(on)i(previous)g(v)o
(ersions)h(of)75 1772 y(Hask)o(ell)g([12)o(])f(b)o(y)h(adopting)g(an)g
(I/O)g(mec)o(hanism)75 1822 y(based)16 b(on)f Fh(monads)h
Fi([19)o(].)21 b(This)15 b(pap)q(er)h(explains)f(the)75
1872 y(structure)j(of)e(this)h(monadic)d(I/O)i(mec)o(hanism,)f(jus-)75
1921 y(ti\014es)f(some)f(of)g(the)i(design)e(decisions,)h(and)g
(explains)75 1971 y(ho)o(w)c(to)g(program)f(with)h(the)h(new)g
(facilities.)16 b(This)10 b(pa-)75 2021 y(p)q(er)16 b(pro)o(vides)g(a)f
(more)g(in-depth)g(treatmen)o(t)h(of)e(I/O)75 2071 y(than)e(is)g(p)q
(ossible)g(in)g(the)h(Hask)o(ell)e(1.3)h(rep)q(ort)h([9)o(])f(and)75
2121 y(library)h(do)q(cumen)o(tation)g([10)o(].)117 2171
y(Previous)24 b(v)o(ersions)h(of)f(Hask)o(ell)g(used)h
Fh(synchr)n(o-)75 2220 y(nise)n(d)17 b(str)n(e)n(ams)e
Fi(or)h Fh(dialo)n(gues)h Fi(for)e(I/O.)h(In)g(practice,)75
2270 y(man)o(y)21 b(Hask)o(ell)i(programmers)e(found)h(it)h(cum)o(b)q
(er-)75 2320 y(some)12 b(to)g(use)i(these)g(constructs)g(directly)m(.)k
(Awkw)o(ard)75 2370 y(pattern)d(matc)o(hing)e(against)h(the)h(input)f
(stream)h(w)o(as)p 75 2404 345 2 v 121 2431 a Fg(\003)139
2443 y Ff(Univ)o(ersit)o(y)5 b(of)j(Cam)o(bridge)d(Computer)h(Lab)q
(oratory)m(,)g(New)75 2482 y(Museums)k(Site,)h(Cam)o(bridge,)e(CB2)j
(3QG,)f(UK.)122 2511 y Fg(y)139 2523 y Ff(Departmen)o(t)17
b(of)i(Computing)f(Science,)i(Univ)o(ersit)o(y)e(of)75
2563 y(Glasgo)o(w,)10 b(17)h(Lilybank)f(Gdns.,)g(Glasgo)o(w,)g(G12)h
(8QQ,)h(UK.)p 977 516 846 2 v 976 868 2 352 v 1002 560
a Fe(main)18 b(~\()h(Str)f(input)g(:)h(~)g(\(Success)e(:)i(_)g(\)\))g
(=)1041 610 y([)g(ReadChan)e(stdin,)1080 660 y(AppendChan)f(stdout)h
(input)1041 710 y(])1079 843 y Fi(T)m(able)c(1:)18 b(Dialogue)12
b(I/O)i(in)g(Hask)o(ell)f(1.2)p 1821 868 V 977 870 846
2 v 977 1036 a(necessary)m(,)k(as)f(illustrated)g(b)o(y)f(the)i
(program)d(in)h(T)m(a-)977 1085 y(ble)20 b(1,)h(whic)o(h)f(simply)e
(copies)j(its)f(standard)h(input)977 1135 y(to)c(its)h(standard)g
(output.)28 b(Instead,)19 b(it)e(is)g(common)977 1185
y(practice)f(to)f(use)i(libraries)d(of)h(deriv)o(ed)h(com)o(binators)
977 1235 y(to)g(program)e(at)h(a)h(higher)f(lev)o(el.)23
b(One)17 b(suc)o(h)f(library)977 1285 y(\(for)h Fh(c)n(ontinuation-p)n
(assing)i Fi(I/O)f([14)o(,)f(17)o(]\))g(used)i(to)977
1335 y(b)q(e)c(part)f(of)f(Hask)o(ell's)g(standard)h(prelude.)1019
1384 y(Recen)o(tly)m(,)e(researc)o(hers)j(ha)o(v)o(e)d(exp)q(erimen)o
(ted)h(with)977 1434 y(new)j(I/O)f(com)o(binators)f(based)i(on)g
(monads)e([8)o(,)h(18)o(].)977 1484 y(These)i(com)o(binators)c(are)j
(capable)g(of)e(capturing)i(all)977 1534 y(the)i(I/O)f(op)q(erations)h
(that)f(could)g(b)q(e)h(pro)o(vided)f(us-)977 1584 y(ing)22
b(the)h(previous)g(stream-based)f(approac)o(h,)j(and)977
1633 y(pro)o(vide)20 b(the)g(same)f(t)o(yp)q(e)h(securit)o(y)h(as)e
(the)i(con)o(tin-)977 1683 y(uation)e(library)m(.)36
b(The)20 b(monadic)e(approac)o(h)i(is)g(sig-)977 1733
y(ni\014can)o(tly)c(more)g(\015exible)g(than)h(the)g(other)h(t)o(w)o(o)
e(ap-)977 1783 y(proac)o(hes,)h(ho)o(w)o(ev)o(er,)f(in)g(the)h(ease)f
(with)g(whic)o(h)g(new)977 1833 y(I/O)23 b(primitiv)o(es)e(can)i(b)q(e)
g(in)o(tro)q(duced)h(or)f(existing)977 1882 y(I/O)g(primitiv)o(es)e
(com)o(bined)g(to)i(create)h(new)f(com-)977 1932 y(binators.)30
b(Monadic)18 b(I/O)f(has)h(pro)o(v)o(ed)h(su\016cien)o(tly)977
1982 y(attractiv)o(e)e(that)g(sev)o(eral)g(Hask)o(ell)f(systems)h
(already)977 2032 y(supp)q(ort)22 b(at)f(least)g(a)g(basic)h(implem)o
(en)o(tation,)e(and)977 2082 y(some)12 b(supp)q(ort)h(sophisticated)g
(mec)o(hanisms)d(suc)o(h)j(as)977 2132 y(in)o(ter-language)19
b(w)o(orking,)h(concurrency)m(,)i(or)e(direct)977 2181
y(state-manipulation.)1019 2231 y(One)14 b(of)f(the)i(main)c(purp)q
(oses)16 b(of)d(Hask)o(ell)g(1.3)g(is)h(to)977 2281 y(standardise)e
(primitiv)o(es)d(for)i(monadic)e(I/O.)i(The)g(de-)977
2331 y(sign)j(pro)o(vides)g(a)g(basic)g(\(but)h(\\industrial-strength")
977 2381 y(and)h(extensible\))i(in)o(terface)f(to)g(common)d(op)q
(erating)977 2430 y(systems)c(suc)o(h)h(as)f(Unix,)g(DOS,)g(VMS,)g(or)g
(the)h(Macin-)977 2480 y(tosh.)17 b(The)11 b(design)g(has)g(b)q(een)h
(in\015uenced)g(b)o(y)e(the)h(I/O)977 2530 y(op)q(erations)17
b(found)f(in)g(imp)q(erativ)o(e)f(languages.)25 b(Ex-)977
2580 y(p)q(erimen)o(tal)13 b(features)i(suc)o(h)g(as)f(graphical)f(in)o
(terfaces)946 2749 y(1)p eop
%%Page: 2 2
2 1 bop 75 26 a Fi(or)24 b(m)o(utable)f(v)n(ariables)g(with)h(whic)o(h)
g(the)h(Hask)o(ell)75 75 y(comm)o(unit)o(y)10 b(has)k(little)f(exp)q
(erience)i(are)f(b)q(ey)o(ond)g(the)75 125 y(scop)q(e)j(of)f(the)h
(standard.)25 b(T)m(o)15 b(aid)g(bac)o(kw)o(ards)i(com-)75
175 y(patibilit)o(y)m(,)c(the)j(design)g(pro)o(vides)g(a)g(monadic)d
(in)o(ter-)75 225 y(face)g(to)f(the)h(ma)r(jorit)o(y)e(of)g(op)q
(erations)i(whic)o(h)g(existed)75 275 y(in)20 b(previous)h(v)o(ersions)
g(of)e(Hask)o(ell.)37 b(Some)19 b(rarely-)75 325 y(used)g(features,)i
(suc)o(h)e(as)f Fd(Binary)g Fi(\014les,)h(ha)o(v)o(e)f(b)q(een)75
374 y(remo)o(v)o(ed,)13 b(p)q(ending)h(b)q(etter)h(designs.)117
424 y(The)j(de\014nition)f(of)g(Hask)o(ell)g(1.3)f(consists)j(of)e(t)o
(w)o(o)75 474 y(do)q(cumen)o(ts.)33 b(The)20 b(rep)q(ort)g(prop)q(er)g
([9)o(])e(de\014nes)j(the)75 524 y(Hask)o(ell)10 b(language)g(and)g
(the)h(standard)g(prelude.)18 b(The)75 574 y(standard)10
b(libraries)f(ha)o(v)o(e)g(a)g(separate)h(de\014nition)f([10)o(].)75
623 y(Sections)19 b(2,)f(3)g(and)g(4)g(of)g(this)g(pap)q(er)h(describ)q
(e)h(the)75 673 y(con)o(ten)o(ts)f(of)e(the)h(I/O)g(libraries.)29
b(Section)19 b(5)e(sho)o(ws)75 723 y(ho)o(w)27 b(to)g(write)g(com)o
(binator)e(parsers)k(on)e(top)g(of)75 773 y(Hask)o(ell)9
b(1.3)f(I/O.)h(Section)h(6)f(outlines)g(previous)h(w)o(ork)75
823 y(on)21 b(functional)g(I/O)g(and)h(Section)f(7)h(summarises.)75
872 y(App)q(endix)11 b(A)h(summarises)d(the)j(t)o(yp)q(es)g(of)e(all)g
(the)h(I/O)75 922 y(and)22 b(op)q(erating)f(system)h(op)q(erations)g
(pro)o(vided)g(b)o(y)75 972 y(Hask)o(ell)17 b(1.3)g(and)g(App)q(endix)i
(B)f(con)o(tains)f(co)q(de)i(for)75 1022 y(com)o(binator)12
b(parsing.)75 1159 y Fj(2)67 b(Elemen)n(ts)23 b(of)e(Monadic)i(I/O)75
1250 y Fi(Monadic)16 b(I/O)g(dep)q(ends)i(on)e(the)h(builtin)e(t)o(yp)q
(e)h(con-)75 1300 y(structor,)11 b Fd(IO)p Fi(.)e(An)h(expression)h(of)
d(some)h(t)o(yp)q(e)h Fd(IO)f Fh(a)h Fi(de-)75 1350 y(notes)i(a)g
Fh(c)n(omputation)p Fi(,)g(that)g(ma)o(y)d(p)q(erform)i(I/O)h(and)75
1400 y(then)k(returns)h(a)e(result)i(of)d(t)o(yp)q(e)i
Fh(a)p Fi(.)23 b(The)16 b(main)e(pro-)75 1449 y(gram)g(\(function)i
Fd(main)f Fi(from)f(mo)q(dule)h Fd(Main)p Fi(,)g(whic)o(h)75
1499 y(w)o(e)e(write)h Fd(Main.main)p Fi(\))d(has)j(t)o(yp)q(e)f
Fd(IO)22 b(\(\))p Fi(,)12 b(that)h(is,)g(it)75 1549 y(is)g(a)g
(computation)f(whic)o(h)i(p)q(erforms)f(some)f(I/O)i(and)75
1599 y(returns)21 b(an)f(unin)o(teresting)g(result.)36
b(The)20 b(\\trivial")75 1649 y(t)o(yp)q(e)11 b Fd(\(\))e
Fi(has)h(only)g(one)g(v)n(alue,)f(the)i(unit)f(v)n(alue,)g(whic)o(h)75
1698 y(is)21 b(also)f(written)i Fd(\(\))p Fi(.)39 b(When)21
b(a)g(Hask)o(ell)f(program)75 1748 y(runs,)f(there)h(is)e(a)g(single)f
(top-lev)o(el)h(thread)h(of)e(con-)75 1798 y(trol)f(that)g(executes)i
(the)e(computation)f(denoted)i(b)o(y)75 1848 y Fd(Main.main)p
Fi(.)g(Only)d(this)g(thread)h(of)e(con)o(trol)h(can)g(ex-)75
1898 y(ecute)i(the)g(computations)d(denoted)j(b)o(y)f(expressions)75
1948 y(of)e(monadic)f(t)o(yp)q(e.)117 1997 y(The)26 b(monad)d
(constructor)k Fd(IO)f Fi(is)f(a)g(lib)q(eration)75 2047
y(to)f(the)h(purist)g(functional)e(programmer)f(in)i(that)75
2097 y(it)g(p)q(ermits)f(expression)i(of)f(arbitrary)g(imp)q(erativ)o
(e)75 2147 y(commands)g(within)i(a)h(higher-order)g(t)o(yp)q(e-secure)
75 2197 y(language.)39 b(Unlik)o(e)21 b(languages)f(lik)o(e)h(Lisp)g
(or)g(ML,)75 2246 y(in)e(whic)o(h)g(arbitrary)g(expressions)h(ma)o(y)d
(ha)o(v)o(e)i(side-)75 2296 y(e\013ects,)j(only)c(expressions)j(of)d
(monadic)g(t)o(yp)q(e)h(ma)o(y)75 2346 y(do)g(so)g(in)g(Hask)o(ell.)33
b(The)19 b(rest)h(of)f(the)g(language)g(is)75 2396 y(undisturb)q(ed.)
117 2446 y(Section)12 b(2.1)g(in)o(tro)q(duces)h(monadic)e(I/O)i(using)
f(the)75 2495 y(handful)k(of)h(I/O)g(op)q(erations)h(presen)o(t)h(in)d
(the)i(stan-)75 2545 y(dard)13 b(prelude.)18 b(The)13
b(ma)r(jorit)o(y)d(of)i(op)q(erations)h(are)g(in)75 2595
y(libraries)h(that)h(need)g(to)g(b)q(e)g(explicitly)e(imp)q(orted)h(b)o
(y)977 26 y(the)i(programmer.)i Fd(LibIO)p Fi(,)c(the)h(main)e(library)
m(,)g(con-)977 75 y(tains)i(basic)g(monadic)d(functions)j(and)g(\014le)
g(handling)977 125 y(op)q(erations.)30 b(W)m(e)17 b(consider)h(simple)f
(\014le)g(pro)q(cessing)977 175 y(op)q(erations)j(from)e
Fd(LibIO)h Fi(in)g(Section)i(2.2)e(and)g(ex-)977 225
y(plain)9 b(con)o(trol)g(\015o)o(w)g(and)h(error)h(signalling)c(op)q
(erations)977 275 y(on)14 b(the)g Fd(IO)g Fi(monad)e(in)h(Section)h
(2.3.)977 391 y Fc(2.1)56 b(Simple)16 b(programs)977
467 y Fi(The)i(simplest)f(p)q(ossible)h(programs)f(simply)e(output)977
517 y(their)g(result)g(to)g(the)g(standard)g(output)g(device)g(\(this)
977 567 y(will)i(normally)f(b)q(e)j(the)h(user's)f(terminal\).)31
b(This)19 b(is)977 617 y(done)14 b(in)g(Hask)o(ell)f(using)h(the)g
Fd(print)f Fi(function.)977 699 y Fd(print)21 b(::)g(Text)g(a)h(=>)f(a)
h(->)f(IO)g(\(\))977 782 y Fi(If)16 b Fh(x)g Fd(::)22
b Fh(a)16 b Fi(and)g(t)o(yp)q(e)g Fh(a)g Fi(is)g(in)g(the)g
Fd(Text)f Fi(class,)i(then)977 832 y Fd(print)d Fh(x)h
Fi(is)g(the)g(computation)f(that)g(prin)o(ts)i Fd(show)e
Fh(x)p Fi(,)977 882 y(a)k(textual)g(represen)o(tation)i(of)e
Fh(x)p Fi(,)h(on)f(the)h(standard)977 931 y(output.)25
b(The)17 b Fd(Text)e Fi(class)i(con)o(tains)f(t)o(yp)q(es)h(suc)o(h)g
(as)977 981 y Fd(Int)p Fi(,)23 b Fd(Bool)e Fi(and)h Fd(Char)p
Fi(,)g(lists)g(and)g(tuples)h(formed)977 1031 y(from)14
b(them,)i(and)g(certain)h(user-declared)h(algebraic)977
1081 y(t)o(yp)q(es.)36 b(The)21 b(libraries)e(do)q(cumen)o(t)g([9])g
(de\014nes)i(the)977 1131 y Fd(show)13 b Fi(function)h(and)g(the)h
Fd(Text)e Fi(class.)19 b(Here,)c(for)f(ex-)977 1180 y(ample,)c(is)h(a)g
(program)e(to)i(output)h(the)f(\014rst)h(nine)g(nat-)977
1230 y(ural)h(n)o(um)o(b)q(ers)h(and)g(their)g(p)q(o)o(w)o(ers)h(of)e
(t)o(w)o(o.)977 1313 y Fd(main)21 b(::)g(IO)h(\(\))977
1363 y(main)f(=)43 b(print)21 b([\(n,)g(2^n\))g(|)h(n)f(<-)h([0..8]])
977 1445 y Fi(The)14 b(output)g(of)g(the)g(program)e(is:)977
1528 y Fd([\(0,1\),)20 b(\(1,2\),)h(\(2,4\),)f(\(3,8\),)h(\(4,16\),)999
1577 y(\(5,32\),)f(\(6,64\),)g(\(7,128\),)h(\(8,256\))f(])1019
1660 y Fi(The)11 b Fd(show)f Fi(function,)h(and)g(hence)h(also)f
Fd(print)p Fi(,)f(for-)977 1710 y(mats)j(its)h(output)h(in)f(a)g
(standard)g(w)o(a)o(y)m(,)f(as)h(in)g(source)977 1760
y(Hask)o(ell)g(programs,)f(so)h(strings)h(and)f(c)o(haracters)i(are)977
1809 y(quoted)29 b(\(for)g(example,)j Fd("Haskell)20
b(B.)h(Curry")p Fi(\),)977 1859 y(sp)q(ecial)13 b(c)o(haracters)h(are)e
(output)h(sym)o(b)q(olically)c(\(that)977 1909 y(is,)22
b Fd('\\n')f Fi(rather)h(than)f(a)g(newline\),)h(lists)g(are)f(en-)977
1959 y(closed)h(in)g(square)g(brac)o(k)o(ets,)i(and)e(so)g(on.)41
b(There)977 2009 y(are)19 b(other,)h(more)e(primitiv)o(e)e(functions)j
(whic)o(h)f(can)977 2058 y(b)q(e)h(used)h(to)e(output)h(literal)f(c)o
(haracters)i(or)f(strings)977 2108 y(without)14 b(quoting)g(when)i
(this)e(is)h(needed)h(\()p Fd(putChar)p Fi(,)977 2158
y Fd(putStr)p Fi(\).)28 b(These)19 b(are)f(describ)q(ed)h(in)e(the)h
(follo)o(wing)977 2208 y(sections.)977 2316 y Fb(In)o(teracting)13
b(with)i(the)g(User)977 2392 y Fi(Hask)o(ell)e(1.3)g(con)o(tin)o(ues)h
(to)f(supp)q(ort)i(Landin-stream)977 2442 y(st)o(yle)j(in)o(teraction)f
(with)g(standard)h(input)f(and)h(out-)977 2492 y(put,)e(using)g
Fd(interact)p Fi(.)22 b(\(The)17 b(t)o(yp)q(e)f Fd(String)f
Fi(b)q(elo)o(w)977 2542 y(is)f(a)f(synon)o(ym)g(for)g
Fd([Char])p Fi(.\))977 2624 y Fd(interact)20 b(::)i(\(String)e(->)h
(String\))g(->)g(IO\(\))946 2749 y Fi(2)p eop
%%Page: 3 3
3 2 bop 75 26 a Fi(If)10 b Fh(f)g Fi(is)h(a)f(stream)g(pro)q(cessing)i
(function,)e(computation)75 75 y Fd(interact)k Fh(f)h
Fi(pro)q(ceeds)i(b)o(y)e(ev)n(aluating)f Fh(f)h Fi(applied)g(to)75
125 y(a)f(lazy)g(stream)g(represen)o(ting)i(the)f(c)o(haracters)h(a)o
(v)n(ail-)75 175 y(able)f(from)f(the)i(standard)g(input,)f(and)g(prin)o
(ting)g(the)75 225 y(c)o(haracters)22 b(pro)q(duced)g(to)e(standard)g
(output.)38 b(F)m(or)75 275 y(example,)11 b(the)j(follo)o(wing)d
(program)g(simply)g(remo)o(v)o(es)75 325 y(all)i(non-upp)q(er-case)j(c)
o(haracters)g(from)d(its)h(standard)75 374 y(input)e(and)h(ec)o(ho)q
(es)h(the)f(result)h(on)e(its)h(standard)g(out-)75 424
y(put.)75 507 y Fd(main)21 b(=)h(interact)e(\(filter)g(isUpper\))75
590 y Fi(The)d(functions)f Fd(filter)f Fi(and)h Fd(isUpper)f
Fi(come)g(from)75 640 y(the)20 b(Hask)o(ell)f(prelude.)36
b(They)20 b(ha)o(v)o(e)f(the)h(follo)o(wing)75 690 y(t)o(yp)q(es.)75
773 y Fd(filter)42 b(::)22 b(\(a)f(->)g(Bool\))g(->)h([a])f(->)g([a])75
823 y(isUpper)f(::)i(Char)f(->)g(Bool)75 906 y Fi(When)14
b(run)g(on)g(the)g(follo)o(wing)e(input,)75 989 y Fd(Now)21
b(is)h(the)f(time)g(for)g(all)g(Good)g(Men)g(to)h(come)75
1039 y(to)f(the)h(aid)f(of)g(the)g(Party.)75 1122 y Fi(this)14
b(program)e(w)o(ould)h(output)h(the)h(follo)o(wing.)75
1205 y Fd(NGMP)75 1288 y Fi(Since)i Fd(interact)d Fi(only)h(blo)q(c)o
(ks)h(on)g(input)g(when)g(de-)75 1337 y(mand)g(arises)j(for)f(the)g
(lazy)g(input)g(stream,)g(it)f(sup-)75 1387 y(p)q(orts)12
b(simple)d(in)o(teractiv)o(e)j(programs;)e(see)i(F)m(rost)g(and)75
1437 y(Launc)o(h)o(bury)i([6)o(],)f(for)h(instance.)75
1545 y Fb(Basic)h(File)g(I/O)75 1622 y Fd(writeFile)42
b(::)21 b(FilePath)f(->)i(String)e(->)i(IO\(\))75 1671
y(appendFile)e(::)h(FilePath)f(->)i(String)e(->)i(IO\(\))75
1721 y(readFile)64 b(::)21 b(FilePath)f(->)i(IO)f(String)75
1813 y Fi(The)11 b Fd(writeFile)d Fi(and)i Fd(appendFile)e
Fi(functions)i(write)75 1862 y(or)18 b(app)q(end)h(their)f(second)h
(argumen)o(t,)f(a)g(string,)h(to)75 1912 y(the)h(\014le)g(named)e(b)o
(y)h(their)h(\014rst)g(argumen)o(t.)34 b(T)o(yp)q(e)75
1962 y Fd(FilePath)17 b Fi(is)i(a)f(synon)o(ym)f(for)i
Fd(String)p Fi(.)31 b(T)m(o)18 b(write)75 2012 y(a)h(v)n(alue)g(of)g
(an)o(y)g(prin)o(table)g(t)o(yp)q(e,)h(as)g(with)f Fd(print)p
Fi(,)75 2062 y(use)c(the)h Fd(show)d Fi(function)i(to)f(con)o(v)o(ert)h
(the)g(v)n(alue)f(to)h(a)75 2111 y(string)f(\014rst.)19
b(F)m(or)13 b(example,)75 2194 y Fd(main)21 b(=)119 2244
y(appendFile)e("ascii-chars")162 2294 y(\(show)i([\(x,chr)f(\(x\)\))h
(|)h(x)f(<-)h([0..127]]\))75 2377 y Fi(writes)15 b(the)f(follo)o(wing)d
(to)j(the)h(\014le)e Fd(ascii-chars)p Fi(:)75 2460 y
Fd([\(0,'\\NUL'\),)19 b(\(1,'\\SOH'\),)h(\(2,'\\STX'\),)f(...)75
2510 y(...)i(\(126,'~'\),)f(\(127,'\\DEL'\)])977 26 y
Fi(The)14 b Fd(readFile)e Fi(function)i(reads)h(the)f(\014le)g(named)f
(b)o(y)977 75 y(its)f(argumen)o(t)f(and)h(returns)i(the)e(con)o(ten)o
(ts)h(of)f(the)g(\014le)977 125 y(as)k(a)g(string.)25
b(The)16 b(\014le)g(is)g(read)h(lazily)m(,)d(on)i(demand,)977
175 y(as)e(with)g Fd(interact)p Fi(.)1019 225 y(T)m(o)i(illustrate)h
Fd(readFile)p Fi(,)e(w)o(e)j(need)g(to)f(comp)q(ose)977
275 y(computations)k(in)i(sequence.)47 b(W)m(e)22 b(use)i(the)f
(in\014x)977 325 y(function)c Fd(\(>>=\))f Fi(of)g(t)o(yp)q(e)h
Fd(IO)j(a)f(->)h(\(a)f(->)h(IO)f(b\))977 374 y(->)g(IO)h(b)p
Fi(.)17 b(Computation)10 b Fh(c)n(omp)p Fi(1)i Fd(>>=)g(\\)p
Fh(x)g Fd(->)f Fh(c)n(omp)p Fi(2)977 424 y(b)q(egins)20
b(b)o(y)f(running)g Fh(c)n(omp)p Fi(1.)34 b(When)20 b(it)f(returns)i(a)
977 474 y(result)15 b Fh(x)p Fi(,)g(computation)e Fh(c)n(omp)p
Fi(2)i(is)f(run,)h(whic)o(h)f(ma)o(y)977 524 y(dep)q(end)19
b(on)f Fh(x)p Fi(.)32 b(F)m(or)18 b(example,)f(the)i(follo)o(wing)d
(pro-)977 574 y(gram)11 b(reads)j(the)f(\014le)f Fd(infile)p
Fi(,)g(turns)h(all)f(upp)q(er-case)977 623 y(c)o(haracters)j(in)o(to)d
(lo)o(w)o(er-case)h(ones,)g(and)g(then)h(writes)977 673
y(the)g(result)h(to)f(the)g(\014le)g Fd(outfile)p Fi(.)977
756 y Fd(main)21 b(=)1042 806 y(readFile)g("infile")41
b(>>=)22 b(\\)f(input)g(->)1086 856 y(let)g(output)g(=)g(map)g(toLower)
g(input)1086 906 y(in)1173 956 y(writeFile)f("outfile")g(output)977
1039 y Fi(The)j(notation)f Fd(\\)g(p)f(->)g(e)i Fi(is)f(a)h(Hask)o(ell)
f(lam)o(b)q(da-)977 1088 y(expression,)12 b(denoting)f(a)g(function)g
(whose)h(argumen)o(t)977 1138 y(is)j(the)h(pattern)h
Fd(p)e Fi(and)g(whose)h(b)q(o)q(dy)g(is)f(the)h(expres-)977
1188 y(sion)e Fd(e)p Fi(.)1019 1238 y(This)19 b(lev)o(el)g(of)f
(programming)e(\(treating)k(\014les)f(as)977 1288 y Fd(String)p
Fi(s\))i(w)o(as)g(roughly)f(all)h(that)g(could)g(b)q(e)h(done)977
1337 y(with)17 b(Hask)o(ell)h(1.2,)f(and)g(in)h(fact)f(programs)g(at)g
(this)977 1387 y(simple)12 b(lev)o(el)h(can)h(b)q(e)g(used)g(almost)e
(without)h(c)o(hange)977 1437 y(in)f(Hask)o(ell)g(1.3.)k(T)m(o)c(write)
g(more)g(sophisticated)h(pro-)977 1487 y(grams)d(than)i(these)g(in)f
(Hask)o(ell)g(1.3,)g(the)h(I/O)f(library)m(,)977 1537
y Fd(LibIO)p Fi(,)h(needs)k(to)d(b)q(e)i(explicitly)e(imp)q(orted.)977
1653 y Fc(2.2)56 b(Character-Based)18 b(I/O)977 1729
y Fi(T)m(o)64 b(pro)q(cess)j(\014les)f(c)o(haracter-b)o(y-c)o
(haracter,)977 1779 y(Hask)o(ell)35 b(1.3)f(in)o(tro)q(duces)j
Fh(hand)r(les)p Fi(,)k(whic)o(h)35 b(are)977 1829 y(analogous)12
b(to)h(ANSI)g(C's)g(\014le)g(descriptors.)19 b(Stream-)977
1879 y(based)f(op)q(erations,)g(w)o(orking)e(on)h(complete)g(\014les)g
(or)977 1929 y(devices,)24 b(suc)o(h)d(as)g Fd(writeFile)e
Fi(or)i Fd(interact)p Fi(,)g(are)977 1979 y(in)13 b(fact)h(deriv)o(ed)g
(from)d(c)o(haracter-based)16 b(primitiv)o(es.)977 2028
y(The)23 b(t)o(w)o(o)g(simplest)e(functions)i(are)g Fd(getChar)f
Fi(and)977 2078 y Fd(putChar)p Fi(.)977 2161 y Fd(getChar)108
b(::)195 b(IO)22 b(Char)977 2211 y(putChar)108 b(::)21
b(Char)g(->)g(IO)h(\(\))977 2294 y Fi(The)k Fd(getChar)d
Fi(computation)g(reads)j(a)f(c)o(haracter)977 2344 y
Fh(c)19 b Fi(from)f(the)i(standard)g(input)f(device)h(and)f(returns)977
2394 y Fh(c)j Fi(as)g(its)g(result.)44 b(The)22 b Fd(putChar)f
Fh(c)h Fi(computation)977 2443 y(writes)e(c)o(haracter)g
Fh(c)g Fi(to)f(the)g(standard)h(output)f(de-)977 2493
y(vice,)h(and)f(returns)h(the)g(unit)e(v)n(alue,)i Fd(\(\))e
Fi(as)h(its)g(re-)977 2543 y(sult.)e(F)m(or)12 b(example,)e(here)j(is)e
(a)g(program)f(that)i(copies)977 2593 y(its)j(standard)g(input)f(c)o
(haracter-b)o(y-c)o(haracter)j(to)d(its)946 2749 y(3)p
eop
%%Page: 4 4
4 3 bop 75 26 a Fi(standard)11 b(output)g(\(equiv)n(alen)o(tly)f(to,)h
(but)g(somewhat)75 75 y(more)i(v)o(erb)q(osely)h(than)g
Fd(interact)20 b(id)p Fi(!\))75 166 y Fd(import)h(LibIO)75
266 y(main)g(=)140 316 y(isEOF)261 b(>>=)21 b(\\)h(iseof)e(->)140
365 y(if)i(iseof)f(then)184 415 y(return)g(\(\))140 465
y(else)184 515 y(getChar)173 b(>>=)21 b(\\)h(c)f(->)184
565 y(putChar)f(c)131 b(>>)184 614 y(main)75 705 y Fi(This)17
b(program)e(uses)j(sev)o(eral)f(new)g(functions.)27 b(The)75
755 y Fd(return)12 b Fi(function)h(simply)e(returns)k(its)e(argumen)o
(t)f(as)75 805 y(the)22 b(result)g(of)e(the)i(monadic)e(computation.)38
b(The)75 855 y(function)15 b Fd(\(>>\))f Fi(is)h(iden)o(tical)f(to)h
Fd(\(>>=\))f Fi(except)i(that)75 904 y(its)10 b(con)o(tin)o(uation)e
(tak)o(es)j(no)e(argumen)o(t:)15 b(the)10 b(result,)h(if)75
954 y(an)o(y)m(,)e(of)g(the)h(\014rst)g(computation)e(is)h(simply)f
(discarded.)75 1004 y(The)16 b(function)e Fd(isEOF)g
Fi(returns)j(returns)g Fd(True)d Fi(when)75 1054 y(the)g(end-of-\014le)
g(is)g(reac)o(hed,)g(and)g Fd(False)f Fi(otherwise.)75
1170 y Fc(2.3)56 b(Results)17 b(and)j(Errors)75 1247
y Fi(I/O)c(op)q(erations)g(need)h(to)f(indicate)g(errors)i(without)75
1296 y(terminating)13 b(the)j(program,)e(and)h(implem)o(en)o(tations)75
1346 y(need)j(to)f(handle)g(these)h(errors.)28 b(Hence,)19
b(as)e(w)o(ell)f(as)75 1396 y(terminating)8 b(successfully)k(with)e(a)g
(result)h(\(for)f(exam-)75 1446 y(ple)17 b(using)f Fd(return)p
Fi(\),)g(I/O)h(computations)e(ma)o(y)g(ter-)75 1496 y(minate)9
b(in)i(failure,)f(returning)i(an)e Fh(err)n(or)h(value)g
Fi(of)g(the)75 1545 y(builtin)i(t)o(yp)q(e)h Fd(IOError)p
Fi(.)i(F)m(or)d(instance,)h(input)g(op)q(er-)75 1595
y(ations)j(fail)f(with)h(the)h(error)g(v)n(alue)e Fd(eofIOError)g
Fi(to)75 1645 y(indicate)d(end)h(of)f(\014le.)18 b(Users)d(ma)o(y)d
(create)j(new)f(error)75 1695 y(v)n(alues.)23 b(The)16
b(function)f Fd(userError)e Fi(sends)k(a)e(string)75
1745 y(to)g(an)g(error)i(v)n(alue)e(distinct)g(from)f(those)i
(generated)75 1795 y(b)o(y)h(the)i(I/O)e(primitiv)o(es.)28
b(Programmers)16 b(can)h(gen-)75 1844 y(erate)g(failures)e(directly)h
(via)f(the)h Fd(fail)f Fi(function,)g(of)75 1894 y(t)o(yp)q(e)d
Fd(IOError)21 b(->)g(IO)g(\(\))p Fi(.)c(The)12 b(parsing)g(com)o(bina-)
75 1944 y(tors)i(of)g(Section)g(5)g(illustrate)f Fd(fail)p
Fi(.)117 1994 y(So)22 b(that)h(error)h(v)n(alues)e(ma)o(y)f(propagate)i
(as)g(in-)75 2044 y(tended,)g(the)e Fd(\(>>=\))f Fi(function)g(needs)i
(to)f(tak)o(e)f(ac-)75 2093 y(coun)o(t)g(of)e(the)i(p)q(ossibilit)o(y)e
(of)h(failure.)33 b(If)19 b(the)h(\014rst)75 2143 y(computation)12
b(fails)h(with)g(some)g(error)h(v)n(alue)f Fh(e)p Fi(,)h(then)75
2193 y(the)g(en)o(tire)h(computation)d(also)h(fails)g(with)h
Fh(e)p Fi(.)117 2243 y(Here)d(is)f(a)g(simple)f(parit)o(y)g(c)o(hec)o
(k)o(er)j(to)e(compute)g(the)75 2293 y(parit)o(y)j(of)h(an)f(input)h
(consisting)g(of)f(just)h Fd(T)p Fi(s)g(and)g Fd(F)p
Fi(s.)75 2375 y Fd(module)21 b(Parity)f(where)75 2425
y(import)h(LibIO)75 2525 y(perr)g(::)g(IOError)75 2574
y(perr)g(=)43 b(userError)20 b("Parity")977 26 y(parity)h(::)g(Bool)g
(->)g(IO)h(Bool)977 75 y(parity)f(b)g(=)1021 125 y(isEOF)325
b(>>=)22 b(\\eof)1021 175 y(if)f(eof)g(then)g(return)g(b)1021
275 y(else)g(getChar)194 b(>>=)21 b(\\c)h(->)1130 325
y(if)f(c=='T')f(then)1130 374 y(\(if)h(b)g(then)g(parity)g(False)1260
424 y(else)g(parity)g(True\))1021 524 y(else)g(if)g(c=='F')f(||)i
(isSpace)e(c)i(then)1064 574 y(parity)f(b)1021 673 y(else)g(fail)g
(perr)977 754 y Fi(The)16 b(computation)f Fd(parity)20
b(True)c Fi(returns)h Fd(True)e Fi(if)977 804 y(the)e(n)o(um)o(b)q(er)e
(of)h Fd(T)p Fi(s)h(is)f(ev)o(en,)g(and)h Fd(False)e
Fi(if)g(the)i(n)o(um-)977 854 y(b)q(er)h(is)f(o)q(dd.)18
b(But)c(if)e(an)o(y)h(c)o(haracter)h(other)g(than)f Fd(T)p
Fi(,)g Fd(F)977 904 y Fi(or)h(white-space)h(is)f(in)g(the)h(input,)e
(the)i(computation)977 954 y(fails)e(with)g(the)i(user-de\014ned)h
(error)f(v)n(alue)e Fd(perr)p Fi(.)977 1061 y Fb(Catc)o(hing)h(Errors)
977 1138 y Fi(F)m(ailures)f(can)h(b)q(e)g(handled)g(b)o(y)f(the)h
(programmer)d(us-)977 1188 y(ing)i(the)i Fd(catch)d Fi(function,)i(of)f
(t)o(yp)q(e)977 1269 y Fd(IO)21 b(a)h(->)f(\(IOError)f(->)i(IO)f(a\))h
(->)f(IO)g(a.)977 1350 y Fi(Computation)13 b Fd(catch)h
Fh(c)n(omp)h(f)g Fi(p)q(erforms)g(computa-)977 1400 y(tion)d
Fh(c)n(omp)p Fi(.)17 b(If)12 b Fh(c)n(omp)h Fi(returns)g(a)f(result)h
Fh(x)p Fi(,)g(this)f(is)g(the)977 1450 y(result)17 b(of)f(the)g(en)o
(tire)h(computation.)23 b(Otherwise,)18 b(if)977 1500
y Fh(c)n(omp)c Fi(returns)h(an)f(error)g(v)n(alue)f Fh(x)p
Fi(,)h(the)g(computation)977 1549 y(con)o(tin)o(ues)g(with)g
Fh(f)g(x)p Fi(.)977 1639 y Fd(import)21 b(LibIO;)f(import)h(LibSystem)
977 1688 y(import)g(Parity)977 1788 y(main)g(=)1021 1838
y(\(parity)f(True)h(>>=)g(print\))g(`catch`)f(handler)977
1888 y(handler)g(err)i(=)1021 1937 y(if)f(err)g(==)h(perr)e(then)1064
1987 y(print)h("Unexpected)e(input)i(character")f(>>)1064
2037 y(exitWith)g(\(ExitFailure)g(1\))1021 2087 y(else)1064
2137 y(fail)h(err)1019 2226 y Fi(Hask)o(ell)d(1.3)h(assumes)g(that)g
(the)h(op)q(erating)f(sys-)977 2276 y(tem)e(understands)j(n)o(umeric)d
(return)i(co)q(des.)31 b(F)m(unc-)977 2325 y(tion)24
b Fd(exitWith)e Fi(maps)h Fd(ExitFailure)f Fh(exitfail)i
Fi(to)977 2375 y(a)30 b(computation)f(that)h(immedia)o(tely)e
(terminates)977 2425 y(the)22 b(Hask)o(ell)e(program)g(and)h(sends)h
(the)g(op)q(erating)977 2475 y(system)j(the)h(n)o(umeric)f(co)q(de)h
Fh(exitfail)p Fi(.)52 b(Lik)o(ewise,)977 2525 y Fd(exitWith)9
b(ExitSuccess)f Fi(immediately)g(terminates)977 2574
y(Hask)o(ell)i(and)h(sends)h(the)f(co)q(de)h(for)e(success,)k(the)d(n)o
(um-)977 2624 y(b)q(er)19 b(b)q(eing)f(dep)q(enden)o(t)i(on)e(the)g(op)
q(erating)g(system.)946 2749 y(4)p eop
%%Page: 5 5
5 4 bop 75 26 a Fi(The)20 b(co)q(de)g(also)e(sho)o(ws)i(that)f(error)h
(v)n(alues)f(can)h(b)q(e)75 75 y(passed)13 b(to)e(an)h(outer)g(lev)o
(el)f(of)g(the)h(program)e(b)o(y)i(a)f(call)75 125 y(to)j
Fd(fail)f Fi(within)g(a)g(handler.)117 175 y(There)18
b(is)f(also)g(a)g(deriv)o(ed)h(op)q(eration)f Fd(try)g
Fi(whic)o(h)75 225 y(can)e(b)q(e)g(used)g(to)f(exp)q(ose)i(error)f(v)n
(alues)f(in)g(computa-)75 275 y(tions)f(that)h(fail,)e(turning)h(the)h
(failures)f(in)o(to)g(success-)75 325 y(ful)j(computations.)25
b(The)17 b(t)o(yp)q(e)g(of)f Fd(try)g Fi(is)h Fd(IO)k(a)h(->)75
374 y(IO)f(\(Either)g(IOError)f(a\))p Fi(,)28 b(where)f
Fd(Either)d Fi(is)i(a)75 424 y(prelude)15 b(t)o(yp)q(e)f(de\014ned)h(b)
o(y)f(the)g(follo)o(wing.)75 506 y Fd(data)21 b(Either)g(a)g(b)h(=)f
(Left)g(a)h(|)f(Right)g(b)75 588 y Fi(The)16 b(computation)e
Fd(try)i Fh(c)n(omp)g Fi(runs)g(the)h(computa-)75 638
y(tion)12 b Fh(c)n(omp)p Fi(,)h(and)g(if)f(it)g(returns)j(the)e(result)
h Fh(x)p Fi(,)f(returns)75 688 y(result)18 b Fd(Right)e
Fh(x)h Fi(\(the)h(`righ)o(t')e(answ)o(er\).)28 b(Otherwise)75
738 y(if)16 b Fh(c)n(omp)i Fi(returns)g(an)f(error)h(v)n(alue)f
Fh(x)g Fi(it)g(returns)i(the)75 788 y(result)c Fd(Left)f
Fh(x)p Fi(.)20 b(Hence)c Fd(try)e Fh(c)n(omp)h Fi(nev)o(er)g(fails)f
(with)75 837 y(an)j(error)h(v)n(alue.)28 b(Of)17 b(course)i(it)e(ma)o
(y)e(lo)q(op)i(if)f Fh(c)n(omp)75 887 y Fi(lo)q(ops.)117
937 y(Hask)o(ell)10 b(also)g(de\014nes)j(a)d(similar)f
Fd(Maybe)h Fi(t)o(yp)q(e,)h(that)75 987 y(w)o(e)23 b(will)f(use)i(to)f
(indicate)f(optional)g(results)i(from)75 1037 y(functions)14
b(and)g(computations.)75 1119 y Fd(data)21 b(Maybe)g(a)g(=)h(Nothing)e
(|)i(Just)f(a)75 1201 y Fi(F)m(or)13 b(example,)75 1283
y Fd(isUserError)20 b(::)h(IOError)f(->)i(Maybe)e(String)75
1365 y Fi(determines)10 b(whether)h(an)e Fd(IOError)f
Fi(is)h(a)g(user-de\014ned)75 1415 y(error.)37 b(If)20
b(so)g(it)g(returns)h Fd(Just)e Fh(err)p Fi(,)h(where)i
Fh(err)d Fi(is)75 1465 y(a)e(programmer-sp)q(eci\014c)g(string.)29
b(Otherwise)19 b(it)e(re-)75 1515 y(turns)e Fd(Nothing)p
Fi(.)75 1622 y Fb(The)h(Error)f(F)l(unction)75 1699 y
Fi(Hask)o(ell)10 b(1.3)g(con)o(tin)o(ues)h(to)f(supp)q(ort)i(the)f
Fd(error)e Fi(func-)75 1749 y(tion.)23 b(An)16 b(expression)h
Fd(error)e Fh(msg)g Fi(can)h(b)q(e)h(of)e(arbi-)75 1799
y(trary)e(t)o(yp)q(e)g(and)f(is)h(treated)h(seman)o(tically)c(as)j
(iden)o(ti-)75 1848 y(cal)f(to)h(a)g(div)o(ergen)o(t)g(expression.)19
b(If)12 b(suc)o(h)i(an)e(expres-)75 1898 y(sion)17 b(is)g(ev)o(er)h(ev)
n(aluated,)g(implem)o(en)o(tations)d(should)75 1948 y(halt)f(and)g
(prin)o(t)h(the)g(error)g(string)g Fh(msg)p Fi(.)20 b(The)15
b Fd(error)75 1998 y Fi(function)e(is)g(still)f(useful)i(in)e(Hask)o
(ell)h(1.3)f(for)h(indicat-)75 2048 y(ing)18 b(program)f(bugs,)i(for)f
(instance.)32 b(The)19 b(monadic)75 2097 y(error)12 b(signalling)c(mec)
o(hanism)h(is)i(preferable)g(for)g(han-)75 2147 y(dling)j(errors)i(in)f
(input.)21 b(There)c(is)e(no)f(w)o(a)o(y)h(to)g(catc)o(h)75
2197 y(an)f(error)g(indicated)g(b)o(y)g(the)g Fd(error)f
Fi(function.)75 2334 y Fj(3)67 b(The)22 b(LibIO)i(Library)75
2425 y Fi(Ha)o(ving)c(explained)g(the)h(basic)g(op)q(erations)g(on)f
(the)75 2475 y Fd(IO)h Fi(monad,)g(the)h(ob)r(jectiv)o(e)g(of)f(this)g
(section)h(is)g(to)75 2525 y(co)o(v)o(er)13 b(the)g(I/O)f(op)q
(erations)g(pro)o(vided)h(b)o(y)f(the)h Fd(LibIO)75 2574
y Fi(library)m(.)40 b(W)m(e)21 b(b)q(egin)g(in)g(Section)h(3.1)e(b)o(y)
i(de\014ning)75 2624 y(Hask)o(ell)17 b(\014les)g(and)g(handles.)29
b(Section)18 b(3.2)e(explains)977 26 y(ho)o(w)d(\014les)g(are)h(op)q
(ened)g(and)e(closed.)19 b(Section)13 b(3.3)f(ex-)977
75 y(plains)d(ho)o(w)h(to)g(con)o(trol)f(the)i(bu\013ering)f(of)g
(handle)f(I/O)977 125 y(and)i(Section)g(3.4)f(explains)g(ho)o(w)h
(handles)g(ma)o(y)e(b)q(e)i(re-)977 175 y(p)q(ositioned)j(in)h(a)f
(\014le.)20 b(Op)q(erations)15 b(in)g(Sections)g(3.5,)977
225 y(3.6)20 b(and)g(3.7)g(co)o(v)o(er)h(querying)g(handle)f(prop)q
(erties,)977 275 y(input)15 b(and)f(output)h(resp)q(ectiv)o(ely)m(.)22
b(The)15 b(t)o(yp)q(es)h(of)e(all)977 325 y(these)h(functions)f(are)h
(in)e(App)q(endix)h(A.)977 441 y Fc(3.1)56 b(Files)17
b(and)j(Handles)977 517 y Fi(Hask)o(ell)12 b(in)o(terfaces)h(to)g(the)g
(external)g(w)o(orld)e(through)977 567 y(an)g(abstract)i
Fh(\014le)g(system)p Fi(.)k(This)12 b(\014le)f(system)h(is)g(a)f(col-)
977 617 y(lection)j(of)g(named)f Fh(\014le)i(system)g(obje)n(cts)p
Fi(,)e(whic)o(h)h(ma)o(y)977 667 y(b)q(e)e(organised)g(in)f
Fh(dir)n(e)n(ctories)f Fi(\(see)j(Section)e(4.1\).)17
b(W)m(e)977 717 y(call)9 b(an)o(y)g(\014le)h(system)f(ob)r(ject)h(that)
g(isn't)f(a)g(directory)i(a)977 766 y Fh(\014le)p Fi(,)h(ev)o(en)g
(though)f(it)g(could)h(actually)e(b)q(e)i(a)g(terminal,)977
816 y(a)h(disk,)f(a)h(comm)o(unicatio)o(n)e(c)o(hannel,)h(or)h(indeed)h
(an)o(y)977 866 y(other)c(ob)r(ject)h(recognised)g(b)o(y)e(the)i(op)q
(erating)e(system.)977 916 y(File)15 b(and)g(directory)h(names)f(are)g
(strings.)23 b(Files)15 b(can)977 966 y(b)q(e)f(op)q(ened,)g(yielding)e
(a)g(handle)i(whic)o(h)f(can)g(then)h(b)q(e)977 1016
y(used)g(to)f(op)q(erate)i(on)e(the)h(con)o(ten)o(ts)g(of)f(that)h
(\014le.)j(Di-)977 1065 y(rectories)f(can)f(b)q(e)g(searc)o(hed)h(to)f
(determine)f(whether)977 1115 y(they)21 b(con)o(tain)f(a)g(\014le)g
(system)g(ob)r(ject.)38 b(Files)20 b(\(and)977 1165 y(normally)d(also)j
(directories\))h(can)g(b)q(e)f(added)h(to)e(or)977 1215
y(deleted)c(from)d(directories.)1019 1265 y(Handles)f(are)h(used)h(b)o
(y)e(the)h(Hask)o(ell)g(run-time)e(sys-)977 1314 y(tem)h(to)g
Fh(manage)h Fi(I/O)f(on)h(\014les.)17 b(They)12 b(are)g(analogous)977
1364 y(to)f(POSIX)h(\014le)f(descriptors.)19 b(A)11 b(handle)g(is)g(a)g
(v)n(alue)f(of)977 1414 y(t)o(yp)q(e)h Fd(Handle)p Fi(.)k(A)10
b(handle)h(has)f(at)g(least)g(the)h(follo)o(wing)977
1464 y(prop)q(erties:)1019 1547 y Fa(\017)20 b Fi(whether)d(the)f
(handle)f(manages)f(input)h(or)h(out-)1060 1597 y(put)e(or)g(b)q(oth;)
1019 1680 y Fa(\017)20 b Fi(whether)14 b(the)g(handle)f(is)g
Fh(op)n(en)p Fi(,)h Fh(close)n(d)f Fi(or)g Fh(semi-)1060
1729 y(close)n(d)h Fi(\(see)h(Section)f(3.2\);)1019 1813
y Fa(\017)20 b Fi(whether)11 b(the)f(\014le)f(is)g(seek)n(able)h(\(see)
h(Section)f(3.4\);)1019 1896 y Fa(\017)20 b Fi(whether)12
b(bu\013ering)f(on)f(the)h(handle)g(is)f(disabled,)1060
1945 y(or)i(enabled)h(on)f(a)f(line)h(or)g(blo)q(c)o(k)g(basis)g(\(see)
i(Sec-)1060 1995 y(tion)f(3.3\);)1019 2078 y Fa(\017)20
b Fi(a)14 b(bu\013er)h(\(whose)f(length)g(ma)o(y)e(b)q(e)i(zero\).)977
2161 y(Most)g(handles)g(will)f(also)g(ha)o(v)o(e)h(a)f(curren)o(t)j
(I/O)e(p)q(osi-)977 2211 y(tion)h(indicating)g(where)i(the)f(next)g
(input)g(or)f(output)977 2261 y(op)q(eration)f(will)e(o)q(ccur.)977
2369 y Fb(Standard)i(Handles)977 2445 y Fi(There)e(are)g(three)h
(standard)e(handles)h(whic)o(h)f(manage)977 2495 y(the)20
b(standard)h(input)e(\()p Fd(stdin)p Fi(\),)h(standard)h(output,)977
2545 y(\()p Fd(stdout)o Fi(\),)13 b(and)h(standard)g(error)h(devices)g
(\()p Fd(stderr)o Fi(\),)946 2749 y(5)p eop
%%Page: 6 6
6 5 bop 75 26 a Fi(resp)q(ectiv)o(ely)m(.)39 b(The)21
b(\014rst)g(t)o(w)o(o)f(are)h(normally)c(con-)75 75 y(nected)22
b(to)e(the)g(user's)i(k)o(eyb)q(oard)e(and)g(screen,)j(re-)75
125 y(sp)q(ectiv)o(ely)m(.)18 b(The)13 b(third,)g Fd(stderr)p
Fi(,)e(is)h(often)h(also)f(con-)75 175 y(nected)h(to)e(the)g(user's)h
(screen.)19 b(A)11 b(separate)i(handle)e(is)75 225 y(pro)o(vided)16
b(b)q(ecause)i(it)d(is)h(frequen)o(tly)h(useful)f(to)g(sep-)75
275 y(arate)21 b(error)g(output)f(from)e(the)j(normal)d(user)k(out-)75
325 y(put)12 b(whic)o(h)g(app)q(ears)h(on)e Fd(stdout)p
Fi(.)16 b(In)c(op)q(erating)g(sys-)75 374 y(tems)j(whic)o(h)g(supp)q
(ort)h(this)g(separation,)f(one)h(or)f(the)75 424 y(other)h(is)f(often)
g(directed)i(in)o(to)d(a)h(\014le.)22 b(If)15 b(an)g(op)q(erat-)75
474 y(ing)h(system)g(do)q(esn't)g(distinguish)g(b)q(et)o(w)o(een)i
(normal)75 524 y(user)c(output)f(and)g(error)h(output,)e(a)h(sensible)h
(default)75 574 y(is)i(for)g(the)h(t)o(w)o(o)f(names)g(to)g(refer)h(to)
f(the)h(same)f(han-)75 623 y(dle.)i(It)13 b(is)g(common)d(for)j(the)h
(standard)f(error)i(handle)75 673 y(to)i(b)q(e)h Fh(unbu\013er)n(e)n(d)
p Fi(,)h(so)e(that)g(error)h(output)g(app)q(ears)75 723
y(immediately)13 b(on)j(the)g(user's)h(terminal,)e(but)h(this)h(is)75
773 y(not)d(alw)o(a)o(ys)f(the)h(case|see)i(Section)e(3.3.)75
889 y Fc(3.2)56 b(Op)r(ening)18 b(and)h(Closing)f(Files)75
966 y Fi(The)d Fd(openFile)d Fi(function)i(is)g(used)h(to)f(obtain)f(a)
h(new)75 1016 y(handle)i(for)f(a)g(\014le.)24 b(It)16
b(tak)o(es)g(a)g Fh(mo)n(de)g Fi(parameter)f(of)75 1065
y(t)o(yp)q(e)i Fd(IOMode)p Fi(,)e(that)h(con)o(trols)g(whether)i(the)f
(handle)75 1115 y(can)d(b)q(e)h(used)f(for)g(input-only)e(\()p
Fd(ReadMode)o Fi(\),)h(output-)75 1165 y(only)e(\()p
Fd(WriteMode)f Fi(or)h Fd(AppendMode)p Fi(\),)f(or)i(b)q(oth)g(input)75
1215 y(and)20 b(output)f(\()p Fd(ReadWriteMode)n Fi(\).)35
b(There)21 b(are)f(I/O)75 1265 y(op)q(erations)14 b(on)f(handles)h
(similar)d(to)i(those)i(pro)o(vided)75 1314 y(for)k(standard)h(input)f
(and)h(output.)35 b(Handle)19 b(op)q(er-)75 1364 y(ations)f(are)h
(distinguished)g(b)o(y)f(the)h(pre\014x)g Fd(h)p Fi(,)g(as)g(in)75
1414 y Fd(hGetChar)p Fi(.)34 b(When)20 b(a)f(\014le)h(is)g(op)q(ened)g
(for)g(output,)75 1464 y(it's)15 b(created)j(if)d(it)h(do)q(esn't)g
(already)g(exist.)24 b(If,)16 b(ho)o(w-)75 1514 y(ev)o(er,)i(the)g
(\014le)f(do)q(es)h(exist)g(and)f(it)g(is)g(op)q(ened)h(using)75
1563 y Fd(WriteMode)n Fi(,)h(it)e(is)h(\014rst)h(truncated)g(to)f(zero)
g(length)75 1613 y(b)q(efore)d(an)o(y)e(c)o(haracters)j(are)e(written)g
(to)g(it.)117 1663 y(F)m(or)h(instance,)j(the)f(cop)o(y)f(program)e
(giv)o(en)i(earlier)75 1713 y(can)e(b)q(e)h(rewritten)g(to)e(w)o(ork)h
(on)g(\014les)g(as)g(follo)o(ws.)75 1796 y Fd(import)21
b(LibIO)75 1846 y(import)g(LibSystem)75 1945 y(main)g(=)140
1995 y(getArgs)369 b(>>=)22 b(\\)f(args)g(->)140 2045
y(let)h(\(inf:outf:_\))d(=)i(args)261 b(in)140 2095 y(openFile)21
b(inf)42 b(ReadMode)g(>>=)22 b(\\)f(ih)65 b(->)140 2145
y(openFile)21 b(outf)f(WriteMode)g(>>=)i(\\)f(oh)65 b(->)140
2194 y(copyFile)21 b(ih)g(oh)217 b(>>)140 2244 y(hClose)21
b(ih)326 b(>>)140 2294 y(hClose)21 b(oh)75 2394 y(copyFile)f(::)i
(Handle)e(->)h(Handle)g(->)g(IO)h(\(\))75 2443 y(copyFile)e(ih)i(oh)f
(=)140 2493 y(hIsEof)g(ih)217 b(>>=)22 b(\\)f(eof)g(->)140
2543 y(if)h(eof)f(then)206 2593 y(return)f(\(\))1042
26 y(else)1108 75 y(hGetChar)g(ih)108 b(>>=)22 b(\\)f(c)44
b(->)1108 125 y(hPutChar)20 b(oh)h(c)65 b(>>)1108 175
y(copyFile)20 b(ih)h(oh)1019 255 y Fi(The)15 b Fd(getArgs)f
Fi(computation)f(\(whose)j(t)o(yp)q(e)g(is)f Fd(IO)977
304 y([String])p Fi(\))10 b(returns)j(a)e(list)g(of)g(strings)h(whic)o
(h)g(are)g(the)977 354 y(argumen)o(ts)17 b(to)h(the)h(program.)28
b(The)19 b Fd(hClose)d Fi(func-)977 404 y(tion)j(closes)h(a)f
(previously)f(op)q(ened)j(handle.)33 b(Once)977 454 y(closed,)20
b(no)e(further)h(I/O)g(can)f(b)q(e)h(p)q(erformed)g(on)f(a)977
504 y(handle.)f(In)11 b(this)h(particular)f(program,)f(the)h(t)o(w)o(o)
g(uses)977 553 y(of)e Fd(hClose)g Fi(are)h(sup)q(er\015uous,)i(since)f
(all)e(op)q(en)h(handles)977 603 y(are)k(automatically)c(closed)k(when)
f(the)h(program)e(ter-)977 653 y(minates.)27 b(It)18
b(is)f(generally)g(go)q(o)q(d)g(practice)i(to)e(close)977
703 y(op)q(en)12 b(handles)g(once)h(they)f(are)g(\014nished)h(with.)k
(Man)o(y)977 753 y(op)q(erating)f(systems)g(allo)o(w)f(a)g(program)g
(only)g(a)h(lim-)977 803 y(ited)e(n)o(um)o(b)q(er)f(of)g(liv)o(e)g
(references)k(to)c(\014le)h(system)g(ob-)977 852 y(jects.)977
960 y Fb(ReadW)l(rite)g(Mo)q(de)977 1036 y Fd(ReadWriteMode)22
b Fi(allo)o(ws)h(programmers)g(to)h(mak)o(e)977 1086
y(small)8 b(incremen)o(tal)i(c)o(hanges)i(to)e(text)h(\014les.)18
b(This)10 b(can)977 1136 y(b)q(e)k(m)o(uc)o(h)e(more)g(e\016cien)o(t)i
(than)f(reading)g(a)g(complete)977 1186 y(\014le)i(as)g(a)g(stream)g
(and)g(writing)g(this)g(bac)o(k)g(to)g(a)g(new)977 1235
y(\014le.)977 1343 y Fb(Lazy)h(Input)e(Streams)977 1419
y Fi(The)i Fd(hGetContents)c Fi(function)j(is)g(used)i(to)e(em)o(ulate)
977 1469 y(stream)e(I/O)h(b)o(y)g(reading)f(the)i(con)o(ten)o(ts)g(of)e
(a)h(handle)977 1519 y(lazily)i(on)g(demand.)27 b(F)m(or)16
b(example,)h(the)g Fd(interact)977 1569 y Fi(function)d(can)g(b)q(e)g
(de\014ned)h(b)o(y:)977 1648 y Fd(interact)20 b(f)i(=)1042
1698 y(hGetContents)e(stdin)108 b(>>=)21 b(\\)g(s)h(->)1042
1748 y(hPutStr)f(stdout)f(\(f)i(s\))977 1827 y Fi(A)33
b(handle)g(b)q(ecomes)h(semi-closed)e(as)h(so)q(on)g(as)977
1877 y(it)h(is)g(read)g(lazily)f(using)h(a)g Fd(getContents)d
Fi(or)977 1927 y Fd(hGetContents)12 b Fi(op)q(eration.)22
b(In)15 b(this)g(situation,)f(the)977 1977 y(handle)j(is)g(e\013ectiv)o
(ely)g(closed)h(for)e(all)g(purp)q(oses)i(ex-)977 2026
y(cept)h(lazy)e(reading)g(of)g(the)h(con)o(ten)o(ts)g(of)f(its)h
(\014le,)f(or)977 2076 y(closing)e(the)g(handle)g(explicitly)m(.)20
b(If)15 b(an)g(error)h(o)q(ccurs)977 2126 y(on)g(a)h(semi-closed)e
(handle)i(it)f(is)g(simply)f(discarded.)977 2176 y(This)f(is)g(b)q
(ecause)j(it)d(is)g(not)g(p)q(ossible)h(to)f(inject)h(error)977
2226 y(v)n(alues)c(in)o(to)g(the)i(stream)e(of)g(results:)18
b Fd(hGetContents)977 2276 y Fi(returns)f(a)e(lazy)f(list)h(of)g(c)o
(haracters,)h(and)f(only)g(com-)977 2325 y(putations)f(of)f(t)o(yp)q(e)
h Fd(IO)g Fh(a)g Fi(can)g(fail!)1019 2375 y(Normally)i(semi-closed)i
(handles)i(will)d(b)q(e)j(closed)977 2425 y(automatically)14
b(when)j(the)g(con)o(ten)o(ts)h(of)e(the)h(asso)q(ci-)977
2475 y(ated)g(stream)f(ha)o(v)o(e)g(b)q(een)i(read)f(completely)m(.)24
b(Occa-)977 2525 y(sionally)m(,)11 b(ho)o(w)o(ev)o(er,)i(the)g
(programmer)e(ma)o(y)g(w)o(an)o(t)i(to)977 2574 y(force)19
b(a)g(semi-closed)f(handle)g(to)h(b)q(e)g(closed)h(b)q(efore)977
2624 y(this)e(happ)q(ens,)h(b)o(y)f(using)f Fd(hClose)g
Fi(\(for)h(instance)g(if)946 2749 y(6)p eop
%%Page: 7 7
7 6 bop 75 26 a Fi(an)13 b(error)g(o)q(ccurs)h(when)g(reading)e(a)h
(handle,)f(or)h(if)f(the)75 75 y(en)o(tire)17 b(con)o(ten)o(ts)h(is)f
(not)f(needed)j(but)d(the)i(\014le)e(m)o(ust)75 125 y(b)q(e)c(o)o(v)o
(erwritten)f(with)g(a)f(new)i(v)n(alue\).)k(In)11 b(suc)o(h)h(a)e(case)
75 175 y(the)i(con)o(ten)o(ts)h(of)e(the)h(lazy)f(input)g(list)g(are)h
(implemen-)75 225 y(tation)h(dep)q(enden)o(t.)75 333
y Fb(File)h(Lo)q(c)o(king)75 409 y Fi(A)k(frequen)o(t)h(problem)e(with)
h(Hask)o(ell)f(1.2)g(w)o(as)h(that)75 459 y(implemen)o(tatio)o(ns)13
b(w)o(ere)j(not)g(required)g(to)f(lo)q(c)o(k)g(\014les)75
509 y(when)e(they)g(w)o(ere)h(op)q(ened.)19 b(Consequen)o(tly)m(,)12
b(if)g(a)h(pro-)75 559 y(gram)d(op)q(ened)i(a)f(\014le)h(again)e(for)h
(writing)g(while)f(it)i(w)o(as)75 609 y(still)18 b(b)q(eing)h(read,)h
(the)f(results)h(returned)h(from)c(the)75 659 y(read)f(could)g(b)q(e)g
(garbled.)23 b(Because)18 b(of)d(lazy)h(ev)n(alua-)75
708 y(tion)11 b(and)g(implicit)e(bu\013ering)j(\(also)f(not)h(sp)q
(eci\014ed)h(b)o(y)75 758 y(Hask)o(ell)i(1.2\),)g(it)h(w)o(as)g(p)q
(ossible)g(for)f(this)h(to)g(happ)q(en)75 808 y(on)h(some)e(but)i(not)g
(all)f(program)f(executions.)28 b(This)75 858 y(problem)15
b(only)h(o)q(ccurs)i(with)f(languages)f(whic)o(h)h(im-)75
908 y(plemen)o(t)12 b(lazy)h(stream)f(input)h(\(\022)-21
b(a)13 b(la)f Fd(hGetContents)p Fi(\))75 957 y(and)i(also)f(ha)o(v)o(e)
h(non-strict)g(seman)o(tics.)117 1007 y(In)26 b(general)i(it)e(is)h
(hard)g(for)g(programmers)e(to)75 1057 y(a)o(v)o(oid)17
b(op)q(ening)i(a)f(\014le)h(when)h(it)e(has)h(already)f(b)q(een)75
1107 y(op)q(ened)13 b(in)e(an)g(incompatible)f(w)o(a)o(y)m(.)16
b(Almost)10 b(all)h(non-)75 1157 y(trivial)19 b(programs)f(op)q(en)j
(user-supplied)g(\014lenames,)75 1206 y(and)f(there)h(is)f(often)g(no)g
(w)o(a)o(y)f(of)h(telling)f(from)f(the)75 1256 y(names)c(whether)i(t)o
(w)o(o)f(\014lenames)f(refer)i(to)f(the)g(same)75 1306
y(\014le.)k(The)c(only)e(safe)h(thing)g(to)g(do)g(is)g(implemen)o(t)d
(\014le)75 1356 y(lo)q(c)o(ks)16 b(whenev)o(er)i(a)f(\014le)f(is)g(op)q
(ened.)27 b(This)17 b(could)f(b)q(e)75 1406 y(done)k(b)o(y)g(the)g
(programmer)d(if)i(a)h(suitable)g(lo)q(c)o(king)75 1456
y(op)q(eration)f(w)o(as)g(pro)o(vided,)h(but)f(to)g(b)q(e)g(secure)i
(this)75 1505 y(w)o(ould)11 b(need)j(to)e(b)q(e)h(done)f(on)g(ev)o(ery)
h Fd(openFile)e Fi(op)q(er-)75 1555 y(ation,)k(and)h(migh)o(t)e(also)h
(require)i(kno)o(wledge)f(of)f(the)75 1605 y(op)q(erating)f(system.)117
1655 y(The)f(de\014nition)g(requires)i(that)f(iden)o(tical)e(\014les)i
(are)75 1705 y(lo)q(c)o(k)o(ed)19 b(against)g(acciden)o(tal)g(o)o(v)o
(erwriting)g(within)g(a)75 1754 y(single)c(Hask)o(ell)g(program)e
(\(single-writer,)j(m)o(ultiple-)75 1804 y(reader\).)22
b(Tw)o(o)14 b(ph)o(ysical)h(\014les)g(are)g(certainly)g(iden)o(ti-)75
1854 y(cal)g(if)f(they)h(ha)o(v)o(e)g(the)g(same)f(\014lename,)g(but)h
(ma)o(y)e(b)q(e)75 1904 y(iden)o(tical)f(in)h(other)g(circumstances.)19
b(A)13 b(go)q(o)q(d)f(imple-)75 1954 y(men)o(tation)i(will)g(use)j(op)q
(erating-system)e(lev)o(el)g(lo)q(c)o(k-)75 2003 y(ing)e(\(mandatory)g
(or)h(advisory\),)f(if)g(they)h(are)h(appro-)75 2053
y(priate,)f(to)f(protect)j(the)e(user's)h(data)f(\014les.)k(Ev)o(en)d
(so,)75 2103 y(the)j(de\014nition)g Fh(only)g Fi(requires)h(an)e
(implemen)o(tatio)o(n)75 2153 y(to)12 b(tak)o(e)h(precautions)g(to)f(a)
o(v)o(oid)f(ob)o(vious)h(and)g(p)q(ersis-)75 2203 y(ten)o(t)17
b(problems)f(due)h(to)f(lazy)h(\014le)f(I/O)h(\(a)f(language)75
2253 y(feature\):)i(it)12 b Fh(do)n(es)h(not)f Fi(require)h(the)g
(implemen)o(tatio)o(n)75 2302 y(to)f(protect)i(against)d(in)o
(terference)k(b)o(y)d(other)h(applica-)75 2352 y(tions)h(or)g(the)g(op)
q(erating)g(system)f(itself.)75 2460 y Fb(File)h(Size)75
2537 y Fi(F)m(or)j(a)g(handle)h Fh(hd)r(l)g Fi(whic)o(h)f(attac)o(hed)h
(to)g(a)f(ph)o(ysical)75 2586 y(\014le,)11 b(computation)e
Fd(hFileSize)f Fh(hd)r(l)j Fi(returns)h(the)g(size)977
26 y(of)j(that)h(\014le)f(as)h(an)f(in)o(tegral)g(n)o(um)o(b)q(er)g(of)
f(b)o(ytes.)24 b(On)977 75 y(some)16 b(op)q(erating)h(systems)g(it)f
(is)h(p)q(ossible)g(that)f(this)977 125 y(will)10 b(not)h(b)q(e)h(an)e
(accurate)j(indication)d(of)g(the)i(n)o(um)o(b)q(er)977
175 y(of)h(c)o(haracters)j(that)e(can)g(b)q(e)g(read)h(from)d(the)i
(\014le.)977 283 y Fb(File)g(Exten)o(ts)977 360 y Fi(On)19
b(systems)g(suc)o(h)h(as)f(the)g(Macin)o(tosh)g(it)g(is)g(m)o(uc)o(h)
977 409 y(more)c(e\016cien)o(t)i(to)g(de\014ne)g(the)g(maxim)o(um)12
b(size)17 b(of)f(a)977 459 y(\014le)k(\(or)g(exten)o(t\))h(when)f(it)g
(is)f(created,)k(and)c(to)h(in-)977 509 y(crease)d(this)e(exten)o(t)h
(b)o(y)e(the)i(total)e(n)o(um)o(b)q(er)g(of)h(b)o(ytes)977
559 y(written)k(if)f(the)h(\014le)g(is)f(app)q(ended)i(to,)f(rather)g
(than)977 609 y(increasing)13 b(the)g(\014le)g(size)g(eac)o(h)h(time)d
(a)h(blo)q(c)o(k)h(of)f(data)977 659 y(is)j(written.)23
b(This)15 b(ma)o(y)e(allo)o(w)h(a)g(\014le)i(to)f(b)q(e)h(laid)e(out)
977 708 y(con)o(tiguously)d(on)g(disk,)g(for)g(example,)f(and)h
(therefore)977 758 y(accessed)i(more)d(e\016cien)o(tly)m(.)16
b(In)11 b(an)o(y)f(case,)i(the)g(actual)977 808 y(\014le)i(size)h(will)
d(b)q(e)i(no)g(greater)h(than)f(the)g(exten)o(t.)1019
858 y(While)h(e\016cien)o(t)h(\014le)g(access)i(is)d(a)h(desirable)g(c)
o(har-)977 908 y(acteristic,)21 b(the)g(designers)f(felt)g(that)f
(dealing)g(with)977 957 y(this)h(asp)q(ect)i(of)e(I/O)g(led)h(to)f(a)g
(design)g(whic)o(h)h(w)o(as)977 1007 y(o)o(v)o(er-complex)14
b(for)h(the)h(normal)d(programmer.)20 b(The)977 1057
y(Hask)o(ell)12 b(I/O)h(de\014nition)f(therefore)i(do)q(es)f(not)g
(distin-)977 1107 y(guish)j(b)q(et)o(w)o(een)h(\014le)f(size)h(\(the)g
(n)o(um)o(b)q(er)e(of)g(b)o(ytes)i(in)977 1157 y(the)d(\014le\),)f(and)
g(\014le)g(exten)o(t)h(\(the)g(amoun)o(t)d(of)h(disk)h(o)q(c-)977
1206 y(cupied)h(b)o(y)g(a)g(\014le\).)977 1323 y Fc(3.3)56
b(Bu\013ering)977 1399 y Fi(Explicit)25 b(con)o(trol)g(of)g
(bu\013ering)h(is)g(imp)q(ortan)o(t)e(in)977 1449 y(man)o(y)13
b(applications,)i(including)f(ones)i(that)f(need)i(to)977
1499 y(deal)9 b(with)h(ra)o(w)f(devices)i(\(suc)o(h)g(as)f(disks\),)g
(ones)h(whic)o(h)977 1549 y(need)j(instan)o(taneous)f(input)f(from)f
(the)j(user,)f(or)g(ones)977 1599 y(whic)o(h)c(are)h(in)o(v)o(olv)o(ed)
e(in)h(comm)o(unication.)14 b(Examples)977 1648 y(migh)o(t)8
b(b)q(e)j(in)o(teractiv)o(e)g(m)o(ultimedia)c(applications,)i(or)977
1698 y(programs)g(suc)o(h)h(as)g Fd(telnet)p Fi(.)15
b(In)10 b(the)g(absence)i(of)d(suc)o(h)977 1748 y(strict)j(bu\013ering)
g(seman)o(tics,)e(it)h(can)h(also)e(b)q(e)i(di\016cult)977
1798 y(to)k(reason)h(\(ev)o(en)g(informally\))c(ab)q(out)j(the)h(con)o
(ten)o(ts)977 1848 y(of)c(a)g(\014le)g(follo)o(wing)e(a)i(series)i(of)d
(in)o(teracting)i(I/O)f(op-)977 1897 y(erations.)1019
1947 y(Three)j(kinds)f(of)f(bu\013ering)i(are)f(supp)q(orted:)22
b(line-)977 1997 y(bu\013ering,)10 b(blo)q(c)o(k-bu\013ering)f(or)h
(no-bu\013ering.)16 b(These)977 2047 y(mo)q(des)i(ha)o(v)o(e)h(the)g
(follo)o(wing)d(e\013ects.)35 b(F)m(or)19 b(output,)977
2097 y(items)f(are)h(written)g(out)f(from)f(the)i(in)o(ternal)f
(bu\013er)977 2146 y(according)c(to)g(the)g(bu\013er)h(mo)q(de:)1019
2229 y Fa(\017)20 b Fb(line-bu\013er)o(in)o(g:)14 b Fi(the)e(en)o(tire)
g(bu\013er)h(is)e(written)1060 2279 y(out)f(whenev)o(er)h(a)e(newline)h
(is)f(output,)h(the)g(bu\013er)1060 2329 y(o)o(v)o(er\015o)o(ws,)j(a)g
(\015ush)g(is)g(issued,)h(or)f(the)h(handle)f(is)1060
2379 y(closed.)1019 2462 y Fa(\017)20 b Fb(blo)q(c)o(k-bu\013erin)o(g:)
15 b Fi(the)f(en)o(tire)g(bu\013er)h(is)e(writ-)1060
2512 y(ten)i(out)f(whenev)o(er)h(it)f(o)o(v)o(er\015o)o(ws,)g(a)f
(\015ush)i(is)f(is-)1060 2562 y(sued,)g(or)g(the)h(handle)e(is)h
(closed.)946 2749 y(7)p eop
%%Page: 8 8
8 7 bop 117 26 a Fa(\017)20 b Fb(no-bu\013ering)o(:)25
b Fi(output)19 b(is)f(written)h(immedi-)158 75 y(ately)m(,)13
b(and)g(nev)o(er)i(stored)g(in)f(the)g(bu\013er.)75 159
y(The)21 b(bu\013er)g(is)f(emptied)g(as)g(so)q(on)h(as)f(it)g(has)g(b)q
(een)75 208 y(written)14 b(out.)117 258 y(Similarl)o(y)m(,)8
b(input)i(o)q(ccurs)i(according)f(to)f(the)h(bu\013er)75
308 y(mo)q(de)i(for)g(handle)h Fh(hd)r(l)p Fi(.)117 391
y Fa(\017)20 b Fb(line-bu\013er)o(in)o(g:)e Fi(when)e(the)g(bu\013er)g
(for)f Fh(hd)r(l)h Fi(is)158 441 y(not)g(empt)o(y)m(,)e(the)i(next)g
(item)e(is)i(obtained)f(from)158 491 y(the)22 b(bu\013er;)k(otherwise,)
e(when)f(the)f(bu\013er)h(is)158 540 y(empt)o(y)m(,)15
b(c)o(haracters)j(up)f(to)f(and)g(including)g(the)158
590 y(next)23 b(newline)f(c)o(haracter)h(are)g(read)f(in)o(to)g(the)158
640 y(bu\013er.)c(No)11 b(c)o(haracters)h(are)f(a)o(v)n(ailable)e(un)o
(til)h(the)158 690 y(newline)k(c)o(haracter)h(is)f(a)o(v)n(ailable.)117
773 y Fa(\017)20 b Fb(blo)q(c)o(k-bu\013erin)o(g:)h Fi(when)c(the)g
(bu\013er)h(for)e Fh(hd)r(l)158 823 y Fi(b)q(ecomes)j(empt)o(y)m(,)e
(the)i(next)g(blo)q(c)o(k)g(of)e(data)i(is)158 872 y(read)14
b(in)o(to)g(the)g(bu\013er.)117 956 y Fa(\017)20 b Fb(no-bu\013ering)o
(:)d Fi(the)e(next)g(input)f(item)f(is)h(read)158 1005
y(and)g(returned.)117 1088 y(F)m(or)h(most)g(implemen)o(tatio)o(ns,)f
(ph)o(ysical)i(\014les)g(will)75 1138 y(normally)i(b)q(e)j(blo)q(c)o
(k-bu\013ered)g(and)f(terminals)f(will)75 1188 y(normally)11
b(b)q(e)k(line-bu\013ered.)117 1238 y(The)22 b(computation)e
Fd(hSetBuffering)f Fh(hd)r(l)j(mo)n(de)75 1288 y Fi(sets)12
b(the)g(mo)q(de)e(of)g(bu\013ering)i(for)e(handle)h Fh(hd)r(l)g
Fi(on)g(sub-)75 1337 y(sequen)o(t)k(reads)g(and)f(writes)g(as)g(follo)o
(ws.)117 1420 y Fa(\017)20 b Fi(If)34 b Fh(mo)n(de)g
Fi(is)g Fd(LineBuffering)m Fi(,)k(then)d(line-)158 1470
y(bu\013ering)14 b(is)g(enabled)g(if)f(p)q(ossible.)117
1553 y Fa(\017)20 b Fi(If)14 b Fh(mo)n(de)h Fi(is)g Fd(BlockBuffering)c
Fh(m)p Fi(,)k(then)g(blo)q(c)o(k-)158 1603 y(bu\013ering)f(is)g
(enabled)h(if)e(p)q(ossible.)19 b(The)14 b(size)h(of)158
1653 y(the)i(bu\013er)g(is)e Fh(n)i Fi(items)e(if)g Fh(m)h
Fi(is)f Fd(Just)h Fh(n)g Fi(and)g(is)158 1703 y(otherwise)f(implemen)o
(tatio)o(n-dep)q(enden)o(t.)117 1786 y Fa(\017)20 b Fi(If)e
Fh(mo)n(de)g Fi(is)g Fd(NoBuffering)m Fi(,)h(then)f(bu\013ering)h(is)
158 1836 y(disabled)14 b(if)f(p)q(ossible.)75 1919 y(If)e(the)g(mo)q
(de)f(is)h(c)o(hanged)g(from)e Fd(BlockBuffering)f Fi(or)75
1968 y Fd(LineBuffering)j Fi(to)j Fd(NoBuffering)n Fi(,)f(then)117
2051 y Fa(\017)20 b Fi(if)11 b Fh(hd)r(l)h Fi(is)g(writable,)f(the)i
(bu\013er)f(is)g(\015ushed)h(as)f(for)158 2101 y Fd(hFlush)o
Fi(;)117 2184 y Fa(\017)20 b Fi(if)e Fh(hd)r(l)h Fi(is)g(not)g
(writable,)g(the)h(con)o(ten)o(ts)g(of)e(the)158 2234
y(bu\013er)d(is)f(discarded.)117 2317 y(The)g(default)g(bu\013ering)h
(mo)q(de)e(when)i(a)f(handle)h(is)75 2367 y(op)q(ened)21
b(is)e(implemen)o(tation-)o(dep)q(enden)o(t)g(and)g(ma)o(y)75
2417 y(dep)q(end)d(on)e(the)h(ob)r(ject)g(whic)o(h)g(is)f(attac)o(hed)h
(to)f(that)75 2467 y(handle.)36 b(The)20 b(three)h(bu\013er)g(mo)q(des)
e(mirror)g(those)75 2516 y(pro)o(vided)14 b(b)o(y)f(ANSI)i(C.)977
26 y Fb(Flushing)e(Bu\013ers)977 102 y Fi(Sometimes)e(implicit)f
(bu\013ering)j(is)g(inadequate,)g(and)977 152 y(bu\013ers)k(m)o(ust)d
(b)q(e)j(\015ushed)f(explicitly)m(.)22 b(The)16 b(compu-)977
202 y(tation)d Fd(hFlush)f Fh(hd)r(l)i Fi(causes)h(an)o(y)e(items)g
(bu\013ered)i(for)977 252 y(output)g(in)f(handle)h Fh(hd)r(l)f
Fi(to)h(b)q(e)g(sen)o(t)g(immediately)d(to)977 302 y(the)h(op)q
(erating)e(system.)18 b(While)11 b(it)g(w)o(ould,)g(in)h(princi-)977
351 y(ple,)19 b(b)q(e)g(su\016cien)o(t)g(to)f(pro)o(vide)g
Fd(hFlush)f Fi(and)h(a)o(v)o(oid)977 401 y(the)23 b(complexit)o(y)d(of)
h(explicit)h(bu\013er)g(setting,)i(this)977 451 y(w)o(ould)15
b(b)q(e)h(tedious)g(to)g(use)g(for)f(an)o(y)g(kind)h(of)f(bu\013er-)977
501 y(ing)j(other)i(than)f Fd(BlockBuffering)p Fi(.)31
b(It)19 b(w)o(ould)g(b)q(e)977 551 y(prone)c(to)f(error)h(and)f
(require)i(programmer)c(co)q(op)q(er-)977 600 y(ation)k(b)o(y)h(pro)o
(viding)e(optional)h(\015ushing)h(after)g(eac)o(h)977
650 y(I/O)d(op)q(eration)g(when)g(writing)f(library)g(functions.)977
766 y Fc(3.4)56 b(Re-p)r(ositioning)16 b(Handles)977
843 y Fi(Man)o(y)g(applications)f(need)j(direct)f(access)h(to)f
(\014les)f(if)977 893 y(they)i(are)f(to)g(b)q(e)h(implemen)o(ted)d
(e\016cien)o(tly)m(.)27 b(Exam-)977 943 y(ples)17 b(are)f(text)h
(editors,)g(or)f(simple)e(database)j(appli-)977 993 y(cations.)h(These)
c(applications)e(often)h(w)o(ork)g(on)g(read-)977 1042
y(write)k(handles)g(describ)q(ed)h(ab)q(o)o(v)o(e.)26
b(It)17 b(is)f(surprising)977 1092 y(ho)o(w)9 b(complicated)g(suc)o(h)h
(a)f(common)e(and)j(apparen)o(tly)977 1142 y(simple)g(op)q(eration)h
(as)g(c)o(hanging)f(the)i(I/O)f(p)q(osition)g(is)977
1192 y(in)f(practice.)19 b(The)11 b(design)g(giv)o(en)f(here)i(dra)o
(ws)g(hea)o(vily)977 1242 y(on)i(the)g(ANSI)g(C)g(standard.)977
1349 y Fb(Revisiting)e(an)k(I/O)g(p)q(osition)977 1426
y Fi(On)e(some)f(op)q(erating)h(systems)g(or)g(devices,)g(it)g(is)g
(not)977 1476 y(p)q(ossible)g(to)f(seek)i(to)e(arbitrary)h(lo)q
(cations,)e(but)i(only)977 1526 y(to)f(ones)h(whic)o(h)f(ha)o(v)o(e)g
(previously)h(b)q(een)g(visited.)k(F)m(or)977 1576 y(example,)11
b(if)g(newlines)h(in)g(text)h(\014les)f(are)h(represen)o(ted)977
1625 y(b)o(y)e(pairs)h(of)e(c)o(haracters)k(\(as)d(in)g(DOS\),)g(then)h
(the)g(I/O)977 1675 y(p)q(osition)i(will)g(not)h(b)q(e)h(the)g(same)e
(as)h(the)h(n)o(um)o(b)q(er)e(of)977 1725 y(c)o(haracters)21
b(whic)o(h)e(ha)o(v)o(e)f(b)q(een)i(read)g(from)d(the)i(\014le)977
1775 y(up)j(to)f(that)g(p)q(oin)o(t)g(and)h(absolute)f(seeking)h(is)g
(not)977 1825 y(sensible.)c(F)m(unctions)13 b Fd(hGetPosn)e
Fi(and)h Fd(hSetPosn)f Fi(to-)977 1874 y(gether)20 b(pro)o(vide)e(this)
h(functionalit)o(y)m(,)e(using)h(an)h(ab-)977 1924 y(stract)i(t)o(yp)q
(e)f(to)g(represen)o(t)i(the)f(p)q(ositioning)d(infor-)977
1974 y(mation)10 b(\(whic)o(h)j(ma)o(y)e(b)q(e)i(an)g
Fd(Integer)e Fi(or)i(an)o(y)f(other)977 2024 y(suitable)20
b(t)o(yp)q(e\).)36 b(There)21 b(is)e(no)h(w)o(a)o(y)f(to)g(con)o(v)o
(ert)i(a)977 2074 y Fd(handlePosn)11 b Fi(in)o(to)i(an)h
Fd(Integer)e Fi(o\013set.)19 b(This)13 b(is)h(not)977
2123 y(generally)20 b(p)q(ossible.)36 b(A)20 b(programmer)d(can)j
(record)977 2173 y(the)14 b(curren)o(t)i(I/O)e(p)q(osition)f(if)g
(using)h Fd(hSeek)p Fi(.)977 2281 y Fb(Seeking)g(to)h(a)i(new)e(I/O)h
(p)q(osition)977 2358 y Fi(Op)q(erating)g(systems)h(suc)o(h)f(as)h
(Unix)e(or)h(the)h(Macin-)977 2408 y(tosh)i(allo)o(w)f(I/O)h(at)f(an)o
(y)h(p)q(osition)f(in)h(a)g(\014le.)33 b(The)977 2457
y Fd(hSeek)14 b Fi(op)q(eration)h(allo)o(ws)f(three)i(kinds)f(of)f(p)q
(osition-)977 2507 y(ing:)37 b(absolute)24 b(p)q(ositioning)e
Fd(AbsoluteSeek)p Fi(,)i(p)q(o-)977 2557 y(sitioning)d(relativ)o(e)h
(to)h(the)g(curren)o(t)h(I/O)e(p)q(osition)977 2607 y
Fd(RelativeSeek)p Fi(,)16 b(and)j(p)q(ositioning)e(relativ)o(e)h(to)g
(the)946 2749 y(8)p eop
%%Page: 9 9
9 8 bop 75 26 a Fi(curren)o(t)20 b(end-of-\014le)f Fd(SeekFromEnd)p
Fi(.)31 b(Some)17 b(imple-)75 75 y(men)o(tations)12 b(or)i(op)q
(erating)g(systems)f(ma)o(y)f(only)h(sup-)75 125 y(p)q(ort)h(some)f(of)
g(these)j(op)q(erations.)117 175 y(All)j(p)q(ositioning)g(o\013sets)j
(are)f(an)f(in)o(tegral)g(n)o(um-)75 225 y(b)q(er)i(of)e(b)o(ytes.)40
b(This)21 b(seems)g(to)g(b)q(e)g(fairly)f(widely)75 275
y(supp)q(orted)j(and)f(is)h(quite)f(simple.)41 b(The)23
b(alterna-)75 325 y(tiv)o(es)17 b(\(suc)o(h)h(as)f(de\014ning)g(p)q
(osition)f(b)o(y)h(the)g(n)o(um)o(b)q(er)75 374 y(of)e(items)g(whic)o
(h)h(can)g(b)q(e)h(read)f(from)e(the)j(\014le\))f(seem)75
424 y(to)i(giv)o(e)f(designs)i(whic)o(h)e(are)i(di\016cult)e(b)q(oth)h
(to)g(un-)75 474 y(derstand)d(and)f(to)f(use.)75 589
y Fc(3.5)56 b(Handle)18 b(Prop)r(erties)75 666 y Fi(There)i(are)f(sev)o
(eral)h(functions)f(that)g(query)g(a)g(han-)75 716 y(dle)33
b(to)g(determine)g(its)g(prop)q(erties:)58 b Fd(hIsOpen)p
Fi(,)75 766 y Fd(hIsClosed)p Fi(,)12 b Fd(hIsReadable)p
Fi(,)g Fd(hIsSeekable)g Fi(and)i(so)75 816 y(on.)41 b(Originally)20
b(w)o(e)i(considered)h(a)f(single)f(op)q(era-)75 865
y(tion)g(to)g(return)h(all)f(the)h(prop)q(erties)g(of)f(a)g(handle.)75
915 y(This)h(pro)o(v)o(ed)h(to)f(b)q(e)h(v)o(ery)f(un)o(wieldy)m(,)h
(and)f(w)o(ould)75 965 y(also)12 b(ha)o(v)o(e)h(b)q(een)h(di\016cult)f
(to)f(extend)j(to)d(co)o(v)o(er)i(other)75 1015 y(prop)q(erties)19
b(\(since)f(Hask)o(ell)e(do)q(es)i(not)g(ha)o(v)o(e)f(named)75
1065 y(records\).)j(The)13 b(op)q(eration)g(w)o(as)h(therefore)g(split)
f(in)o(to)75 1114 y(man)o(y)e(comp)q(onen)o(t)g(op)q(erations,)i(one)f
(for)h(eac)o(h)g(prop-)75 1164 y(ert)o(y)i(that)f(a)h(handle)f(m)o(ust)
f(ha)o(v)o(e.)20 b(Determining)13 b(the)75 1214 y(curren)o(t)g(I/O)f(p)
q(osition)f(is)h(treated)h(as)f(a)g(separate)h(op-)75
1264 y(eration.)117 1314 y(While)h(there)i(are)g Fd(hIsOpen)e
Fi(and)h Fd(hIsClosed)e Fi(op-)75 1363 y(erations,)27
b(there)g(is)d(no)h(w)o(a)o(y)f(to)h(test)h(whether)g(a)75
1413 y(handle)20 b(is)g(semi-closed.)37 b(This)20 b(w)o(as)g(felt)g(to)
g(b)q(e)h(of)75 1463 y(marginal)15 b(utilit)o(y)i(for)g(most)g
(programmers,)g(and)h(is)75 1513 y(easy)c(to)g(de\014ne)h(if)e
(necessary)m(.)75 1593 y Fd(hIsSemiClosed)106 b(::)22
b(Handle)e(->)i(IO)f(Bool)75 1642 y(hIsSemiClosed)e(h)65
b(=)140 1692 y(hIsOpen)21 b(h)326 b(>>=)22 b(\\)f(ho)h(->)140
1742 y(hIsClosed)325 b(>>=)22 b(\\)f(hc)h(->)140 1792
y(return)f(\(not)g(\(ho)g(||)g(hc\)\))75 1907 y Fc(3.6)56
b(T)-5 b(ext)18 b(Input)75 1984 y Fi(The)d(function)f
Fd(hReady)f Fi(determines)h(whether)i(input)75 2034 y(is)e(a)o(v)n
(ailable)d(on)i(a)h(handle.)k(It)c(is)f(in)o(tended)h(for)g(writ-)75
2083 y(ing)22 b(in)o(teractiv)o(e)g(programs)f(or)h(ones)h(whic)o(h)f
(man-)75 2133 y(age)16 b(m)o(ultiple)e(input)i(streams.)25
b(Because)19 b(it)d(is)g(non-)75 2183 y(blo)q(c)o(king,)f(this)h(can)g
(lead)g(to)f(serious)i(ine\016ciency)f(if)75 2233 y(it)e(is)f(used)i
(to)f(p)q(oll)f(sev)o(eral)h(handles.)75 2348 y Fc(3.7)56
b(T)-5 b(ext)18 b(Output)75 2425 y Fi(Most)i(of)e(the)i(text)g(output)f
(op)q(erations)h(whic)o(h)f(are)75 2475 y(pro)o(vided)j(ha)o(v)o(e)g
(already)g(b)q(een)h(describ)q(ed)h(earlier.)75 2525
y(The)12 b(distinction)f(b)q(et)o(w)o(een)i Fd(hPutStr)d
Fi(and)h Fd(hPutText)75 2574 y Fi(is)k(w)o(orth)f(emphasis.)20
b(F)m(unction)14 b Fd(hPutText)f Fi(outputs)75 2624 y(an)o(y)g(v)n
(alue)f(whose)h(t)o(yp)q(e)h(is)f(an)g(instance)g(of)g(the)g
Fd(Text)977 26 y Fi(class,)20 b(quoting)d(strings)i(and)f(c)o
(haracters)i(as)f(neces-)977 75 y(sary)m(.)30 b(F)m(unction)17
b Fd(hPutStr)f Fi(outputs)j(an)e(unformat-)977 125 y(ted)f(stream)f(of)
g(c)o(haracters,)i(so)f(tabs)g(app)q(ear)g(as)f(lit-)977
175 y(eral)d(tab)g(c)o(haracters)i(in)e(the)h(output)f(and)g(so)h(on.)k
(F)m(or)977 225 y(example,)i(the)g(follo)o(wing)e(outputs)i(the)h(t)o
(w)o(o)e(w)o(ords)977 275 y Fd(Hello)c Fi(and)h Fd(World)f
Fi(on)h(a)g(line,)g(separated)i(b)o(y)e(a)g(tab)977 325
y(c)o(haracter,)977 408 y Fd(import)21 b(LibIO)977 457
y(main)g(=)h(putStr)e(stdout)h("Hello\\tWorld\\n")977
540 y Fi(whereas)41 b(the)f(follo)o(wing)d(outputs)j(the)g(string)977
590 y Fd("Hello\\tWorld\\n")p Fi(.)977 673 y Fd(import)21
b(LibIO)977 723 y(main)g(=)h(putText)e(stdout)g("Hello\\tWorld\\n")977
860 y Fj(4)67 b(The)22 b(Other)h(Libraries)977 960 y
Fc(4.1)56 b(LibDirectory)977 1036 y Fi(Op)q(erations)15
b(are)f(pro)o(vided)g(in)f Fd(LibDirectory)f Fi(to)1019
1119 y Fa(\017)20 b Fi(retriev)o(e)38 b(the)g(curren)o(t)g(w)o(orking)e
(directory)1060 1169 y(\()p Fd(getCurrentDirector)o(y)p
Fi(\);)1019 1252 y Fa(\017)20 b Fi(set)13 b(the)g(curren)o(t)g
(directory)g(to)f(a)f(new)i(directory)1060 1302 y(\()p
Fd(setCurrentDirector)o(y)p Fi(\);)1019 1385 y Fa(\017)20
b Fi(list)59 b(the)h(con)o(ten)o(ts)h(of)e(a)g(directory)1060
1435 y(\()p Fd(getDirectoryConten)o(ts)p Fi(\);)1019
1518 y Fa(\017)20 b Fi(delete)c(\014les)g(or)g(directories)g(\()p
Fd(removeFile)e Fi(and)1060 1568 y Fd(removeDirectory)p
Fi(\);)1019 1651 y Fa(\017)20 b Fi(and)50 b(to)f(rename)g(\014les)i(or)
e(directories)1060 1700 y(\()p Fd(renameFile)12 b Fi(and)i
Fd(renameDirectory)p Fi(\).)1019 1783 y(No)19 b(status)i(op)q(erations)
f(are)g(pro)o(vided.)36 b(Hask)o(ell)977 1833 y(1.2)31
b Fd(statusFile)p Fi(/)p Fd(statu)o(sChan)d Fi(w)o(ere)33
b(rarely)m(,)i(if)977 1883 y(ev)o(er,)15 b(used.)21 b(Their)15
b(functionalit)o(y)e(is)h(probably)g(b)q(et-)977 1933
y(ter)i(pro)o(vided)f(b)o(y)g(op)q(erating-system)f(sp)q(eci\014c)j(op)
q(er-)977 1983 y(ations,)c(whic)o(h)h(can)g(giv)o(e)f(more)g(exact)i
(information.)977 2099 y Fc(4.2)56 b(LibSystem)977 2175
y Fi(The)22 b Fd(LibSystem)e Fi(library)h(de\014nes)j(a)d(set)i(of)e
(func-)977 2225 y(tions)e(whic)o(h)h(are)g(used)g(to)g(in)o(teract)g
(directly)g(with)977 2275 y(the)e(Hask)o(ell)e(program's)g(en)o
(vironmen)o(t.)26 b(The)18 b(most)977 2325 y(imp)q(ortan)o(t)9
b(of)g(these)j(are)f Fd(system)p Fi(,)e(whic)o(h)h(in)o(tro)q(duces)977
2375 y(a)16 b(new)h(op)q(erating)f(system)g(task)g(and)g(w)o(aits)g
(for)g(the)977 2425 y(result)g(of)f(that)h(task,)f(and)h
Fd(getArgs)e Fi(whic)o(h)h(returns)977 2474 y(the)21
b(command-li)o(ne)d(argumen)o(ts)i(to)g(the)i(program.)977
2524 y(It)17 b(is)g(p)q(ossible)h(that)f(neither)h(of)f(these)h
(functions)g(is)977 2574 y(a)o(v)n(ailable)f(on)i(a)g(particular)g
(system,)g(for)g(example,)977 2624 y(these)j(commands)c(do)i(not)h
(generally)f(mak)o(e)f(sense)946 2749 y(9)p eop
%%Page: 10 10
10 9 bop 75 26 a Fi(under)16 b(the)f(Macin)o(tosh)f(op)q(erating)h
(system)g(\(though)75 75 y(they)f(do)f(mak)o(e)f(some)g(sense)j(when)f
(applications)e(are)75 125 y(run)i(under)g(command-based)d(shells)j
(suc)o(h)g(as)g(MPW)75 175 y(or)g(AppleScript\).)21 b(When)15
b(using)f Fd(system)g Fi(note)g(that)75 225 y(the)j(commands)d(whic)o
(h)i(are)h(pro)q(duced)g(are)g(op)q(erat-)75 275 y(ing)j(system)h(dep)q
(enden)o(t.)42 b(It)21 b(is)g(en)o(tirely)g(p)q(ossible)75
325 y(that)c(these)i(commands)c(ma)o(y)g(not)j(b)q(e)g(a)o(v)n(ailable)
d(on)75 374 y(someone)j(else's)h(system,)g(so)f(programs)f(whic)o(h)i
(use)75 424 y Fd(system)f Fi(ma)o(y)f(not)i(b)q(e)g(p)q(ortable.)34
b(Here)20 b(is)f(ho)o(w)g(to)75 474 y(create)13 b(a)e(soft-link)o(ed)g
(alias)g(to)g(a)g(\014le)h(under)g(Berk)o(eley)75 524
y(or)i(similar)d(Unixes.)75 607 y Fd(module)21 b(Link)g(where)75
657 y(import)g(LibSystem)75 706 y(link)g(old)g(new)g(=)140
756 y(system)g(\("ln)g(-s)g("++old++")f("++new\))75 864
y Fb(Exit)15 b(Co)q(des)75 941 y Fi(As)10 b(describ)q(ed)i(earlier)d
(in)h(Section)g(2.3,)f(programs)f(can)75 991 y(terminate)14
b(immediately)e(and)i(return)i(an)f(exit)g(co)q(de)75
1040 y(to)21 b(the)g(op)q(erating)f(system)h(using)f
Fd(exitWith)p Fi(.)37 b(Its)75 1090 y(argumen)o(t)13
b(is)h(of)g(t)o(yp)q(e)h Fd(ExitCode)p Fi(,)d(whose)j(only)e(con-)75
1140 y(structors)j(are)e Fd(ExitSuccess)e Fi(and)h Fd(ExitFailure)p
Fi(.)75 1248 y Fb(En)o(vironmen)o(t)f(V)l(ariables)75
1325 y Fi(Simple)k(access)j(to)e(en)o(vironmen)o(t)g(v)n(ariables)g(is)
g(sup-)75 1374 y(p)q(orted)g(through)f(the)h Fd(getEnv)e
Fi(computation.)23 b(This)75 1424 y(functionalit)o(y)16
b(is)h(generally)g(a)o(v)n(ailable)e(in)i(most)f(op-)75
1474 y(erating)h(systems)h(in)f(some)g(form)e(or)j(other.)29
b(When)75 1524 y(a)o(v)n(ailable)20 b(it)h(pro)o(vides)h(a)f(useful)h
(w)o(a)o(y)f(of)g(comm)o(u-)75 1574 y(nicating)c(infrequen)o(tly-c)o
(hanged)g(information)e(to)i(a)75 1623 y(program)c(\(whic)o(h)h(it)h
(is)f(incon)o(v)o(enien)o(t)g(to)h(sp)q(ecify)g(on)75
1673 y(the)f(command-line)d(for)j(shell-based)g(systems\).)75
1789 y Fc(4.3)56 b(LibTime)16 b(and)j(LibCPUTime)75 1866
y Fi(The)i Fd(LibTime)d Fi(library)i(pro)o(vides)g(op)q(erations)g
(that)75 1916 y(access)26 b(time)c(and)i(date)h(information)c(\(useful)
j(for)75 1966 y(timestamping)8 b(or)k(for)f(timing)d(purp)q(oses\),)13
b(including)75 2016 y(simple)g(data)i(arithmetic)e(and)i(simple)e(text)
j(output.)75 2065 y(It)g(co)q(di\014es)h(existing)f(practice)h(in)e
(the)i(shap)q(e)f(of)g(the)75 2115 y Fd(Time)i Fi(library)g(pro)o
(vided)g(b)o(y)h Fd(hbc)p Fi(.)32 b(Unlik)o(e)18 b(that)h(li-)75
2165 y(brary)10 b(it)g(is)g(not)g(Unix-sp)q(eci\014c,)i(and)e(it)g(pro)
o(vides)g(sup-)75 2215 y(p)q(ort)22 b(for)f(in)o(ternational)f(time)g
(standards,)k(includ-)75 2265 y(ing)12 b(time-zone)g(information.)j
(Time)c(di\013erences)k(are)75 2314 y(recorded)j(in)e(a)f(meaningful)f
(datat)o(yp)q(e)i(rather)h(than)75 2364 y(as)d(a)g(double-precision)g
(n)o(um)o(b)q(er.)75 2480 y Fc(4.4)56 b(LibUserIn)n(terrupt)75
2557 y Fi(User-pro)q(duced)22 b(in)o(terrupts)e(are)f(the)h(most)e(imp)
q(or-)75 2607 y(tan)o(t)12 b(class)h(of)f(in)o(terrupt)i(whic)o(h)e
(programmers)f(com-)977 26 y(monly)18 b(w)o(an)o(t)h(to)h(handle.)35
b(Almost)18 b(all)h(platforms,)977 75 y(including)14
b(small)e(systems)j(suc)o(h)h(as)f(Macin)o(tosh)g(and)977
125 y(MS/DOS,)10 b(pro)o(vide)g(some)g(abilit)o(y)f(to)i(generate)h
(user-)977 175 y(pro)q(duced)j(in)o(terrupts.)1019 225
y(User)j(in)o(terrupts)g(can)g(b)q(e)g(handled)f(in)g(Hask)o(ell)f(if)
977 275 y(a)d(handler)h(is)g(installed)f(using)g Fd(setUserInterrupt)p
Fi(.)977 325 y(Whenev)o(er)i(a)f(user)i(in)o(terrupt)f(o)q(ccurs,)g
(the)g(program)977 374 y(is)g(stopp)q(ed.)25 b(If)15
b(an)g(in)o(terrupt)h(handler)g(is)g(installed,)977 424
y(this)i(is)g(then)h(executed)h(in)e(place)g(of)g(the)h(program.)977
474 y(If)k(no)g(in)o(terrupt)i(handler)e(is)h(installed,)g(the)h(pro-)
977 524 y(gram)19 b(is)i(simply)e(terminated)i(with)g(an)g(op)q
(erating)977 574 y(system)14 b(failure)f(co)q(de.)19
b(F)m(or)14 b(example,)e(the)j(follo)o(wing)977 623 y(program)c
(installs)h(an)h(in)o(terrupt)g(handler)g Fd(ihandler)977
673 y Fi(that)21 b(prin)o(ts)g Fd(^C)f Fi(on)h Fd(stdout)e
Fi(and)i(then)g(con)o(tin)o(ues)977 723 y(with)14 b(some)f(new)h
(computation.)977 799 y Fd(main)21 b(=)h(setUserInterrup)o(t)d
(ihandler)h(>>)1130 849 y(...)977 899 y(ihandler)g(=)i(\(putStr)e
("^C"\))h(>>)g(...)977 1013 y Fc(4.5)56 b(LibPOSIX)977
1090 y Fi(A)25 b(library)g(\()p Fd(LibPOSIX)p Fi(\))f(has)h(b)q(een)i
(de\014ned)f(that)977 1140 y(builds)i(on)g(the)h(basic)f(monadic)f(I/O)
h(de\014nition)977 1190 y(to)h(pro)o(vide)f(a)h(complete)f(in)o
(terface)h(to)g(POSIX-)977 1239 y(complian)o(t)16 b(op)q(erating)h
(systems.)30 b(There)19 b(is)f(insu\016-)977 1289 y(cien)o(t)11
b(space)g(to)f(describ)q(e)i(this)e(library)f(in)h(detail)g(here,)977
1339 y(but)k(the)h(library)f(includes)g(facilities)g(to)g(manipulate)
977 1389 y(\014le)i(protections,)h(con)o(trol)f(pro)q(cesses,)j(handle)
d(more)977 1439 y(kinds)e(of)f(in)o(terrupt)i(than)f
Fd(userInterrupt)d Fi(etc.)977 1574 y Fj(5)67 b(Com)n(binator)23
b(P)n(arsing)977 1665 y Fi(In)h(this)g(section)g(w)o(e)g(illustrate)g
(monadic)e(I/O)i(in)977 1715 y(Hask)o(ell)c(b)o(y)g(writing)f(a)h
(lexer)h(and)f(parser)i(for)e(un-)977 1765 y(t)o(yp)q(ed)g(lam)o(b)q
(da-calculus.)32 b(Our)20 b(parser)g(recognises)977 1815
y(strings)c(of)f(c)o(haracters)j(input)d(from)f(a)i(handle.)23
b(The)977 1865 y(c)o(haracters)c(are)e(\014rst)g(group)q(ed)h(in)o(to)e
Fh(tokens)h Fi(b)o(y)g(the)977 1914 y(lexer.)g(The)11
b(parser)g(acts)g(on)f(the)h(sequence)h(of)d(tok)o(ens.)977
2021 y Fb(A)16 b(Lexer)977 2097 y Fi(A)11 b(tok)o(en)h(is)f(either)h
(an)f(alphan)o(umeric)e(iden)o(ti\014er)j(\(b)q(e-)977
2147 y(ginning)e(with)g(a)h(letter\),)h(a)f(sp)q(ecial)g(sym)o(b)q(ol)f
(from)f(the)977 2197 y(follo)o(wing)i(list,)977 2273
y Fd(symbols)20 b(=)i("\(\)\\\\=")977 2349 y Fi(or)c(else)i(an)e
(illegal)e(c)o(haracter.)33 b(T)m(ok)o(ens)18 b(are)h(repre-)977
2399 y(sen)o(ted)c(b)o(y)f(the)g(follo)o(wing)e(datat)o(yp)q(e.)977
2475 y Fd(data)21 b(Token)1021 2525 y(=)g(ALPHA)g(String)f(|)i(SYMBOL)f
(Char)1021 2574 y(|)g(ILLEGAL)g(Char)f(|)i(EoF)1021 2624
y(deriving)e(\(Eq,)h(Text\))935 2749 y Fi(10)p eop
%%Page: 11 11
11 10 bop 75 26 a Fi(The)18 b Fd(EoF)f Fi(tok)o(en)h(indicates)f(end)i
(of)d(\014le.)30 b(Here)18 b(is)g(a)75 75 y(simpler)13
b(lexer.)75 154 y Fd(hGetToken)20 b(::)h(Handle)g(->)g(IO)h(Token)75
204 y(hGetToken)e(h)i(=)119 253 y(hIsEOF)e(h)i(>>=)f(\\b)g(->)119
303 y(if)g(b)h(then)f(return)f(EoF)h(else)119 353 y(hGetChar)f(h)h(>>=)
g(\\c)h(->)119 403 y(if)f(isSpace)f(c)i(then)f(hGetToken)f(h)h(else)119
453 y(if)g(isAlpha)f(c)i(then)f(hGetAlpha)f(h)h([c])h(else)119
503 y(if)f(c)h(`elem`)e(symbols)g(then)162 552 y(return)h(\(SYMBOL)f
(c\))119 602 y(else)162 652 y(return)h(\(ILLEGAL)f(c\))75
752 y(hGetAlpha)g(::)h(Handle)g(->)g(String)g(->)g(IO)h(Token)75
801 y(hGetAlpha)e(h)i(cs)f(=)119 851 y(hIsEOF)f(h)i(>>=)f(\\b)g(->)h
(if)f(b)h(then)162 901 y(return)f(\(ALPHA)f(\(reverse)g(cs\)\))h(else)
119 951 y(hLookAhead)e(h)j(>>=)f(\\c)g(->)119 1001 y(if)g(isAlphanum)f
(c)h(then)162 1050 y(hGetChar)f(h)i(>>)f(hGetAlpha)f(h)i(\(c)f(:)h
(cs\))119 1100 y(else)162 1150 y(return)f(\(ALPHA)f(\(reverse)g(cs\)\))
75 1228 y Fi(If)d Fh(h)h Fi(is)g(a)f(handle,)h Fd(hGetToken)e
Fh(h)i Fi(returns)i Fh(tok)p Fi(,)e(the)75 1278 y(next)g(tok)o(en)g
(readable)g(from)d(handle)j Fh(h)p Fi(.)29 b(The)18 b(lexer)75
1328 y(ignores)c(whitespace)h(when)g(forming)c(tok)o(ens.)75
1435 y Fb(P)o(arser)j(Com)o(binators)75 1512 y Fi(W)m(e)41
b(can)g(write)g(predictiv)o(e)h(recursiv)o(e-descent)75
1561 y(parsers)20 b([2)o(])f(using)f(com)o(binators.)31
b(In)18 b(a)h(predictiv)o(e)75 1611 y(parser)f(the)g(lo)q(ok)n(ahead)e
(tok)o(en)h(unam)o(biguously)d(de-)75 1661 y(termines)f(the)h(recursiv)
o(e)g(function)f(to)g(b)q(e)h(applied)f(at)75 1711 y(eac)o(h)h(p)q(oin)
o(t.)117 1761 y(Our)h(t)o(yp)q(e)g(of)f(parsers)i(is)f(a)f
(parameterised)h(state-)75 1810 y(transformer)e(monad)f(built)i(from)e
(the)i Fd(IO)g Fi(monad.)75 1889 y Fd(type)21 b(Parser)g(a)g(=)119
1939 y(Handle)f(->)i(Token)e(->)i(IO)f(\(a,)g(Token\))75
2017 y Fi(Giv)o(en)c(a)g(handle)g Fh(h)h Fi(and)f(a)g(lo)q(ok)n(ahead)g
(tok)o(en)g Fh(tok)p Fi(0,)75 2067 y(a)e(parser)i(of)e(t)o(yp)q(e)h
Fd(Parser)e Fh(a)i Fi(ma)o(y)e(do)h(one)h(of)f(three)75
2117 y(things.)75 2195 y Fb(Accept)g(a)i(phrase)d(with)h(result)e
Fh(x)k Fb(::)f Fh(a)p Fb(.)21 b Fi(The)158 2245 y(parser)f(consumes)f
(the)g(tok)o(ens)h(of)e(the)i(phrase)158 2295 y(b)o(y)g(calling)f
Fd(hGetToken)f Fh(h)j Fi(and)f(then)h(returns)158 2344
y(\()p Fh(x)p Fi(,)p Fh(tok)p Fi(1\))f(where)i Fh(tok)p
Fi(1)e(is)g(the)h(new)g(lo)q(ok)n(ahead)158 2394 y(tok)o(en.)75
2475 y Fb(F)l(ail)15 b(with)f(a)j(lo)q(ok)m(ahead)e(error.)k
Fi(The)78 b(parser)158 2525 y(consumes)40 b(no)f(tok)o(ens)h(and)f
(immedia)o(tely)158 2574 y(fails)30 b(with)g(an)h(error)g(result)h(of)e
(the)h(form)158 2624 y Fd(UserError)12 b Fi(\()p Fd('L')p
Fi(:)p Fh(msg)p Fi(\),)h(a)g Fh(lo)n(okahe)n(ad)j(err)n(or)p
Fi(.)977 26 y Fb(F)l(ail)f(with)f(a)j(parse)e(error.)k
Fi(The)50 b(parser)f(con-)1060 75 y(sumes)24 b(some)f(n)o(um)o(b)q(er)h
(of)f(tok)o(ens)i(and)f(then)1060 125 y(fails)31 b(with)g(an)h(error)h
(v)n(alue)e(of)h(the)g(form)1060 175 y Fd(UserError)12
b Fi(\()p Fd('P')p Fi(:)p Fh(msg)p Fi(\),)h(a)g Fh(p)n(arse)i(err)n(or)
p Fi(.)977 258 y(F)m(ailure)f(with)h(a)g(lo)q(ok)n(ahead)f(error)i(is)f
(used)h(to)f(select)977 308 y(alternativ)o(es)g(based)g(on)f(the)h(lo)q
(ok)n(ahead)e(tok)o(en;)h(fail-)977 358 y(ure)k(with)e(a)h(parse)h
(error)g(indicates)f(an)g(unparsable)977 408 y(input.)j(The)14
b(di\013erence)j(b)q(et)o(w)o(een)f(parse)f(and)f(lo)q(ok)n(a-)977
457 y(head)g(errors)i(is)e(co)q(ded)h(using)f(the)h(\014rst)g(c)o
(haracter)g(of)977 507 y(the)h(error)h(string.)24 b(It)15
b(w)o(ould)g(b)q(e)i(b)q(etter)g(to)e(use)i(t)o(w)o(o)977
557 y(di\013eren)o(t)i(constructors,)j(but)c(there)i(is)f(no)f(w)o(a)o
(y)g(for)977 607 y(programs)13 b(to)g(extend)i Fd(IOError)p
Fi(.)1019 657 y(The)h(top)g(of)f(App)q(endix)h(B)g(sho)o(ws)h(op)q
(erations)f(on)977 706 y(error)d(v)n(alues.)k(Computation)11
b Fd(lookaheadError)e Fh(x)j(y)977 756 y Fi(immediately)j(fails)j(with)
h(a)f(lo)q(ok)n(ahead)g(error)h(indi-)977 806 y(cating)k(that)g
Fh(x)h Fi(w)o(as)f(exp)q(ected)i(b)o(y)e Fh(y)g Fi(w)o(as)g(found.)977
856 y(Predicate)17 b Fd(isLookahead)d Fi(determines)i(whether)i(an)977
906 y(error)28 b(v)n(alue)e(is)h(a)g(lo)q(ok)n(ahead)f(error.)58
b(Whether)977 956 y Fh(e)22 b Fi(is)f(a)h(parse)g(or)g(lo)q(ok)n(ahead)
e(error,)k(computation)977 1005 y Fd(mkParseError)12
b Fh(e)j Fi(turns)g(it)f(in)o(to)g(a)h(parse)g(error)h(and)977
1055 y(then)f(fails)d(with)i(it.)1019 1105 y(The)i(middle)e(of)h(App)q
(endix)h(B)g(sho)o(ws)g(the)g(imple-)977 1155 y(men)o(tation)c(of)h
(the)h Fd(Parser)f Fi(monad.)j(T)m(ok)o(en)d(matc)o(h-)977
1205 y(ing)20 b(is)h(p)q(erformed)g(b)o(y)g Fd(match)p
Fi(.)38 b(Its)22 b(second)g(argu-)977 1254 y(men)o(t)13
b(is)g(a)h(predicate)h(of)e(t)o(yp)q(e)h Fd(Token)21
b(->)g(Maybe)g Fh(a)p Fi(.)977 1304 y(Giv)o(en)12 b(an)g(error)h
(string)f Fh(e)g Fi(and)g(a)g(predicate)i Fh(f)p Fi(,)d(parser)977
1354 y Fd(match)20 b Fh(e)h(f)g Fi(applies)g(the)g(predicate)i(to)d
(the)i(lo)q(ok)n(a-)977 1404 y(head)d(tok)o(en.)34 b(If)19
b(the)h(outcome)e(is)h Fd(Just)g Fh(y)p Fi(,)h(mean-)977
1454 y(ing)c(that)g(the)h(lo)q(ok)n(ahead)f(tok)o(en)g(is)g(accepted,)j
(then)977 1503 y(another)f(one)g(is)f(obtained)g(using)h
Fd(hGetToken)p Fi(,)e(and)977 1553 y(the)j(parser's)h(result)g(is)e
Fh(y)p Fi(.)33 b(Otherwise)20 b(if)e(the)i(out-)977 1603
y(come)d(is)i Fd(Nothing)p Fi(,)e(meaning)f(that)j(the)g(lo)q(ok)n
(ahead)977 1653 y(is)d(rejected,)i(the)f(parser)g(immediately)c(fails)i
(with)h(a)977 1703 y(lo)q(ok)n(ahead)d(error.)1019 1753
y(If)f Fh(p)h Fi(and)g Fh(q)h Fi(are)f(parsers,)h Fh(p)g
Fd(`alt`)e Fh(q)h Fi(is)g(the)g(parser)977 1802 y(that)j(accepts)i(all)
d(the)h(phrases)i(accepted)g(b)o(y)e(either)977 1852
y Fh(p)i Fi(or)f Fh(q)p Fi(,)h(pro)o(vided)f(that)h(the)g(c)o(hoice)g
(is)f(determined)977 1902 y(b)o(y)g(the)i(lo)q(ok)n(ahead)d(tok)o(en.)
30 b(The)18 b(parser)g(\014rst)h(runs)977 1952 y(parser)h
Fh(p)p Fi(.)33 b(If)18 b Fh(p)h Fi(either)h(accepts)h(a)d(phrase)i(or)f
(fails)977 2002 y(with)13 b(a)g(parse)h(error,)g(then)g(so)f(do)q(es)h
Fh(p)g Fd(`alt`)e Fh(q)p Fi(.)18 b(But)977 2051 y(if)c
Fh(p)h Fi(fails)e(with)i(a)f(lo)q(ok)n(ahead)g(error|in)h(whic)o(h)f
(case)977 2101 y(the)i(lo)q(ok)n(ahead)e(is)h(unc)o(hanged)h(but)f
(rejected|then)977 2151 y Fh(q)f Fi(is)g(run)g(instead.)1019
2201 y(F)m(unctions)22 b Fd(returnP)g Fi(and)g Fd(thenP)g
Fi(are)h(the)h(t)o(w)o(o)977 2251 y(standard)38 b(monadic)e(functions,)
44 b(analogous)37 b(to)977 2300 y Fd(return)24 b Fi(and)h
Fd(>>=)g Fi(on)g(the)g Fd(IO)g Fi(monad.)50 b(P)o(arser)977
2350 y Fd(returnP)9 b Fh(x)h Fi(accepts)i(the)f(empt)o(y)f(phrase)h
(and)f(returns)977 2400 y(result)j Fh(x)p Fi(.)18 b(If)11
b(parser)j Fh(p)e Fi(accepts)i(a)e(phrase)h(with)f(result)977
2450 y Fh(x)p Fi(,)17 b(then)g Fh(p)f Fd(`thenP`)f Fh(f)h
Fi(consumes)g(that)g(phrase)i(and)977 2500 y(then)h(acts)g(as)f(parser)
i Fh(f)p Fi(\()p Fh(x)p Fi(\).)31 b(An)o(y)18 b(lo)q(ok)n(ahead)g
(error)977 2550 y(from)13 b Fh(f)p Fi(\()p Fh(x)p Fi(\))h(m)o(ust)g(b)q
(e)h(turned)g(in)o(to)f(a)g(parse)i(error)f(b)q(e-)977
2599 y(cause)i Fh(p)f Fi(ma)o(y)e(already)h(ha)o(v)o(e)h(consumed)f
(tok)o(ens.)25 b(If)935 2749 y(11)p eop
%%Page: 12 12
12 11 bop 75 26 a Fi(parser)19 b Fh(p)f Fi(fails)f(with)g(a)h(lo)q(ok)n
(ahead)e(or)i(parse)h(error,)75 75 y(then)c(so)f(do)q(es)g
Fh(p)g Fd(`thenP`)f Fh(f)p Fi(.)117 125 y(Finally)m(,)7
b(if)i Fh(p)h Fi(is)g(a)f(parser)i(and)e Fh(h)h Fi(a)g(handle,)g
Fd(parse)e Fh(p)75 175 y Fi(is)19 b(the)h(computation)d(that)j(runs)g
Fh(p)f Fi(on)g(the)h(tok)o(ens)75 225 y(obtainable)13
b(using)h Fd(hGetToken)e Fh(h)p Fi(.)117 275 y(The)j(primitiv)o(es)e
(in)i(App)q(endix)g(B)h(are)f(enough)h(to)75 325 y(build)f(arbitrary)g
(predictiv)o(e)h(parsers.)24 b(The)16 b(b)q(ottom)75
374 y(of)10 b(the)h(app)q(endix)g(sho)o(ws)g(some)f(deriv)o(ed)h
(parser)g(func-)75 424 y(tions.)16 b(P)o(arser)11 b Fd(theToken)d
Fh(tok)i Fi(accepts)h(the)g(tok)o(en)e Fh(tok)75 474
y Fi(and)h(returns)h(it)f(as)g(its)g(result.)17 b(P)o(arser)11
b Fd(ident)e Fi(accepts)75 524 y(an)o(y)i(alphan)o(umeric)f(tok)o(en,)i
(and)g(returns)h(its)f Fd(String)75 574 y Fi(represen)o(tation.)21
b(On)15 b(an)o(y)f(other)h(input,)f(b)q(oth)g(these)75
623 y(parsers)h(fail)e(with)g(a)h(lo)q(ok)n(ahead)f(error.)117
673 y(F)m(unction)g Fd(seqP)g Fi(is)g(an)h(unparameterised)g(form)e(of)
75 723 y Fd(thenP)p Fi(;)i(it)h(is)h(analogous)e(to)i
Fd(>>)p Fi(.)22 b(F)m(unction)16 b Fd(><)f Fi(runs)75
773 y(t)o(w)o(o)j(parsers)j(in)d(sequence,)k(and)d(returns)i(their)e
(re-)75 823 y(sults)d(as)g(a)g(pair.)24 b(If)16 b Fh(p)g
Fi(is)f(a)h(parser,)h Fd(repeatP)e Fh(p)h Fi(ap-)75 872
y(plies)d Fh(p)g Fi(rep)q(eatedly)h(un)o(til)e(it)h(fails)e(with)i(a)g
(lo)q(ok)n(ahead)75 922 y(error;)20 b(it)e(returns)h(the)g(list)e(of)h
(accepted)h(results)g(as)75 972 y(its)14 b(result.)75
1080 y Fb(A)i(P)o(arser)75 1156 y Fi(Supp)q(ose)26 b(w)o(e)f(w)o(an)o
(t)g(to)g(parse)g(un)o(t)o(yp)q(ed)h(lam)o(b)q(da-)75
1206 y(calculus)14 b(programs)f(suc)o(h)h(as)g(the)h(follo)o(wing.)75
1288 y Fd(true)21 b(=)h(\\\(x\)\\\(y\)x)75 1338 y(false)f(=)g
(\\\(x\)\\\(y\)y)75 1437 y(zero)g(=)h(\\\(f\)\\\(x\)x)75
1487 y(succ)f(=)h(\\\(n\)\\\(f\)\\\(x\)n\(f)o(\)\(f\(x)o(\)\))75
1569 y Fi(Here)15 b(is)f(a)f(suitable)h(grammar.)75 1650
y Fd(decl)43 b(=)21 b({ident)g("=")g(exp})g(EOF)75 1700
y(exp)65 b(=)21 b(ident)206 1750 y(|)g("\\")h("\(")f(ident)f("\)")i
(exp)206 1800 y(|)f(exp)h("\(")f(exp)g("\)")75 1881 y
Fi(The)12 b(con)o(v)o(en)o(tions)g(are)h(that)f Fh(X)f(Y)h
Fi(means)f Fh(X)h Fi(follo)o(w)o(ed)75 1931 y(b)o(y)k
Fh(Y)p Fi(,)g Fh(X)g Fd(|)g Fh(Y)g Fi(means)f Fh(X)h
Fi(or)g Fh(Y)p Fi(,)g(and)g Fa(f)p Fh(X)p Fa(g)f Fi(means)h(a)75
1981 y(p)q(ossibly)g(empt)o(y)f(sequence)k(of)c Fh(X)p
Fi('s.)25 b(The)17 b(follo)o(wing)75 2031 y(datat)o(yp)q(e)d(represen)o
(ts)j(lam)o(b)q(da-terms.)75 2112 y Fd(data)k(Exp)119
2162 y(=)g(VAR)g(String)g(|)g(LAM)h(String)e(Exp)119
2212 y(|)h(APP)g(Exp)h(Exp)119 2262 y(deriving)e(Text)75
2343 y Fi(As)11 b(usual,)f(w)o(e)h(m)o(ust)f(remo)o(v)o(e)f
(left-recursion)j(to)e(mak)o(e)75 2393 y(the)i(gramma)o(r)c(suitable)j
(for)g(recursiv)o(e)h(descen)o(t)h(pars-)75 2443 y(ing.)75
2525 y Fd(decl0)43 b(=)21 b({decl1})f(EoF)75 2574 y(decl1)43
b(=)21 b(ident)g("=")g(exp0)75 2624 y(exp0)65 b(=)21
b(exp1)g({)h(exp2)f(})977 26 y(exp1)65 b(=)21 b(ident)g(|)g("\\")h
("\(")f(ident)g("\)")g(exp0)977 75 y(exp2)65 b(=)21 b("\(")g(exp0)g
("\)")977 159 y Fi(The)12 b(follo)o(wing)d(recursion)k(equations)f
(represen)o(t)i(this)977 208 y(transformed)f(grammar)e(as)j(predictiv)o
(e)h(parsers.)977 291 y Fd(decl0)21 b(=)1021 341 y(repeatP)f(decl1)h
(`thenP`)f(\\x)h(->)1021 391 y(theToken)f(EoF)h(`seqP`)f(returnP)h(x)
977 491 y(decl1)g(=)1021 540 y(ident)f(`thenP`)h(\\x)g(->)g(eq)h
(`seqP`)1021 590 y(exp0)f(`thenP`)f(\\t)h(->)h(returnP)e(\(x,t\))977
690 y(exp0)h(=)1021 740 y(exp1)g(`thenP`)f(\\t)h(->)1021
789 y(repeatP)f(exp2)h(`thenP`)f(\\ts)h(->)1021 839 y(returnP)f
(\(foldl)g(APP)i(t)f(ts\))977 939 y(exp1)g(=)1021 989
y(\(ident)f(`thenP`)g(\(returnP)h(.)g(VAR\)\))1021 1039
y(`altP`)1021 1088 y(\(lambda)f(`seqP`)g(lp)i(`seqP`)1042
1138 y(ident)f(`thenP`)f(\\x)i(->)f(rp)h(`seqP`)1042
1188 y(exp0)f(`thenP`)g(\\t)g(->)1064 1238 y(returnP)g(\(LAM)f(x)i
(t\)\))977 1337 y(exp2)f(=)1021 1387 y(lp)g(`seqP`)g(exp0)f(`thenP`)h
(\\t)g(->)1021 1437 y(rp)g(`seqP`)g(returnP)f(t)977 1520
y Fi(where)977 1603 y Fd([lp,rp,lambda,eq])e(=)1021 1653
y(map)j(\(theToken)f(.)h(SYMBOL\))g(symbols)1019 1736
y Fi(If)13 b(our)h(main)e(program)g(is)977 1819 y Fd(main)21
b(::)g(IO)h(\(\))977 1869 y(main)f(=)h(parse)e(decl0)h(stdin)g(>>=)g
(print)977 1952 y Fi(here)c(is)e(its)g(output)h(on)f(the)h
(declarations)f(sho)o(wn)h(at)977 2002 y(the)e(b)q(eginning)g(of)f
(this)h(section.)977 2085 y Fd([\("true",)20 b(LAM)h("x")g(\(LAM)g("y")
g(\(VAR)g("x"\)\)\),)999 2134 y(\("false",)f(LAM)h("x")g(\(LAM)g("y")g
(\(VAR)g("y"\)\)\),)999 2184 y(\("cond",)f(LAM)h("b")g(\(LAM)g("t")g
(...\)\),)999 2234 y(\("zero",)f(LAM)h("f")g(\(LAM)g("x")g(...\)\),)999
2284 y(\("succ",)f(LAM)h("n")g(\(LAM)g("f")g(...\)\)])977
2392 y Fb(Discussion)977 2468 y Fi(Com)o(binator)g(parsers|lik)o(e)j
(an)o(y)g(other)g(recursiv)o(e)977 2518 y(descen)o(t)16
b(parsers|are)g(less)f(e\016cien)o(t)g(than)f(b)q(ottom-)977
2568 y(up)c(table-driv)o(en)g(parsers.)18 b(But)10 b(they)h(can)f(b)q
(e)g(quic)o(kly)977 2618 y(and)h(simply)e(written,)j(and)e(for)h(man)o
(y)e(purp)q(oses)k(they)935 2749 y(12)p eop
%%Page: 13 13
13 12 bop 75 26 a Fi(are)13 b(fast)g(enough.)18 b(Previous)c(examples)e
(represen)o(ted)75 75 y(their)j(input)g(as)g(a)f(list,)g(and)h(hence)h
(supp)q(orted)g(arbi-)75 125 y(trary)j(lo)q(ok)n(ahead)e([16)o(].)32
b(Some)18 b(in)g(addition)f(repre-)75 175 y(sen)o(ted)g(their)f(output)
g(as)g(a)g(list)f(of)h(p)q(ossible)g(parses,)75 225 y(to)24
b(cater)i(for)e(am)o(biguous)e(gramma)o(rs)g([3,)h(6,)h(13)o(].)75
275 y(Our)11 b(parsers)h(manage)c(their)j(input)f(imp)q(erativ)o(ely)e
(us-)75 325 y(ing)16 b Fd(hGetToken)p Fi(.)24 b(They)17
b(are)f(predictiv)o(e|they)i(use)75 374 y(only)h(a)g(single)g(lo)q(ok)n
(ahead)f(tok)o(en.)35 b(They)19 b(only)g(re-)75 424 y(turn)k(a)f
(single)g(successful)i(parse.)43 b(But)23 b(this)g(suf-)75
474 y(\014ces)18 b(for)f(man)o(y)e(computer)i(languages,)g(if)f(not)h
(nat-)75 524 y(ural)j(language.)35 b(Managing)19 b(arbitrary)h(lo)q(ok)
n(ahead)75 574 y(w)o(ould)c(require)h(signi\014can)o(t)f
(re-organisation)g(of)g(the)75 623 y(program.)35 b(Of)19
b(course,)k(Hask)o(ell)c(1.3)g(con)o(tin)o(ues)i(to)75
673 y(supp)q(ort)c(stream-st)o(yle)g(parsing)f(via)g(the)h
Fd(interact)75 723 y Fi(function.)h(The)c(standard)h(prelude)g
(includes)f(simple)75 773 y(parsers)h(of)f(t)o(yp)q(e)75
856 y Fd(type)21 b(ReadS)g(a)g(=)h(String)e(->)i([\(a,String\)])75
939 y Fi(and)15 b(prett)o(y-prin)o(ters)j(for)d(t)o(yp)q(es)h(in)g(the)
g Fd(Text)e Fi(class.)75 989 y(The)e(monad)e(dev)o(elop)q(ed)i(in)f
(this)g(section)i(sho)o(ws)e(that)75 1039 y(the)k(com)o(binator)d
(parsing)i(idiom)e(applies)i(to)g(imp)q(er-)75 1088 y(ativ)o(e)j
(parsing)g(to)q(o.)27 b(Our)18 b(monad)d(is)i(more)g(\015exible)75
1138 y(than)g(the)h Fd(ReadS)d Fi(st)o(yle)j(b)q(ecause)g(it)f(allo)o
(ws)f(parsing)75 1188 y(to)h(b)q(e)g(freely)g(mixed)e(with)h(other)i
(imp)q(erativ)o(e)d(com-)75 1238 y(putations.)75 1346
y Fb(Exercises)84 1422 y Fi(\(1\))21 b(Extend)c(the)f(program)e(with)i
(an)g(ev)n(aluator)f(for)158 1472 y(lam)o(b)q(da-calculus)22
b(terms.)49 b(Use)25 b(de)g(Bruijn's)158 1522 y(name-free)16
b(represen)o(tation)i(of)e(lam)o(b)q(da-terms,)158 1572
y(instead)23 b(of)e(the)i(naiv)o(e)f(datat)o(yp)q(e)h(used)g(here.)158
1622 y(Chapter)15 b(9)f(of)g(P)o(aulson's)g(b)q(o)q(ok)g([16)o(])g(is)h
(a)f(go)q(o)q(d)158 1671 y(starting)g(p)q(oin)o(t.)84
1754 y(\(2\))21 b(Extend)26 b(the)g(lexer)g(to)g(recognise)g(n)o
(umerals.)158 1804 y(Extend)16 b(the)g(grammar)c(and)j(parser)h(with)f
(syn-)158 1854 y(tax)e(for)g(n)o(umerals)e(and)i(binary)g(arithmetic)f
(op-)158 1904 y(erators.)84 1987 y(\(3\))21 b(Rewrite)c(the)g(lexer)g
(using)f(a)g(Hask)o(ell)g(arra)o(y)g(to)158 2037 y(dispatc)o(h)i(on)f
(whether)i(the)f(next)g(c)o(haracter)h(is)158 2086 y(whitespace,)c
(alphab)q(etic,)e(sym)o(b)q(olic)f(or)i(illegal.)84 2170
y(\(4\))21 b(Find)d(a)g(grammar)d(that)k(can)g(b)q(e)f(parsed)i(with)
158 2219 y(arbitrary)12 b(lo)q(ok)n(ahead)e(but)i(not)g(b)o(y)f(a)h
(predictiv)o(e)158 2269 y(parser.)84 2352 y(\(5\))21
b(Mo)q(dify)c(the)i Fd(Parser)e Fi(monad)g(to)h(admit)e(arbi-)158
2402 y(trary)k(lo)q(ok)n(ahead.)35 b(Hin)o(t:)29 b(use)21
b(the)f(follo)o(wing)158 2452 y(de\014nition)d(of)g Fd(Parser)p
Fi(,)g(whic)o(h)g(explicitly)g(rep-)158 2502 y(resen)o(ts)h(lo)q(ok)n
(ahead)d(errors)j(rather)f(than)f(using)158 2551 y(the)f(builtin)d
(error-handling)i(mec)o(hanism.)1104 26 y Fd(type)21
b(Parser)f(a)i(=)1147 75 y(Handle)f(->)g([Token])f(->)1147
125 y(IO)i(\([Token],)e(Maybe)g(\(a,)h([Token]\)\))1060
275 y Fi(If)16 b(suc)o(h)h(a)f(parser)h(is)f(run)h(on)e(a)h(handle)g
Fh(h)h Fi(with)1060 325 y(lo)q(ok)n(ahead)h Fh(toks)p
Fi(,)h(it)f(returns)j(pair)d Fd(\()p Fh(toks1)p Fd(,)p
Fh(m)p Fd(\))1060 374 y Fi(where)i Fh(toks1)e Fi(is)h(the)g(new)f(lo)q
(ok)n(ahead,)g(and)h Fh(m)1060 424 y Fi(is)c(either)h
Fd(Nothing)e Fi(if)g(the)i(parse)g(has)f(failed)f(or)1060
474 y Fd(Just)j Fi(\()p Fh(x)p Fi(,)p Fh(toks2)p Fi(\))h(if)f(the)h
(parse)h(w)o(as)e(successful.)1060 524 y(In)10 b(the)h(latter)g(case,)h
Fh(x)e Fi(is)h(the)g(result)g(of)f(the)h(parse)1060 574
y(and)j Fh(toks2)g Fi(is)g(the)g(list)g(of)f(tok)o(ens)h(accepted.)977
711 y Fj(6)67 b(History)15 b(and)h(Related)f(W)-6 b(ork)977
802 y Fi(Monadic)15 b(I/O)g(dates)h(from)e(1989.)21 b(Cupitt)15
b([5)o(])g(built)977 852 y(a)f(functional)e(op)q(erational)h(system)h
(\(KA)o(OS\))h(in)e(Mi-)977 901 y(randa.)20 b(He)c(w)o(as)e(the)i
(\014rst)f(to)g(mak)o(e)e(large-scale)i(use)977 951 y(of)i(t)o(yp)q
(es,)i(similar)c(to)i Fd(IO)g Fh(a)p Fi(,)h(for)f(computations)f(re-)
977 1001 y(turning)21 b(an)g(answ)o(er)h(of)f(t)o(yp)q(e)h
Fh(a)p Fi(.)40 b(Indep)q(enden)o(tly)m(,)977 1051 y(ab)q(out)21
b(the)h(same)f(time,)g(Gordon)g([7])f(prop)q(osed)j(a)977
1101 y(concurren)o(t)13 b(language)d(called)h(PFL+)h(with)f(a)g
(similar)977 1151 y(t)o(yp)q(e)j(constructor.)20 b(1989)12
b(w)o(as)i(also)f(the)h(y)o(ear)g(Moggi)977 1200 y(\014rst)22
b(published)f(his)h(theory)f(of)g(mo)q(dular)e(denota-)977
1250 y(tional)g(seman)o(tics)h([15)o(])f(based)i(on)f(the)h
(categorical)977 1300 y(notion)16 b(of)h(a)f(strong)i(monad.)26
b(Inspired)17 b(b)o(y)g(Moggi,)977 1350 y(W)m(adler)11
b(p)q(opularised)h(monads)e(as)i(a)g(functional)f(pro-)977
1400 y(grammi)o(ng)g(tec)o(hnique)k(for)e(dealing)g(with)g(state)h([19)
o(].)977 1449 y(With)i(P)o(eyton)g(Jones)i(he)f(prop)q(osed)g(an)f
Fd(IO)g Fi(monad,)977 1499 y(similar)e(to)i(the)h(one)f(of)g(this)g
(pap)q(er,)h(for)f(expressing)977 1549 y(I/O)g(in)g(Hask)o(ell)f([18)o
(].)24 b(Gordon's)16 b(b)q(o)q(ok)f([8])g(surv)o(eys)977
1599 y(previous)f(w)o(ork)g(on)g(functional)f(I/O)h(in)f(general)i(and)
977 1649 y(monadic)d(I/O)i(in)g(particular.)k(The)c(con)o(tribution)g
(of)977 1698 y(Hask)o(ell)j(1.3)g(is)h(a)g(detailed)f(standard)i(for)e
(p)q(ortable)977 1748 y(monadic)11 b(I/O)h(in)g(Hask)o(ell,)g(using)g
(handles)g(to)h(access)977 1798 y(the)h(\014le)g(system.)1019
1848 y(There)d(is)e(a)h(go)q(o)q(d)g(deal)f(of)h(curren)o(t)h(w)o(ork)f
(on)g(graph-)977 1898 y(ical)17 b(in)o(terfaces)h(to)f(functional)g
(languages,)g(suc)o(h)h(as)977 1948 y(the)h(w)o(ork)e(on)h(Concurren)o
(t)i(CLEAN)e([1)o(])g(and)g(F)m(ud-)977 1997 y(gets)d([4)o(].)i
(Graphics)d(is)g(b)q(ey)o(ond)g(the)h(in)o(tended)f(scop)q(e)977
2047 y(of)h(Hask)o(ell)g(1.3,)g(but)h(w)o(e)g(w)o(ould)f(w)o(elcome)f
(an)o(y)i(pro-)977 2097 y(p)q(osals)k(for)h(a)f(standard)h(monadic)d
(library)i(for)g(ex-)977 2147 y(pressing)15 b(graphical)e(in)o
(terfaces.)1019 2197 y(Returning)f(an)h(error)h(v)n(alue)e(from)g(a)g
(computation)977 2246 y(is)20 b(analogous)e(to)i(raising)f(an)g
(exception)i(in)e(a)g(lan-)977 2296 y(guage)d(lik)o(e)f(ML,)h(except)i
(that)e(in)g(Hask)o(ell)g(only)f(ex-)977 2346 y(pressions)h(of)e
Fd(IO)g Fi(t)o(yp)q(e)h(ma)o(y)d(return)k(an)e(error)i(v)n(alue.)977
2396 y(See)d(Hammond's)c(b)q(o)q(ok)j([11])f(for)h(a)g(discussion)h(of)
f(er-)977 2446 y(ror)i(v)n(alues)g(in)f(functional)g(languages.)935
2749 y(13)p eop
%%Page: 14 14
14 13 bop 75 26 a Fc(6.1)56 b(Computations)17 b(and)j(E\013ects)75
102 y Fi(The)11 b(t)o(yp)q(e)f Fd(IO)g Fh(a)g Fi(denotes)i
(computations)d(in)h(the)g(same)75 152 y(sense)15 b(as)e
Fd(Integer)f Fi(denotes)j(in)o(tegers)f(and)f Fd(Bool)f
Fi(de-)75 202 y(notes)k(truth-v)n(alues.)21 b(T)m(o)14
b(a)h(\014rst)h(appro)o(ximation)c(at)75 252 y(least)h(w)o(e)h(can)f
(think)g(of)f(computations)g(as)h(functions)75 302 y(whic)o(h)19
b(tak)o(e)g(the)g(state)h(of)e(the)h(w)o(orld)g(as)f(their)i(ar-)75
351 y(gumen)o(t)15 b(and)g(return)j(a)d(pair)h(of)f(an)g(up)q(dated)i
(w)o(orld)75 401 y(and)e(a)g(result)i([18)o(].)22 b(The)16
b(main)d(thread,)j(de\014ned)h(b)o(y)75 451 y Fd(Main.main)p
Fi(,)d(is)h(a)h(sequence)h(of)f(state-transforming)75
501 y(computations)h(of)h(t)o(yp)q(e)h Fd(IO)f Fh(a)p
Fi(,)h(whic)o(h)g(directly)f(ex-)75 551 y(press)f(e\013ects)h(on)e(the)
h(en)o(vironmen)o(t,)e(suc)o(h)h(as)g(c)o(har-)75 600
y(acter)f(I/O,)f(or)h(reading)f(and)g(writing)g(\014les.)19
b(Eac)o(h)c(of)75 650 y(the)k(sequence)h(of)d(computations)g(is)h
(applied)g(to)g(an)75 700 y(implicit)13 b(program)h(state,)i(to)g(pro)q
(duce)g(a)g(new)g(state)75 750 y(together)h(with)e(an)h(in)o
(termediate)f(result.)24 b(The)16 b(new)75 800 y(state)f(and)f(result)h
(is)f(passed)h(to)f(the)h(next)g(computa-)75 849 y(tion)9
b(in)g(the)h(sequence,)i(and)d(so)g(on)h(un)o(til)e(the)i(program)75
899 y(terminates.)117 949 y(Within)19 b(the)i(Hask)o(ell)e(program,)h
(expressions)i(of)75 999 y(t)o(yp)q(e)f Fd(IO)g Fh(a)f
Fi(b)q(eha)o(v)o(e)i(iden)o(tically)d(to)i(other)g(expres-)75
1049 y(sions:)27 b(they)19 b(ma)o(y)e(app)q(ear)i(ev)n(aluated)f(or)g
(unev)n(alu-)75 1099 y(ated)11 b(in)g(lists,)g(b)q(e)g(freely)g
(copied,)g(and)g(so)g(on.)17 b(Hask)o(ell)75 1148 y(expressions)f(do)f
(not)g(ha)o(v)o(e)f(side-e\013ects)j(unless)f(they)75
1198 y(are)d(ev)n(aluated)g(b)o(y)f(the)h(top-lev)o(el)g(thread)g(of)f
(con)o(trol.)75 1314 y Fc(6.2)56 b(P)n(arallelism)75
1391 y Fi(The)20 b(in)o(teraction)f(with)f(parallelism)f(is)i(imp)q
(ortan)o(t,)75 1441 y(esp)q(ecially)d(for)g(extensions)h(of)f(Hask)o
(ell)g(suc)o(h)h(as)f(the)75 1491 y Fd(pH)e Fi(language.)19
b(Handled)14 b(carelessly)m(,)h(I/O)f(could)h(un-)75
1540 y(necessarily)k(serialise)f(computations)e(and)i(th)o(us)g(re-)75
1590 y(duce)d(p)q(erformance.)k(Some)13 b(though)o(t)h(has)g(gone)g(in)
o(to)75 1640 y(this.)19 b(The)14 b(seman)o(tics)g(of)f(I/O)i(is)f
(serialisable)f(in)h(the)75 1690 y(sense)i(that)e(I/O)h(op)q(erations)f
(in)o(teract)h(with)f(the)h(op-)75 1740 y(erating)h(system)h(in)f(the)h
(order)g(they)g(are)g(presen)o(ted)75 1790 y(at)11 b(the)g(top-lev)o
(el.)16 b(If,)11 b(ho)o(w)o(ev)o(er,)g(t)o(w)o(o)f(I/O)h(op)q(erations)
75 1839 y(do)i(not)g(con\015ict)h(\(for)f(example,)f(reading)h(t)o(w)o
(o)g(di\013er-)75 1889 y(en)o(t)19 b(\014les\),)h(then)f(it)g(is)f(en)o
(tirely)h(p)q(ossible)g(for)f(them)75 1939 y(to)13 b(pro)q(ceed)j(in)d
(parallel.)j(It)e(is)g(still)e(necessary)m(,)j(ho)o(w-)75
1989 y(ev)o(er,)e(to)g(ensure)i(that)e(error)h(v)n(alues)e(are)h
(propagated)75 2039 y(as)20 b(de\014ned)h(b)o(y)e(the)i(serial)e(seman)
o(tics.)36 b(This)19 b(ma)o(y)75 2088 y(require)d(a)e(mec)o(hanism)f
(similar)g(to)h(that)h(needed)i(for)75 2138 y(con)o(trolling)c(other)h
(sp)q(eculativ)o(e)h(computations.)75 2275 y Fj(7)67
b(Summary)75 2366 y Fi(W)m(e)16 b(ha)o(v)o(e)h(presen)o(ted)h(a)e
(design)h(for)f(I/O)h(whic)o(h)f(has)75 2416 y(b)q(een)h(adopted)f(in)g
(the)h(Hask)o(ell)e(standard,)h(describ-)75 2466 y(ing)h(some)f(in)o
(teresting)j(asp)q(ects)g(of)e(the)h(design)g(and)75
2516 y(pro)o(viding)11 b(a)h(tutorial)f(on)h(ho)o(w)g(it)g(can)g(b)q(e)
h(used)g(e\013ec-)75 2566 y(tiv)o(ely)m(.)26 b(Being)17
b(based)h(on)e(the)i(use)g(of)e(monads,)g(the)75 2615
y(design)d(is)f(b)q(oth)h(\015exible)f(and)h(extensible.)18
b(Although)977 26 y(only)13 b(a)h(fairly)f(conserv)n(ativ)o(e)i(basic)f
(design)h(has)f(b)q(een)977 75 y(pro)o(vided)20 b(initially)m(,)f(w)o
(e)i(exp)q(ect)h(this)f(to)f(form)f(the)977 125 y(basis)g(for)g(more)f
(radical)g(researc)o(h)j(departures.)35 b(It)977 175
y(already)14 b(pro)o(vides)g(m)o(uc)o(h)f(useful)h(functionalit)o(y)e
(that)977 225 y(w)o(as)i(not)g(previously)f(a)o(v)n(ailable)f(in)h
(Hask)o(ell)h(1.2.)1019 275 y(No)g(formal)d(seman)o(tics)j(for)g(these)
i(I/O)e(primitiv)o(es)977 325 y(is)h(p)q(ossible)g(at)g(presen)o(t,)h
(b)q(ecause)h(there)f(is)f(no)g(com-)977 374 y(plete)22
b(formal)c(seman)o(tics)j(for)g(Hask)o(ell)f(itself.)40
b(W)m(e)977 424 y(hop)q(e)13 b(in)g(future)g(that)g(suc)o(h)h(a)f
(seman)o(tics)f(will)g(b)q(e)h(de-)977 474 y(v)o(elop)q(ed.)33
b(One)20 b(task)f(of)f(suc)o(h)i(a)f(seman)o(tics)f(w)o(ould)977
524 y(b)q(e)c(to)f(sho)o(w)g(that)h(the)g Fd(IO)e Fi(t)o(yp)q(e)i(do)q
(es)g(indeed)g(form)e(a)977 574 y(monad)g(in)h(the)i(categorical)f
(sense.)1019 623 y(Hask)o(ell)f(1.3)g(allo)o(ws)g(programmers)f(to)i
(write)h(pro-)977 673 y(grams)k(that)h(can)g(c)o(hange)h(the)f
(external)h(or)f(global)977 723 y(states)13 b(in)f(an)g(imp)q(erativ)o
(e)f(fashion,)g(but)i(only)e(via)g(ex-)977 773 y(pressions)h(of)f(some)
f(t)o(yp)q(e)i Fd(IO)f Fh(a)p Fi(,)g(and)g(only)f(when)i(they)977
823 y(are)17 b(then)h(in)o(terpreted)g(b)o(y)f(the)g(top-lev)o(el)g
(thread)g(of)977 872 y(con)o(trol.)g(This)10 b(con)o(trasts)h(with)f
(languages)g(lik)o(e)f(LISP)977 922 y(or)15 b(ML,)f(where)i
(expressions)g(of)e(an)o(y)g(t)o(yp)q(e)i(can)f(ha)o(v)o(e)977
972 y(side-e\013ects.)20 b(Our)13 b(hop)q(e)g(is)f(that)h(I/O)f(in)g
(Hask)o(ell)g(1.3)977 1022 y(will)i(b)q(e)j(no)f(less)g(expressiv)o(e)i
(than)e(in)f(LISP)h(or)g(ML,)977 1072 y(and)j(that)h(its)g(t)o(yp)q(e)g
(system)f(can)h(b)q(e)g(exploited)g(b)o(y)977 1122 y(programmers)c(and)
i(compilers)f(to)h(yield)g(clear)h(and)977 1171 y(e\016cien)o(t)14
b(programs.)977 1309 y Fj(Ac)n(kno)n(wledgemen)n(ts)977
1400 y Fi(W)m(e)d(are)h(grateful)g(to)f(the)h(other)h(mem)o(b)q(ers)d
(of)h(Hask)o(ell)977 1449 y(committee)18 b(who)i(ha)o(v)o(e)g(made)f
(man)o(y)f(constructiv)o(e)977 1499 y(commen)o(ts)d(on)i(the)h(I/O)f
(design)g(during)g(its)g(p)q(erio)q(d)977 1549 y(of)10
b(incubation.)16 b(W)m(e)10 b(w)o(ould)g(also)g(lik)o(e)g(to)g(thank)h
(those)977 1599 y(p)q(eople)17 b(who)g(ha)o(v)o(e)g(either)h(con)o
(tributed)f(directly)h(to)977 1649 y(the)i(I/O)f(design,)h(or)f(whose)g
(commen)o(ts)f(ha)o(v)o(e)h(had)977 1698 y(a)c(signi\014can)o(t)h
(impact)e(on)h(the)h(design.)24 b(These)17 b(ha)o(v)o(e)977
1748 y(included)k(Andy)f(Gill)f(and)h(Ian)g(P)o(o)q(ole)g(\(who)g(b)q
(oth)977 1798 y(w)o(ork)o(ed)d(on)f(previous)h(v)o(ersions)h(of)e(the)h
(Hask)o(ell)f(de-)977 1848 y(sign\),)k(Jim)d(Mattson)i(\(who)g
(designed)g Fd(LibPOSIX)p Fi(\),)977 1898 y(Jon)c(F)m(airbairn,)e(Ian)i
(Holy)o(er,)f(Ken)o(t)i(Karlsson,)f(San-)977 1948 y(dra)c(Lo)q(osemo)q
(ore,)g(and)g(Alastair)f(Reid.)17 b(W)m(e)11 b(are)g(also)977
1997 y(grateful)f(to)g(Will)f(P)o(artain)h(and)g(Hans)h(Loidl)e(for)h
(com-)977 2047 y(men)o(ting)15 b(on)h(draft)g(v)o(ersions)h(of)f(this)g
(pap)q(er)h(and)g(to)977 2097 y(the)i(anon)o(ymous)d(referees)21
b(who)d(review)o(ed)h(this)f(pa-)977 2147 y(p)q(er.)43
b(Gordon)22 b(b)q(egan)g(this)g(w)o(ork)g(while)f(a)h(mem-)977
2197 y(b)q(er)13 b(of)f(the)h(Programming)c(Metho)q(dology)j(Group)g
(at)977 2246 y(Chalmers.)22 b(A)o(t)16 b(Cam)o(bridge)e(he)i(w)o(as)g
(supp)q(orted)h(b)o(y)977 2296 y(the)10 b(TYPES)h(BRA)f(and)g(a)f(Univ)
o(ersit)o(y)h(Researc)o(h)h(F)m(el-)977 2346 y(lo)o(wship)i(from)f(the)
j(Ro)o(y)o(al)d(So)q(ciet)o(y)m(.)18 b(Hammond)11 b(w)o(as)977
2396 y(supp)q(orted)22 b(b)o(y)e(a)g(Researc)o(h)i(F)m(ello)o(wship)d
(from)g(the)977 2446 y(Ro)o(y)o(al)12 b(So)q(ciet)o(y)i(of)f(Edin)o
(burgh.)935 2749 y(14)p eop
%%Page: 15 15
15 14 bop 75 26 a Fj(References)96 117 y Fi([1])19 b(P)o(eter)11
b(Ac)o(h)o(ten)f(and)g(Rin)o(us)e(Plasmeijer.)i(The)g(ins)160
166 y(and)i(outs)g(of)f(Concurren)o(t)i(Clean)e(I/O.)k
Fh(Journal)160 216 y(of)g(F)m(unctional)h(Pr)n(o)n(gr)n(amming)p
Fi(,)c(5\(1\),)h(1995.)96 299 y([2])19 b(Alfred)e(V.)f(Aho,)g(Ra)o(vi)f
(Sethi,)h(and)g(Je\013rey)i(D.)160 349 y(Ullman.)11 b
Fh(Compilers:)16 b(Principles,)c(T)m(e)n(chniques)160
399 y(and)k(T)m(o)n(ols)p Fi(.)h(Addison-W)m(esley)m(,)c(1986.)96
482 y([3])19 b(W.)28 b(H.)g(Burge.)61 b Fh(R)n(e)n(cursive)28
b(Pr)n(o)n(gr)n(amming)160 532 y(T)m(e)n(chniques)p Fi(.)19
b(Addison)13 b(W)m(esley)m(,)g(1975.)96 615 y([4])19
b(Magn)o(us)26 b(Carlsson)f(and)h(Thomas)d(Hallgren.)160
665 y(FUDGETS:)d(A)f(graphical)g(user)i(in)o(terface)g(in)160
714 y(a)e(lazy)f(functional)g(language.)32 b(In)19 b
Fh(FPCA'93:)160 764 y(Confer)n(enc)n(e)33 b(on)g(F)m(unctional)g(Pr)n
(o)n(gr)n(amming)160 814 y(L)n(anguages)39 b(and)g(Computer)e(A)o(r)n
(chite)n(ctur)n(e,)160 864 y(Cop)n(enhagen)p Fi(,)24
b(pages)d(321{330.)e(A)o(CM)i(Press,)160 914 y(1993.)96
997 y([5])e(J.)i(Cupitt.)38 b(A)21 b(brief)g(w)o(alk)f(through)g(KA)o
(OS.)160 1046 y(T)m(ec)o(hnical)g(Rep)q(ort)f(58,)h(Computing)e(Lab)q
(ora-)160 1096 y(tory)m(,)28 b(Univ)o(ersit)o(y)e(of)f(Ken)o(t)h(at)g
(Can)o(terbury)m(,)160 1146 y(F)m(ebruary)15 b(1989.)96
1229 y([6])k(R.)h(F)m(rost)h(and)g(J.)f(Launc)o(h)o(bury)m(.)38
b(Construct-)160 1279 y(ing)15 b(natural)g(language)f(in)o(terpreters)k
(in)d(a)g(lazy)160 1329 y(functional)h(language.)25 b
Fh(The)17 b(Computer)g(Jour-)160 1379 y(nal)p Fi(,)d(32\(2\):108{121,)d
(April)i(1989.)96 1462 y([7])19 b(Andrew)c(Gordon.)j(PFL+)c(:)k(A)c(k)o
(ernel)g(sc)o(heme)160 1511 y(for)j(functional)f(I/O.)26
b(T)m(ec)o(hnical)17 b(Rep)q(ort)g(160,)160 1561 y(Univ)o(ersit)o(y)h
(of)f(Cam)o(bridge)f(Computer)h(Lab)q(o-)160 1611 y(ratory)m(,)c(F)m
(ebruary)i(1989.)96 1694 y([8])k(Andrew)g(D.)e(Gordon.)28
b Fh(F)m(unctional)19 b(Pr)n(o)n(gr)n(am-)160 1744 y(ming)h(and)f
(Input/Output)p Fi(.)33 b(Cam)o(bridge)17 b(Uni-)160
1794 y(v)o(ersit)o(y)d(Press,)i(1994.)96 1877 y([9])j(K.)i(Hammond)d
(et)j(al.)38 b(Rep)q(ort)21 b(on)f(the)i(pro-)160 1926
y(gramming)17 b(language)j(Hask)o(ell:)30 b(V)m(ersion)21
b(1.3.)160 1976 y(Y)m(ale)g(Univ)o(ersit)o(y)g(T)m(ec)o(hnical)g(Rep)q
(ort,)i(to)e(ap-)160 2026 y(p)q(ear,)14 b(June)h(1995.)75
2109 y([10])k(K.)14 b(Hammond,)c(J.)k(W.)f(P)o(eterson,)i(et)f(al.)k
(Stan-)160 2159 y(dard)26 b(libraries)f(for)g(the)h(programming)c(lan-)
160 2209 y(guage)12 b(Hask)o(ell:)k(V)m(ersion)11 b(1.3.)j(Y)m(ale)d
(Univ)o(ersit)o(y)160 2259 y(T)m(ec)o(hnical)j(Rep)q(ort,)g(to)f(app)q
(ear,)h(June)h(1995.)75 2342 y([11])k(Kevin)26 b(Hammond.)49
b Fh(PSML:)25 b(a)h(F)m(unctional)160 2391 y(L)n(anguage)16
b(and)e(its)g(Implementation)g(in)g(Dactl)p Fi(.)160
2441 y(Pitman)e(Press,)k(1991.)75 2524 y([12])j(P)o(aul)10
b(Hudak,)g(Simon)f(L.)g(P)o(eyton)i(Jones,)h(Philip)160
2574 y(W)m(adler,)22 b(et)g(al.)38 b(Rep)q(ort)22 b(on)f(the)g
(functional)1062 26 y(programming)i(language)h(Hask)o(ell:)42
b(A)26 b(non-)1062 75 y(strict,)17 b(purely)e(functional)g(language:)20
b(V)m(ersion)1062 125 y(1.2.)13 b Fh(A)o(CM)f(SIGPLAN)h(Notic)n(es)p
Fi(,)d(27\(5\),)h(Marc)o(h)1062 175 y(1992.)17 b(Section)e(R.)977
258 y([13])k(Graham)8 b(Hutton.)j(Higher-order)g(functions)f(for)1062
308 y(parsing.)38 b Fh(Journal)21 b(of)g(F)m(unctional)g(Pr)n(o)n(gr)n
(am-)1062 358 y(ming)p Fi(,)14 b(2\(3\):323{343,)d(July)i(1992.)977
441 y([14])19 b(Ken)o(t)14 b(Karlsson.)i(Nebula:)i(A)12
b(functional)g(op)q(er-)1062 491 y(ating)17 b(system.)28
b(Programming)14 b(Metho)q(dology)1062 540 y(Group,)f(Chalmers)f(Univ)o
(ersit)o(y)i(of)e(T)m(ec)o(hnology)1062 590 y(and)i(Univ)o(ersit)o(y)g
(of)f(Gothen)o(burg,)h(1981.)977 673 y([15])19 b(Eugenio)25
b(Moggi.)49 b(Computational)22 b(lam)o(b)q(da)1062 723
y(calculus)h(and)g(monads.)43 b(In)23 b Fh(Pr)n(o)n(c)n(e)n(e)n(dings)g
(of)1062 773 y(the)13 b(4th)f(IEEE)h(Symp)n(osium)g(on)g(L)n(o)n(gic)f
(in)h(Com-)1062 823 y(puter)i(Scienc)n(e)p Fi(,)f(June)h(1989.)977
906 y([16])k(La)o(wrence)c(C.)d(P)o(aulson.)17 b Fh(ML)d(for)g(the)g
(Working)1062 956 y(Pr)n(o)n(gr)n(ammer)p Fi(.)20 b(Cam)o(bridge)13
b(Univ)o(ersit)o(y)h(Press,)1062 1005 y(1991.)977 1088
y([17])19 b(Nigel)c(P)o(erry)m(.)23 b Fh(The)17 b(Implementation)g(of)f
(Pr)n(ac-)1062 1138 y(tic)n(al)23 b(F)m(unctional)g(Pr)n(o)n(gr)n
(amming)g(L)n(anguages)p Fi(.)1062 1188 y(PhD)10 b(thesis,)h(Departmen)
o(t)e(of)g(Computing,)f(Im-)1062 1238 y(p)q(erial)14
b(College,)f(London,)g(June)h(1991.)977 1321 y([18])19
b(Simon)12 b(L.)h(P)o(eyton)h(Jones)g(and)f(Philip)g(W)m(adler.)1062
1371 y(Imp)q(erativ)o(e)25 b(functional)g(programming.)50
b(In)1062 1420 y Fh(Pr)n(o)n(c)n(e)n(e)n(dings)37 b(20th)g(A)o(CM)f
(Symp)n(osium)h(on)1062 1470 y(Principles)j(of)f(Pr)n(o)n(gr)n(amming)h
(L)n(anguages,)1062 1520 y(Charleston,)13 b(South)i(Car)n(olina,)d
(January)i(1993)p Fi(,)1062 1570 y(pages)h(71{84.)d(A)o(CM)i(Press,)h
(1993.)977 1653 y([19])k(Philip)f(W)m(adler.)33 b(The)19
b(essence)j(of)c(functional)1062 1703 y(programming.)h(In)d
Fh(Pr)n(o)n(c)n(e)n(e)n(dings)g(of)g(the)h(Nine-)1062
1753 y(te)n(enth)22 b(A)o(CM)f(Symp)n(osium)h(on)g(Principles)f(of)1062
1802 y(Pr)n(o)n(gr)n(amming)15 b(L)n(anguages)p Fi(,)f(1992.)935
2749 y(15)p eop
%%Page: 16 16
16 15 bop 75 29 a Fj(A)67 b(Summary)24 b(of)d(I/O)h(Op)r(erations)75
120 y Fi(This)11 b(is)f(an)h(unstructured)i(list)d(of)g(the)i
(\014xities,)e(t)o(yp)q(es,)i(instances,)g(and)f(v)n(alues)f(supp)q
(orted)i(b)o(y)f(the)g(Hask)o(ell)f(1.3)75 170 y(I/O)k(libraries.)75
251 y Fe(infixr)j(1)j(>>,)e(>>=)881 b(--)19 b(Prelude)75
342 y(type)f(IO)h(a)1019 b(--)19 b(Prelude)75 434 y(type)f(Handle)978
b(--)19 b(LibIO)75 479 y(type)f(FilePath)f(=)i(String)762
b(--)19 b(LibIO)75 571 y(data)f(IOMode)96 b(=)19 b(ReadMode)683
b(--)19 b(LibIO)389 616 y(|)g(WriteMode)389 662 y(|)g(AppendMode)389
707 y(|)g(ReadWriteM)o(od)o(e)75 799 y(data)f(BufferMode)e(=)j
(NoBufferin)o(g)624 b(--)19 b(LibIO)389 844 y(|)g(LineBuffer)o(in)o(g)
389 890 y(|)g(BlockBuffe)o(ri)o(ng)d(\(Maybe)i(Int\))75
981 y(data)g(HandlePosn)898 b(--)19 b(LibIO)75 1027 y(data)f(SeekMode)
56 b(=)19 b(AbsoluteSe)o(ek)604 b(--)19 b(LibIO)389 1073
y(|)g(RelativeSe)o(ek)389 1118 y(|)g(SeekFromEn)o(d)75
1210 y(data)f(ExitCode)56 b(=)19 b(ExitSucces)o(s)624
b(--)19 b(LibSystem)389 1255 y(|)g(ExitFailur)o(e)d(Int)75
1347 y(data)i(ClockTime)918 b(--)19 b(LibTime)75 1392
y(instance)e(Ord)h(ClockTime)761 b(--)19 b(LibTime)75
1438 y(instance)e(Eq)38 b(ClockTime)761 b(--)19 b(LibTime)75
1484 y(instance)e(Text)h(ClockTime)741 b(--)19 b(LibTime)75
1529 y(data)f(CalendarTi)o(me)e(=)823 b(--)19 b(LibTime)173
1575 y(CalendarTi)o(me)36 b(Int)i(Int)g(Int)g(Int)448
1621 y(Int)g(Int)g(Integer)448 1666 y(Int)g(Int)g(String)448
1712 y(Int)18 b(Bool)75 1803 y(data)g(TimeDiff)75 b(=)843
b(--)19 b(LibTime)173 1849 y(TimeDiff)e(Int)38 b(Int)350
1895 y(Int)g(Int)g(Int)g(Int)g(Integer)173 1940 y(deriving)17
b(\(Eq,Ord\))75 2032 y(stdin,)g(stdout,)g(stderr)h(::)g(Handle)586
b(--)19 b(LibIO)75 2147 y Fc(Op)r(erations)75 2223 y
Fi(The)14 b(set)h(of)e(I/O)h(op)q(erations)g(is)g(sorted)h(alphab)q
(etically)m(.)75 2305 y Fe(\(>>=\))312 b(::)19 b(IO)g(a)97
b(->)19 b(\(a)g(->)g(IO)g(b\))273 b(->)19 b(IO)g(b)75
2350 y(\(>>\))332 b(::)19 b(IO)g(a)97 b(->)19 b(IO)g(b)411
b(->)19 b(IO)g(b)75 2396 y(accumulate)212 b(::)19 b([IO)f(a])607
b(->)19 b(IO)g([a])75 2442 y(addToClock)o(Ti)o(me)134
b(::)19 b(TimeDiff)36 b(->)19 b(ClockTime)290 b(->)19
b(ClockTime)75 2487 y(appendFile)212 b(::)19 b(FilePath)d(->)j(String)
370 b(->)19 b(IO)g(\(\))75 2533 y(catch)312 b(::)19 b(IO)g(a)97
b(->)19 b(\(IOError)e(->)h(IO)h(a\))156 b(->)19 b(IO)g(a)75
2579 y(createDire)o(ct)o(ory)114 b(::)19 b(FilePath)565
b(->)19 b(IO)g(\(\))75 2624 y(diffClockT)o(im)o(es)134
b(::)19 b(ClockTime)d(->)j(ClockTime)290 b(->)19 b(TimeDiff)935
2749 y Fi(16)p eop
%%Page: 17 17
17 16 bop 75 26 a Fe(either)292 b(::)19 b(\(a)g(->)f(c\))h(->)g(\(b)g
(->)g(c\))g(->)f(\(Either)f(a)j(b\))e(->)h(c)75 71 y(eofIOError)212
b(::)803 b(IOError)75 117 y(exitWith)252 b(::)19 b(ExitCode)565
b(->)19 b(IO)g(a)75 163 y(fail)332 b(::)19 b(IOError)585
b(->)19 b(IO)g(a)75 208 y(getArgs)272 b(::)803 b(IO)19
b([String])75 254 y(getChar)272 b(::)803 b(IO)19 b(Char)75
300 y(getClockTi)o(me)173 b(::)803 b(IO)19 b(ClockTime)75
345 y(getCPUTime)212 b(::)803 b(IO)19 b(Integer)75 391
y(getCurrent)o(Di)o(rec)o(to)o(ry)36 b(::)803 b(IO)19
b(FilePath)75 437 y(getDirecto)o(ry)o(Con)o(te)o(nts)d(::)j(FilePath)
565 b(->)19 b(IO)g([FilePath])75 482 y(getEnv)292 b(::)19
b(String)605 b(->)19 b(IO)g(String)75 528 y(getProgNam)o(e)193
b(::)803 b(IO)19 b(String)75 574 y(hClose)292 b(::)19
b(Handle)605 b(->)19 b(IO)g(\(\))75 619 y(hFileSize)232
b(::)19 b(Handle)605 b(->)19 b(IO)g(Integer)75 665 y(hFlush)292
b(::)19 b(Handle)605 b(->)19 b(IO)g(\(\))75 711 y(hGetBuffer)o(in)o(g)
154 b(::)19 b(Handle)605 b(->)19 b(IO)g(\(Maybe)e(BufferMode\))75
756 y(hGetChar)252 b(::)19 b(Handle)605 b(->)19 b(IO)g(Char)75
802 y(hGetConten)o(ts)173 b(::)19 b(Handle)605 b(->)19
b(IO)g(String)75 848 y(hGetPosn)252 b(::)19 b(Handle)605
b(->)19 b(IO)g(HandlePosn)75 893 y(hIsClosed)232 b(::)19
b(Handle)605 b(->)19 b(IO)g(Bool)75 939 y(hIsEOF)292
b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75 985 y(hIsOpen)272
b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75 1030 y(hIsReadabl)o(e)193
b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75 1076 y(hIsSeekabl)o(e)193
b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75 1122 y(hIsWritabl)o(e)193
b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75 1167 y(hLookAhead)212
b(::)19 b(Handle)605 b(->)19 b(IO)g(Char)75 1213 y(hPutChar)252
b(::)19 b(Handle)56 b(->)19 b(Char)410 b(->)19 b(IO)g(\(\))75
1259 y(hPutStr)272 b(::)19 b(Handle)56 b(->)19 b(String)370
b(->)19 b(IO)g(\(\))75 1304 y(hPutText)252 b(::)19 b(Text)f(a)58
b(=>)19 b(Handle)96 b(->)19 b(a)195 b(->)19 b(IO)g(\(\))75
1350 y(hReady)292 b(::)19 b(Handle)605 b(->)19 b(IO)g(Bool)75
1396 y(hSeek)312 b(::)19 b(Handle)56 b(->)19 b(SeekMode)56
b(->)19 b(Integer)75 b(->)19 b(IO)g(\(\))75 1441 y(hSetBuffer)o(in)o(g)
154 b(::)19 b(Handle)56 b(->)19 b(BufferMode)290 b(->)19
b(IO)g(\(\))75 1487 y(hSetPosn)252 b(::)19 b(HandlePos)o(n)526
b(->)19 b(IO)g(\(\))75 1533 y(interact)252 b(::)19 b(\(String)e(->)h
(String\))370 b(->)19 b(IO)g(\(\))75 1578 y(ioeGetHand)o(le)173
b(::)19 b(IOError)585 b(->)19 b(Maybe)f(Handle)75 1624
y(ioeGetFile)o(Na)o(me)134 b(::)19 b(IOError)585 b(->)19
b(Maybe)f(FilePath)75 1670 y(isAlreadyE)o(xi)o(sts)o(Er)o(ror)e(::)j
(IOError)585 b(->)19 b(Bool)75 1715 y(isAlreadyI)o(nU)o(seE)o(rr)o(or)
36 b(::)19 b(IOError)585 b(->)19 b(Bool)75 1761 y(isFullErro)o(r)193
b(::)19 b(IOError)585 b(->)19 b(Bool)75 1806 y(isEOFError)212
b(::)19 b(IOError)585 b(->)19 b(Bool)75 1852 y(isIllegalO)o(pe)o(rat)o
(io)o(n)56 b(::)19 b(IOError)585 b(->)19 b(Bool)75 1898
y(isPermissi)o(on)o(Err)o(or)75 b(::)19 b(IOError)585
b(->)19 b(Bool)75 1943 y(isUserErro)o(r)193 b(::)19 b(IOError)585
b(->)19 b(Maybe)f(String)75 1989 y(isEOF)312 b(::)803
b(IO)19 b(Bool)75 2035 y(openFile)252 b(::)19 b(FilePath)d(->)j(IOMode)
370 b(->)19 b(IO)g(Handle)75 2080 y(print)312 b(::)19
b(Text)f(a)h(=>)58 b(a)470 b(->)19 b(IO)g(\(\))75 2126
y(putChar)272 b(::)19 b(Char)645 b(->)19 b(IO)g(\(\))75
2172 y(putStr)292 b(::)19 b(String)605 b(->)19 b(IO)g(\(\))75
2217 y(putText)272 b(::)19 b(Text)f(a)58 b(=>)19 b(a)470
b(->)19 b(IO)g(\(\))75 2263 y(readFile)252 b(::)19 b(FilePath)565
b(->)19 b(IO)g(String)75 2309 y(removeDire)o(ct)o(ory)114
b(::)19 b(FilePath)565 b(->)19 b(IO)g(\(\))75 2354 y(removeFile)212
b(::)19 b(FilePath)565 b(->)19 b(IO)g(\(\))75 2400 y(renameDire)o(ct)o
(ory)114 b(::)19 b(FilePath)d(->)j(FilePath)330 b(->)19
b(IO)g(\(\))75 2446 y(renameFile)212 b(::)19 b(FilePath)d(->)j
(FilePath)330 b(->)19 b(IO)g(\(\))75 2491 y(return)292
b(::)19 b(a)705 b(->)19 b(IO)g(a)75 2537 y(sequence)252
b(::)19 b([IO)f(a])607 b(->)19 b(IO)g(\(\))75 2583 y(setCurrent)o(Di)o
(rec)o(to)o(ry)36 b(::)19 b(FilePath)565 b(->)19 b(IO)g(\(\))935
2749 y Fi(17)p eop
%%Page: 18 18
18 17 bop 75 26 a Fe(setUserInt)o(er)o(rup)o(t)95 b(::)19
b(Maybe)e(\(IO)i(\(\)\))469 b(->)19 b(IO)g(\(Maybe)e(\(IO)i(\(\)\)\))75
71 y(system)292 b(::)19 b(String)605 b(->)19 b(IO)g(ExitCode)75
117 y(toCalendar)o(Ti)o(me)134 b(::)19 b(ClockTime)545
b(->)19 b(CalendarTi)o(me)75 163 y(toUTCTime)232 b(::)19
b(ClockTime)545 b(->)19 b(CalendarTi)o(me)75 208 y(toClockTim)o(e)193
b(::)19 b(CalendarT)o(im)o(e)487 b(->)19 b(ClockTime)75
254 y(try)352 b(::)19 b(IO)g(a)646 b(->)19 b(IO)g(\(Either)e(IOError)g
(a\))75 300 y(userError)232 b(::)19 b(String)605 b(->)19
b(IOError)75 345 y(writeFile)232 b(::)19 b(FilePath)d(->)j(String)370
b(->)19 b(IO)g(\(\))935 2749 y Fi(18)p eop
%%Page: 19 19
19 18 bop 75 26 a Fj(B)67 b(Example:)31 b(P)n(arsing)23
b(Routines)75 112 y Fe(--)c(=========)o(===)o(==)o(===)o(===)o(==)o
(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o
(===)o(==)o(===)o(===)o(==)o(===)o(==)o(=)75 158 y(--)g(Operation)o(s)e
(on)h(Errors)75 204 y(--)h(=========)o(===)o(==)o(===)o(===)o(==)o(===)
o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o
(==)o(===)o(===)o(==)o(===)o(==)o(=)75 295 y(lookaheadE)o(rr)o(or)d(::)
j(String)e(->)i(String)e(->)i(IO)g(a)75 341 y(isLookahea)o(d)d(::)j
(IOError)e(->)i(Bool)75 386 y(mkParseErr)o(or)d(::)j(IOError)e(->)i(IO)
f(a)75 478 y(lookaheadE)o(rr)o(or)e(exp)j(fnd)f(=)114
523 y(fail)g(\(userError)e("L:)j(Expected)d("++exp++")g(but)j(found)e
("++fnd\))75 569 y(isLookahea)o(d)f(e)k(=)f(case)f(\(isUserEr)o(ror)e
(e\))j(of)114 615 y(Just)f(\('L':_\))f(->)i(True)114
660 y(_)g(->)g(False)75 706 y(mkParseErr)o(or)d(e)j(=)g(case)g
(\(isUserE)o(rro)o(r)d(e\))j(of)114 752 y(Just)f(\('L':msg\))e(->)j
(fail)f(\(userError)e(\('P':msg\)\))114 797 y(_)j(->)g(fail)f(e)75
889 y(--)h(=========)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(==)
o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o
(==)o(===)o(==)o(=)75 934 y(--)g(Implement)o(ati)o(on)d(of)j(the)f
(Parser)g(Monad)75 980 y(--)h(=========)o(===)o(==)o(===)o(===)o(==)o
(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o
(===)o(==)o(===)o(===)o(==)o(===)o(==)o(=)75 1071 y(match)57
b(::)19 b(String)e(->)i(\(Token)e(->)i(Maybe)f(a\))h(->)f(Parser)g(a)75
1117 y(altP)77 b(::)19 b(Parser)e(a)i(->)g(Parser)e(a)j(->)e(Parser)g
(a)75 1163 y(returnP)f(::)i(a)g(->)g(Parser)e(a)75 1208
y(thenP)57 b(::)19 b(Parser)e(a)i(->)g(\(a)g(->)g(Parser)e(b\))i(->)g
(Parser)e(b)75 1254 y(parse)57 b(::)19 b(Parser)e(a)i(->)g(Handle)e(->)
i(IO)g(a)75 1345 y(match)f(e)h(f)g(h)g(tok0)f(=)114 1391
y(case)g(f)i(tok0)e(of)134 1437 y(Just)g(x)h(->)g(hGetToken)d(h)j(>>=)g
(\\tok1)e(->)i(return)f(\(x,)g(tok1\))134 1482 y(Nothing)f(->)i
(lookahead)o(Er)o(ror)d(e)j(\(show)f(tok0\))75 1528 y(\(p1)g(`altP`)g
(p2\))g(h)h(s)h(=)114 1574 y(p1)f(h)g(s)h(`handle`)c(\\e)j(->)114
1619 y(if)g(is_lookahe)o(ad)d(e)j(then)f(p2)h(h)g(s)h(else)e(mkParseEr)
o(ro)o(r)f(e)75 1665 y(returnP)g(a)i(h)g(s)h(=)f(return)e(\(a,)i(s\))75
1711 y(\(p)g(`thenP`)e(f\))i(h)g(s)g(=)g(p)h(h)f(s)g(>>=)f(\\\(a,s\))g
(->)h(f)g(a)g(h)g(s)g(`handle`)e(mkParseErr)o(or)75 1756
y(parse)h(p)h(h)g(=)g(\(hGetToken)d(h)j(>>=)g(p)g(h\))g(>>=)f(\(return)
f(.)i(fst\))75 1848 y(--)g(=========)o(===)o(==)o(===)o(===)o(==)o(===)
o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o
(==)o(===)o(===)o(==)o(===)o(==)o(=)75 1893 y(--)g(Derived)e(Parser)g
(Functions)75 1939 y(--)i(=========)o(===)o(==)o(===)o(===)o(==)o(===)o
(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)o(===)o(===)o(==)o(===)o(==)
o(===)o(===)o(==)o(===)o(==)o(=)75 2030 y(theToken::)d(Token)h(->)i
(Parser)f(Token)75 2076 y(ident)57 b(::)19 b(Parser)e(String)75
2122 y(seqP)77 b(::)19 b(Parser)e(a)i(->)g(Parser)e(b)j(->)e(Parser)g
(b)75 2167 y(\(><\))77 b(::)19 b(Parser)e(a)i(->)g(Parser)e(b)j(->)e
(Parser)g(\(a,b\))75 2213 y(repeatP)f(::)i(Parser)e(a)i(->)g(Parser)e
([a])75 2304 y(theToken)g(tok)h(=)h(match)f(\(show)g(tok\))g(\(\\tok0)f
(->)i(if)g(tok==tok0)d(then)i(Just)g(tok)g(else)g(Nothing\))75
2350 y(ident)g(=)h(match)f("<ident>")e(\(\\tok0)h(->)i(case)f(tok0)g
(of)134 2396 y(ALPHA)g(x)h(->)g(Just)f(x)134 2441 y(_)h(->)g(Nothing\))
75 2487 y(p1)g(`seqP`)e(p2)i(=)g(p1)g(`thenP`)e(const)h(p2)75
2533 y(\(p1)g(><)h(p2\))g(=)g(p1)g(`thenP`)e(\\x)i(->)f(p2)h(`thenP`)e
(\\y)i(->)g(returnP)e(\(x,y\))75 2578 y(repeatP)g(p)i(=)g(\(p)g(><)g
(repeatP)e(p)i(`thenP`)e(\(returnP)g(.)i(uncurry)e(\(:\)\)\))g(`altP`)h
(returnP)f([])935 2749 y Fi(19)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
